window.__require=function t(e,o,n){function c(r,a){if(!o[r]){if(!e[r]){var s=r.split("/");if(s=s[s.length-1],!e[s]){var p="function"==typeof __require&&__require;if(!a&&p)return p(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var l=o[r]={exports:{}};e[r][0].call(l.exports,function(t){return c(e[r][1][t]||t)},l,l.exports,t,e,o,n)}return o[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<n.length;r++)c(n[r]);return c}({Magnifier:[function(t,e,o){"use strict";cc._RF.push(e,"ac762bfY29KOIBc8dW/z/gl","Magnifier");var n,c=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mirror=null,e.mirrorCameraNode=null,e.tempCameraSpriteNode=null,e.touchStartPos=null,e.mirrorOriginPos=null,e}return c(e,t),e.prototype.onLoad=function(){var t=cc.view.getVisibleSize(),e=new cc.RenderTexture;e.initWithSize(t.width,t.height);var o=new cc.SpriteFrame;o.setTexture(e),this.mirrorCameraNode.getComponent(cc.Camera).targetTexture=e,this.tempCameraSpriteNode.getComponent(cc.Sprite).spriteFrame=o,this.tempCameraSpriteNode.scaleY=-1,this.mirrorCameraNode.setPosition(this.mirror.getPosition()),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveEvent,this)},e.prototype.touchStartEvent=function(t){this.touchStartPos=t.getLocation(),this.mirrorOriginPos=this.mirror.getPosition()},e.prototype.touchMoveEvent=function(t){var e=t.getLocation(),o=this.mirrorOriginPos.add(e.subtract(this.touchStartPos));this.mirror.setPosition(o),this.mirrorCameraNode.setPosition(o)},i([s(cc.Node)],e.prototype,"mirror",void 0),i([s(cc.Node)],e.prototype,"mirrorCameraNode",void 0),i([s(cc.Node)],e.prototype,"tempCameraSpriteNode",void 0),i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],MainScene:[function(t,e){"use strict";cc._RF.push(e,"3dab5pBPU5Hg7MiBju+ZvV9","MainScene");var o=t("Utils");cc.Class({extends:cc.Component,properties:{nodeTarget:{default:null,type:cc.Node,displayName:"\u98de\u884c\u76ee\u6807\u70b9"},nodeCoin:{default:null,type:cc.Node,displayName:"\u91d1\u5e01\u7236\u8282\u70b9"},sprCoin:{default:null,type:cc.Sprite,displayName:"\u91d1\u5e01\u56fe\u6807"},labelCoin:{default:null,type:cc.Label,displayName:"\u91d1\u5e01\u6570\u91cf"},labelAddCoin:{default:null,type:cc.Label,displayName:"\u6dfb\u52a0\u91d1\u5e01"}},onLoad:function(){this.coinCount=0,this._addCoin(this.coinCount)},onClickBtnAdd:function(t){var e=Math.floor(1e3*Math.random()),n=this;o.FlyCoin(e,t.target,n.nodeTarget,n.nodeCoin,function(t){n._addCoin(t)})},_addCoin:function(t){this.coinCount+=t,this.labelCoin.string=o.Thousands(this.coinCount),t>0&&(this.labelAddCoin.string="+"+t,this.labelAddCoin.getComponent(cc.Animation).play(),this.sprCoin.getComponent(cc.Animation).play())}}),cc._RF.pop()},{Utils:"Utils"}],MainShadow:[function(t,e,o){"use strict";cc._RF.push(e,"0dc97ZIzztH7IJMDQwHUeiI","MainShadow");var n,c=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shadowList=[],e.role=null,e.roleCamera=null,e}return c(e,t),e.prototype.onLoad=function(){this.role.zIndex=10;var t=new cc.RenderTexture;t.initWithSize(this.node.width,this.node.height);var e=new cc.SpriteFrame;e.setTexture(t),this.roleCamera.targetTexture=t,this.shadowList.forEach(function(t,o){t.node.scaleY=-1,t.node.zIndex=10-o,t.node.opacity=100-15*o,t.spriteFrame=e}),this.schedule(this.shadow,.1,cc.macro.REPEAT_FOREVER),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveEvent,this)},e.prototype.touchMoveEvent=function(t){this.role.x+=t.getDeltaX(),this.role.y+=t.getDeltaY()},e.prototype.shadow=function(){var t=this;this.shadowList.forEach(function(e,o){e.node.position.sub(t.role.position).mag()<.5||(e.node.stopAllActions(),e.node.runAction(cc.sequence(cc.show(),cc.moveTo(.04*o+.02,t.role.x,t.role.y),cc.hide())))})},i([s([cc.Sprite])],e.prototype,"shadowList",void 0),i([s(cc.Node)],e.prototype,"role",void 0),i([s(cc.Camera)],e.prototype,"roleCamera",void 0),i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],Main:[function(t,e,o){"use strict";cc._RF.push(e,"3e182LVnWtPcq07MHDWTYZt","Main");var n,c=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.onLoad=function(){cc.debug.setDisplayStats(!1)},e.prototype.onClickBtnFlyCoin=function(){cc.director.loadScene("fly")},e.prototype.onClickBtnFlash=function(){cc.director.loadScene("flash")},e.prototype.onClickBtnMagnifier=function(){cc.director.loadScene("magnifier")},e.prototype.onClickBtnScratch=function(){cc.director.loadScene("scratch_card")},e.prototype.onClickBtnShadow=function(){cc.director.loadScene("shadow")},e.prototype.onClickBtnBack=function(){cc.director.loadScene("main")},i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],ModifyBg:[function(t,e,o){"use strict";cc._RF.push(e,"2f8e3mgOexCxYAFDzkCU9D1","ModifyBg");var n,c=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeBg=[],e.curIndex=0,e}return c(e,t),e.prototype.onLoad=function(){this._modifyNodeActive()},e.prototype.onBtnModify=function(){this.curIndex=(this.curIndex+1)%this.nodeBg.length,this._modifyNodeActive()},e.prototype._modifyNodeActive=function(){for(var t=0;t<this.nodeBg.length;t++)this.nodeBg[t].active=this.curIndex==t},i([s(cc.Node)],e.prototype,"nodeBg",void 0),i([s],e.prototype,"curIndex",void 0),i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],ObjPool:[function(t,e){"use strict";cc._RF.push(e,"76cc37f8fJKEo6QBiYRHelH","ObjPool"),cc.Class({extends:cc.Component,properties:{prefabCoin:{default:null,type:cc.Prefab},objCount:{default:5,type:cc.Float}},onLoad:function(){cc.game.objpool=this,this.pool=new cc.NodePool;for(var t=0;t<this.objCount;t++){var e=cc.instantiate(this.prefabCoin);this.pool.put(e)}},get:function(){return this.pool.size()>0?this.pool.get():cc.instantiate(this.prefabCoin)},clear:function(t){this.pool.put(t)}}),cc._RF.pop()},{}],ScratchCard:[function(t,e,o){"use strict";cc._RF.push(e,"ae592LCx5xAd7z/mVJ8QHs/","ScratchCard");var n,c=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodeMask=null,e.NodeTicket=null,e.tempDrawPoints=[],e.polygonPointsList=[],e}return c(e,t),e.prototype.onLoad=function(){this.onReset(),this.NodeTicket.on(cc.Node.EventType.TOUCH_START,this.touchStartEvent,this),this.NodeTicket.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveEvent,this),this.NodeTicket.on(cc.Node.EventType.TOUCH_END,this.touchEndEvent,this),this.NodeTicket.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEndEvent,this)},e.prototype.touchStartEvent=function(t){var e=this.NodeTicket.convertToNodeSpaceAR(t.getLocation());this.clearMask(e)},e.prototype.touchMoveEvent=function(t){var e=this.NodeTicket.convertToNodeSpaceAR(t.getLocation());this.clearMask(e)},e.prototype.touchEndEvent=function(){this.tempDrawPoints=[]},e.prototype.clearMask=function(t){var e=this.NodeMask._graphics,o=this.tempDrawPoints.length;if(this.tempDrawPoints.push(t),o<=1)e.circle(t.x,t.y,20),e.fill(),this.polygonPointsList.forEach(function(e){if(!e.isHit){var o=t.x>e.rect.x&&t.x<e.rect.x+e.rect.width,n=t.y>e.rect.y&&t.y<e.rect.y+e.rect.height;o&&n&&(e.isHit=!0)}});else{var n=this.tempDrawPoints[o-2],c=this.tempDrawPoints[o-1];e.moveTo(n.x,n.y),e.lineTo(c.x,c.y),e.lineWidth=40,e.lineCap=cc.Graphics.LineCap.ROUND,e.lineJoin=cc.Graphics.LineJoin.ROUND,e.strokeColor=cc.color(255,255,255,255),e.stroke(),this.polygonPointsList.forEach(function(t){t.isHit=t.isHit||cc.Intersection.lineRect(n,c,t.rect)})}},e.prototype.onReset=function(){this.NodeMask._graphics.clear(),this.tempDrawPoints=[],this.polygonPointsList=[],this.NodeTicket.getComponent(cc.Graphics).clear();for(var t=0;t<this.NodeTicket.width;t+=40)for(var e=0;e<this.NodeTicket.height;e+=40)this.polygonPointsList.push({rect:cc.rect(t-this.NodeTicket.width/2,e-this.NodeTicket.height/2,40,40),isHit:!1})},i([s(cc.Mask)],e.prototype,"NodeMask",void 0),i([s(cc.Node)],e.prototype,"NodeTicket",void 0),i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],Utils:[function(t,e){"use strict";cc._RF.push(e,"dcbc9iOOlFIU6V1pxaBWo7N","Utils"),e.exports={FlyCoin:function(t,e,o,n,c){var i,r,a=Math.floor(t/100);a=Math.min(8,Math.max(1,a));for(var s=[0,1,2,3],p=[5,10,8,15,12,13,30,25,20,45,78,90,46],l=function(a){var l=cc.game.objpool.get();n.addChild(l);var u=p[Math.floor(Math.random()*p.length)];switch(a%s.length){case 0:i=-30+e.x,r=-30*Math.tan(u*Math.PI/180)+e.y;break;case 1:i=30*Math.tan(u*Math.PI/180)+e.x,r=30+e.y;break;case 2:i=30+e.x,r=30*Math.tan(u*Math.PI/180)+e.y;break;case 3:i=-30*Math.tan(u*Math.PI/180)+e.x,r=-30+e.y}l.runAction(cc.sequence(cc.place(cc.v2(e.x,e.y)),cc.moveTo(.5,i,r).easing(cc.easeCubicActionOut()),cc.moveTo(.9,o.x,o.y).easing(cc.easeCubicActionOut()),cc.callFunc(function(){cc.game.objpool.clear(l)},l),cc.callFunc(function(){0==a&&null!=c&&c(t)},t)))},u=0;u<a;u++)l(u)},Thousands:function(t){t=(t||0).toString();for(var e="";t.length>3;)e=","+t.slice(-3)+e,t=t.slice(0,t.length-3);return t&&(e=t+e),e}},cc._RF.pop()},{}]},{},["Main","MainScene","ObjPool","Utils","Magnifier","ModifyBg","ScratchCard","MainShadow"]);