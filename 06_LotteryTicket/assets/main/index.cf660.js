window.__require=function t(e,o,i){function n(r,s){if(!o[r]){if(!e[r]){var p=r.split("/");if(p=p[p.length-1],!e[p]){var h="function"==typeof __require&&__require;if(!s&&h)return h(p,!0);if(c)return c(p,!0);throw new Error("Cannot find module '"+r+"'")}r=p}var a=o[r]={exports:{}};e[r][0].call(a.exports,function(t){return n(e[r][1][t]||t)},a,a.exports,t,e,o,i)}return o[r].exports}for(var c="function"==typeof __require&&__require,r=0;r<i.length;r++)n(i[r]);return n}({Main:[function(t,e,o){"use strict";cc._RF.push(e,"ae592LCx5xAd7z/mVJ8QHs/","Main");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,i){var n,c=arguments.length,r=c<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(r=(c<3?n(r):c>3?n(e,o,r):n(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,p=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodeMask=null,e.NodeTicket=null,e.tempDrawPoints=[],e.polygonPointsList=[],e}return n(e,t),e.prototype.onLoad=function(){cc.debug.setDisplayStats(!1),this.onReset(),this.NodeTicket.on(cc.Node.EventType.TOUCH_START,this.touchStartEvent,this),this.NodeTicket.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveEvent,this),this.NodeTicket.on(cc.Node.EventType.TOUCH_END,this.touchEndEvent,this),this.NodeTicket.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEndEvent,this)},e.prototype.touchStartEvent=function(t){var e=this.NodeTicket.convertToNodeSpaceAR(t.getLocation());this.clearMask(e)},e.prototype.touchMoveEvent=function(t){var e=this.NodeTicket.convertToNodeSpaceAR(t.getLocation());this.clearMask(e)},e.prototype.touchEndEvent=function(){this.tempDrawPoints=[]},e.prototype.clearMask=function(t){var e=this.NodeMask._graphics,o=this.tempDrawPoints.length;if(this.tempDrawPoints.push(t),o<=1)e.circle(t.x,t.y,20),e.fill(),this.polygonPointsList.forEach(function(e){if(!e.isHit){var o=t.x>e.rect.x&&t.x<e.rect.x+e.rect.width,i=t.y>e.rect.y&&t.y<e.rect.y+e.rect.height;o&&i&&(e.isHit=!0)}});else{var i=this.tempDrawPoints[o-2],n=this.tempDrawPoints[o-1];e.moveTo(i.x,i.y),e.lineTo(n.x,n.y),e.lineWidth=40,e.lineCap=cc.Graphics.LineCap.ROUND,e.lineJoin=cc.Graphics.LineJoin.ROUND,e.strokeColor=cc.color(255,255,255,255),e.stroke(),this.polygonPointsList.forEach(function(t){t.isHit=t.isHit||cc.Intersection.lineRect(i,n,t.rect)})}},e.prototype.onReset=function(){this.NodeMask._graphics.clear(),this.tempDrawPoints=[],this.polygonPointsList=[],this.NodeTicket.getComponent(cc.Graphics).clear();for(var t=0;t<this.NodeTicket.width;t+=40)for(var e=0;e<this.NodeTicket.height;e+=40)this.polygonPointsList.push({rect:cc.rect(t-this.NodeTicket.width/2,e-this.NodeTicket.height/2,40,40),isHit:!1})},c([p(cc.Mask)],e.prototype,"NodeMask",void 0),c([p(cc.Node)],e.prototype,"NodeTicket",void 0),c([s],e)}(cc.Component);o.default=h,cc._RF.pop()},{}]},{},["Main"]);