window.__require=function t(e,i,o){function n(c,a){if(!i[c]){if(!e[c]){var h=c.split("/");if(h=h[h.length-1],!e[h]){var r="function"==typeof __require&&__require;if(!a&&r)return r(h,!0);if(s)return s(h,!0);throw new Error("Cannot find module '"+c+"'")}c=h}var d=i[c]={exports:{}};e[c][0].call(d.exports,function(t){return n(e[c][1][t]||t)},d,d.exports,t,e,i,o)}return i[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<o.length;c++)n(o[c]);return n}({Ball:[function(t,e){"use strict";cc._RF.push(e,"05d6195d99B06zz0IIi6csv","Ball");var i=cc.Enum({BEGEN:-1,ENDED:-1,CANCEL:-1}),o=cc.Enum({FLY:-1,DOWN:-1,NONE:-1});cc.Class({extends:cc.Component,properties:{emitSpeed:0,gravity:0,scale:0,showTime:0,maxXSpeed:0},init:function(t){this.game=t,this.showAnim(),this.valid=!1,this.status=i.CANCEL,this.currentHorSpeed=0,this.currentVerSpeed=0,this.target=cc.v2(0,0),this.node.setScale(1),this.node.rotation=0,this.hitIn=!1},showAnim:function(){this.node.opacity=0;var t=cc.fadeIn(this.showTime);this.node.runAction(t)},onTouchStart:function(t){return this.isAddScore=!0,this.began=t.getLocation(),this.status=i.BEGEN,!0},onTouchEnd:function(t){this.ended=t.getLocation(),this.began.sub(this.ended).mag()>100&&this.began.y<this.ended.y?(this.status=i.ENDED,this.currentVerSpeed=this.emitSpeed,this.target=this.node.parent.convertToNodeSpaceAR(this.ended),this.currentHorSpeed=2*this.target.x,this.game.soundMng.playFlySound(),this.doAnim(),this.game.newBall(),this.shadow&&this.shadow.dimiss()):this.status=i.CANCEL},onTouchCancel:function(){this.status=i.CANCEL,this.isAddScore=!1},doAnim:function(){var t=cc.scaleTo(1,this.scale),e=2*(Math.random()-.5),i=cc.rotateBy(2,1080*e),o=cc.spawn(t,i);this.node.runAction(o)},update:function(t){this.status==i.ENDED&&this._updatePosition(t)},_checkValid:function(){if(this.ballStatus===o.DOWN&&!this.valid){var t=this.node.parent;if(null!=t){var e=this.game.basket,i=e.left,n=e.right,s=this.node.getBoundingBoxToWorld().width/2,c=(t.convertToWorldSpaceAR(this.node.getPosition()).x,t.convertToWorldSpaceAR(this.node.getPosition()).x,t.convertToWorldSpaceAR(this.node.getPosition()).x),a=t.convertToWorldSpaceAR(this.node.getPosition()).y,h=t.convertToWorldSpaceAR(e.linePreNode.getPosition()).y-s,r=e.node.convertToWorldSpaceAR(i.getPosition()).x,d=e.node.convertToWorldSpaceAR(n.getPosition()).x,u=e.node.convertToWorldSpaceAR(i.getPosition()).y-2*s;a<h&&a>u&&c>r&&c<d&&(this.valid=!0,this.game.score.addScore(),this.game.basket.playNetAnim(),this.hitIn?this.game.soundMng.playHitBoardInSound():this.game.soundMng.playBallInSound())}}},bindShadow:function(t){this.shadow=t},_updatePosition:function(t){this.node.x+=t*this.currentHorSpeed,this.currentVerSpeed-=t*this.gravity,this.node.y+=t*this.currentVerSpeed,this._changeBallStatus(this.currentVerSpeed),this.ballStatus===o.NONE&&this._isOutScreen()&&(this.node.stopAllActions(),this.node.removeFromParent(),this.valid=!1)},_isOutScreen:function(){return this.node.y<-800},_changeBallStatus:function(t){0===t||this._isOutScreen()?this.ballStatus=o.NONE:t>0?(this.ballStatus=o.FLY,this.game.basket.switchMaskLineShow(!1)):(this.ballStatus=o.DOWN,this.game.basket.switchMaskLineShow(!0))},onCollisionEnter:function(t,e){if(this.ballStatus!==o.FLY){var i=t.node.getComponent("CollisionBox"),n=i.getLeft(),s=i.getRight(),c=e.world.radius,a=this.node.parent.convertToWorldSpaceAR(e.node.getPosition()),h=this.game.basket.node.convertToWorldSpaceAR(t.node.getPosition()),r=(a.y-h.y)/c,d=Math.abs(h.x-a.x)/c,u=this.currentHorSpeed/Math.abs(this.currentHorSpeed)*this.maxXSpeed;("right"===t.node.name&&this.node.x<=n||"left"===t.node.name&&this.node.x>=s)&&(this.hitIn?this.currentHorSpeed=u*d:(this.currentHorSpeed=-1*u*d,this.hitIn=!0)),("right"===t.node.name&&this.node.x>s||"left"===t.node.name&&this.node.x<n)&&(this.currentHorSpeed=u),this.currentVerSpeed=-1*this.currentVerSpeed*r,this.isAddScore&&this.hitIn?(this.isAddScore=!1,this.game.score.addScore(),this.game.basket.playNetAnim(),this.game.soundMng.playHitBoardInSound()):this.game.soundMng.playHitBoardSound()}}}),cc._RF.pop()},{}],Basket:[function(t,e){"use strict";cc._RF.push(e,"ac9fdFyp49GVKHUgk9/FVli","Basket"),cc.Class({extends:cc.Component,properties:{line:cc.Node,left:cc.Node,right:cc.Node,linePre:cc.Prefab,count:cc.Label},init:function(t){this.game=t,this._createMaskLine()},startMove:function(){this._doMoveAnim()},stopMove:function(){this.node.stopAllActions(),this._resetPosition()},_resetPosition:function(){this.node.x=0},_doMoveAnim:function(){var t=cc.moveBy(3,cc.v2(200,0)),e=cc.moveBy(3,cc.v2(-200,0)),i=cc.repeatForever(cc.sequence(t,e,e,t));this.node.runAction(i)},update:function(){if(this.linePreNode){var t=this.node.convertToWorldSpaceAR(this.line.getPosition()),e=this.node.parent.convertToNodeSpaceAR(t);this.linePreNode.setPosition(this.node.x,e.y)}},_createMaskLine:function(){this.linePreNode=cc.instantiate(this.linePre),this.game.node.addChild(this.linePreNode)},switchMaskLineShow:function(t){this.linePreNode.zIndex=t?100:0},playNetAnim:function(){if(this.linePreNode){var t=cc.scaleTo(.1,1,1.1),e=cc.scaleTo(.3,1,.9),i=cc.scaleTo(.2,1,1),o=cc.sequence(t,e,i);this.linePreNode.getChildByName("net").runAction(o)}}}),cc._RF.pop()},{}],CollisionBox:[function(t,e){"use strict";cc._RF.push(e,"7c4c6Rwi4tIC4UMBgYL4231","CollisionBox"),cc.Class({extends:cc.Component,properties:{},getLeft:function(){return this.node.x-this.node.width/2},getRight:function(){return this.node.x+this.node.width/2},getWorldPoint:function(t){return t.convertToWorldSpaceAR(this.node.getPosition())}}),cc._RF.pop()},{}],GameManager:[function(t,e){"use strict";cc._RF.push(e,"7b066H36KxCVr0SNDZka91/","GameManager");var i=t("Basket"),o=(t("Ball"),t("Shadow"),t("Score")),n=t("SoundManager"),s=t("TimeManager");cc.Enum({BEGEN:-1,ENDED:-1,CANCEL:-1}),cc.Class({extends:cc.Component,properties:{ball:cc.Prefab,shadow:cc.Prefab,basket:i,startPosition:cc.Vec2,score:o,soundMng:n,timeMng:s,nodeStart:cc.Node,nodeTouch:cc.Node},onLoad:function(){cc.debug.setDisplayStats(!1),this.nodeStart.active=!0,this.newBall(),this.initCollisionSys(),this.basket.init(this),this.score.init(this),this.timeMng.init(this),this.score.setScore(0),this.nodeTouch.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.nodeTouch.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.nodeTouch.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},onTouchStart:function(t,e){return null!=this.ballComp&&null!=this.ballComp&&this.ballComp.onTouchStart(t,e)},onTouchEnd:function(t,e){null!=this.ballComp&&null!=this.ballComp&&this.ballComp.onTouchEnd(t,e)},onTouchCancel:function(t,e){null!=this.ballComp&&null!=this.ballComp&&this.ballComp.onTouchCancel(t,e)},onClickBtnStart:function(){this.nodeStart.active=!1,this.timeMng.oneSchedule()},initCollisionSys:function(){this.collisionManager=cc.director.getCollisionManager(),this.collisionManager.enabled=!0},newBall:function(){var t=cc.instantiate(this.ball);t.zIndex=1,this.node.addChild(t),t.setPosition(this.startPosition),this.ballComp=t.getComponent("Ball"),this.ballComp.init(this),this.newShadow(this.ballComp)},newShadow:function(t){var e=cc.instantiate(this.shadow);e.zIndex=2,this.node.addChild(e),e.setPosition(this.startPosition);var i=e.getComponent("Shadow");t.bindShadow(i),i.init(this)},startMoveBasket:function(){this.basket.startMove()},stopMoveBasket:function(){this.basket.stopMove()},gameOver:function(){this.nodeStart.active=!0,this.score.setScore(0)}}),cc._RF.pop()},{Ball:"Ball",Basket:"Basket",Score:"Score",Shadow:"Shadow",SoundManager:"SoundManager",TimeManager:"TimeManager"}],Score:[function(t,e){"use strict";cc._RF.push(e,"0dbad8nuMBK8L4YWla50RjT","Score"),cc.Class({extends:cc.Component,properties:{scoreText:cc.Label},init:function(t){this.game=t,this._score=0},getScore:function(){return _score},setScore:function(t){this._score=t,this._updateScore()},addScore:function(){this._score+=1,this._updateScore()},_updateScore:function(){this.scoreText.string=this._score}}),cc._RF.pop()},{}],Shadow:[function(t,e){"use strict";cc._RF.push(e,"403b5GGRt5LYYNN87LqlnM7","Shadow"),cc.Class({extends:cc.Component,properties:{showTime:0,shadow2:cc.Node},init:function(){this.node.setScale(1),this._showAnim()},_showAnim:function(){this.node.opacity=0,this.shadow2.active=!0;var t=cc.fadeIn(this.showTime);this.node.runAction(t)},dimiss:function(){this._dismissAnim()},_dismissAnim:function(){this.shadow2.active=!1;var t=cc.fadeOut(this.showTime),e=cc.scaleTo(this.showTime,.5),i=cc.spawn(t,e),o=cc.callFunc(this._callBack.bind(this));this.node.runAction(cc.sequence(i,o))},_callBack:function(){this.node.stopAllActions(),this.node.removeFromParent()}}),cc._RF.pop()},{}],SoundManager:[function(t,e){"use strict";cc._RF.push(e,"3495eBx+i1PlrOKcbTaqUD6","SoundManager"),cc.Class({extends:cc.Component,properties:{toggleAudio:!0,scoreAudio:{default:null,url:cc.AudioClip},ballInAudio:{default:null,url:cc.AudioClip},hitBoardInAudio:{default:null,url:cc.AudioClip},hitBoardAudio:{default:null,url:cc.AudioClip},flyAudio:{default:null,url:cc.AudioClip}},init:function(){},playScoreSound:function(){this.playSound(this.scoreAudio)},playBallInSound:function(){this.playSound(this.ballInAudio)},playHitBoardSound:function(){this.playSound(this.hitBoardAudio)},playHitBoardInSound:function(){this.playSound(this.hitBoardInAudio)},playFlySound:function(){this.playSound(this.flyAudio)},playSound:function(t){this.toggleAudio&&cc.audioEngine.playEffect(t,!1)}}),cc._RF.pop()},{}],TimeManager:[function(t,e){"use strict";cc._RF.push(e,"f81cdY3hlNAza/JwLtsWk2O","TimeManager"),cc.Class({extends:cc.Component,properties:{maxTime:0,timeToMove:0},init:function(t){this.game=t,this.isTimeToMove=!1},_callback:function(){this.counting=!1,this.game.basket.count.string="00  00",this.game.stopMoveBasket(),this.game.gameOver()},stopCounting:function(){this.unschedule(this._callback),this.time=this.maxTime},oneSchedule:function(){this.stopCounting(),this.scheduleOnce(this._callback,this.maxTime),this.counting=!0,this.isTimeToMove=!1},update:function(t){if(this.counting&&this.time>0){this.time-=t,this.maxTime-this.timeToMove>=this.time&&!this.isTimeToMove&&(this.isTimeToMove=!0,this.game.startMoveBasket());var e=this.time.toFixed(2);4===e.length&&(e="0"+e),this.game.basket.count.string=e.replace(".","  ")}}}),cc._RF.pop()},{}],"use_v2.0.x_cc.Toggle_event":[function(t,e){"use strict";cc._RF.push(e,"e2f49Rdv8NJToM34Cit3yc7","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(t,e){"use strict";cc._RF.push(e,"97691It5KtOKL9VOpboLrdS","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["use_v2.0.x_cc.Toggle_event","use_v2.1-2.2.1_cc.Toggle_event","Ball","Basket","CollisionBox","GameManager","Score","Shadow","SoundManager","TimeManager"]);