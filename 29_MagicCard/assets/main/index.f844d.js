window.__require=function t(i,e,n){function s(c,a){if(!e[c]){if(!i[c]){var r=c.split("/");if(r=r[r.length-1],!i[r]){var l="function"==typeof __require&&__require;if(!a&&l)return l(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+c+"'")}c=r}var u=e[c]={exports:{}};i[c][0].call(u.exports,function(t){return s(i[c][1][t]||t)},u,u.exports,t,i,e,n)}return e[c].exports}for(var o="function"==typeof __require&&__require,c=0;c<n.length;c++)s(n[c]);return s}({Cards:[function(t,i){"use strict";cc._RF.push(i,"897f6gW3CdEfLyU3nAKX8CV","Cards"),t("../UI/GameView"),cc.Class({extends:cc.Component,onLoad:function(){cc.director.getCollisionManager().enabled=!0},onCollisionEnter:function(t,i){gameViewScript.CollisionEnter(t,i)},onCollisionStay:function(t,i){gameViewScript.CollisionStay(t,i)},onCollisionExit:function(t,i){gameViewScript.CollisionExit(t,i)}}),cc._RF.pop()},{"../UI/GameView":"GameView"}],DataManager:[function(t,i){"use strict";cc._RF.push(i,"dde7ap+97dFdY84mYSxAiF3","DataManager"),cc.Class({extends:cc.Component,properties:{cofDataMap:{default:{},visible:!1},statusList:{default:{},visible:!1},bufList:{default:{},visible:!1},actionList:{default:{},visible:!1},actionCbList:{default:{},visible:!1},firstRemote:{default:{},visible:!1}},onLoad:function(){window.dataManager=this},setStore:function(t,i,e){var n=JSON.stringify(i);cc.sys.localStorage.setItem(t,n),null!=e&&e()},getStore:function(t,i){null!=this.firstRemote[t]&&null!=this.firstRemote[t]||(this.firstRemote[t]=!0);var e=cc.sys.localStorage.getItem(t);e=JSON.parse(e),null!=i&&i(e)}}),cc._RF.pop()},{}],EffectManager:[function(t,i){"use strict";cc._RF.push(i,"f4801m4RlxJo4dLOkit7h5e","EffectManager"),cc.Class({extends:cc.Component,properties:{idxList:{default:{},visible:!1},effectView:{default:null,type:cc.Node,visible:!1},effectList:{default:[],type:[cc.Node],visible:!1},giftList:{default:[],type:[cc.Node],visible:!1},particleList:{default:[],type:[cc.Node],visible:!1},prefabList:{default:[],type:[cc.Node],visible:!1},picList:{default:[],type:[cc.SpriteFrame],visible:!1},eventList:{default:null,visible:!1},touchParticle:{default:null,type:cc.ParticleSystem,visible:!1},isToucing:{default:!1,visible:!1}},onLoad:function(){window.effectManager=this},start:function(){null==this.effectView&&(this.effectView=new cc.Node("EffectView"),this.effectView.width=cc.winSize.width,this.effectView.height=cc.winSize.height,this.effectView.parent=cc.director.getScene().getChildByName("Canvas"),this.effectView.setSiblingIndex(this.effectView.parent.childrenCount),this.effectView.zIndex=10001,this.effectView.position=cc.v2(0,0)),resManager.loadPrefab("Boom",function(t){this.particleList[0]=t}.bind(this)),resManager.loadPrefab("CutCrash",function(t){this.particleList[1]=t}.bind(this)),resManager.loadPrefab("LevelUp",function(t){this.particleList[2]=t}.bind(this))},flyReward:function(t,i,e,n,s,o){if(void 0===o&&(o=!1),null==this.picList[i])0==i&&resManager.loadSprite("UIView.X3Show",function(c){this.picList[i]=c,this.flyReward(t,i,e,n,s,o)}.bind(this));else{var c=cc.v2(0,0);null!=n&&(c=n.parent.convertToWorldSpaceAR(n.position),c=this.effectView.convertToNodeSpaceAR(c));var a=cc.v2(0,500);null!=e&&(a=e.parent.convertToWorldSpaceAR(e.position),a=this.effectView.convertToNodeSpaceAR(a));for(var r=0;r<t;r++){var l=this.effectList.pop();null==l&&(l=new cc.Node(r)).addComponent(cc.Sprite),l.getComponent(cc.Sprite).spriteFrame=this.picList[i],l.active=!1,l.parent=this.effectView,l.position=c,l.active=!0,o&&(l.x=l.x+50*Math.random()*(Math.random()<.5?-1:1),l.y=l.y+50*Math.random()*(Math.random()<.5?-1:1)),this.flyAnim(l,a,s,r)}}},flyText:function(t,i){var e=(new cc.Node).addComponent(cc.Label);e.node.addComponent(cc.LabelOutline).width=2,e.string=t,e.node.color=cc.color(255,210,35,255),e.fontSize=30,e.lineHeight=40,e.node.parent=this.effectView;var n=i.parent.convertToWorldSpaceAR(i.position);n=this.effectView.convertToNodeSpaceAR(n),e.node.position=n,e.node.runAction(cc.spawn(cc.fadeOut(.5,0).easing(cc.easeIn(2)),cc.moveBy(.5,cc.v2(0,100)))),this.scheduleOnce(function(){null!=e.node&&e.node.destroy()}.bind(this),.5)},flyAnim:function(t,i,e,n){t.active=!0,t.scale=0,this.scheduleOnce(function(){t.runAction(cc.spawn(cc.moveTo(1,cc.v2(i.x,i.y)),cc.sequence(cc.scaleTo(.5,1.1),cc.scaleTo(.5,0),cc.callFunc(function(){null!=e&&e(),this.effectList.push(t)}.bind(this),this))))}.bind(this),.05*n)},shake:function(t){t.runAction(cc.repeatForever(cc.sequence(cc.rotateTo(.1,5).easing(cc.easeIn(2)),cc.rotateTo(.2,-5).easing(cc.easeIn(2)),cc.rotateTo(.2,5).easing(cc.easeIn(2)),cc.rotateTo(.1,0).easing(cc.easeIn(2)),cc.delayTime(.5))))},scaleUpAndDowm:function(t){t.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.1).easing(cc.easeIn(2)),cc.scaleTo(.6,.9).easing(cc.easeIn(2)),cc.scaleTo(.6,1.1).easing(cc.easeIn(2)),cc.scaleTo(.6,.9).easing(cc.easeIn(2)))))},particleShow:function(t,i){if(null==this.particleList[i])0==i&&resManager.loadPrefab("Boom",function(e){this.particleList[i]=e,this.particleShow(t,i)}.bind(this));else{var e=cc.instantiate(this.particleList[i]);e.parent=this.effectView;var n=viewManager.getUIPosition(t,this.effectView);e.position=n,e.active=!0}},flyGift:function(t,i){if(null==this.giftList[t])resManager.loadPrefab("FlyGift"+t,function(e){this.giftList[t]=cc.instantiate(e),this.giftList[t].parent=this.effectView,this.flyGift(t,i)}.bind(this));else{var e=cc.instantiate(this.giftList[t]);e.parent=this.effectView,e.x=-.8*cc.winSize.width,e.y=Math.random()*cc.winSize.height*.35*(Math.random()<.5?-1:1),e.off("click"),e.on("click",function(){null!=i&&(i({parent:e.parent,position:e.position}),e.stopAllActions(),e.destroy())}.bind(this),this),e.active=!0,e.runAction(cc.sequence(cc.moveTo(10,cc.v2(.6*cc.winSize.width,e.y)),cc.callFunc(function(){e.destroy()}.bind(this),this)))}}}),cc._RF.pop()},{}],GameApplication:[function(t,i){"use strict";cc._RF.push(i,"f08152UaoRPB64U7d0m5V+q","GameApplication"),cc.Class({extends:cc.Component,properties:{viewManager:{default:null,visible:!1},resManager:{default:null,visible:!1},soundManager:{default:null,visible:!1},effectManager:{default:null,visible:!1},dataManager:{default:null,visible:!1},player:{default:null,visible:!1},_playTimes:{default:0,type:cc.Integer,visible:!1},playTimes:{get:function(){return this._playTimes},set:function(t){this._playTimes=t,SDK().plusPlayTimes()},visible:!1},unitCof:{default:null,visible:!1}},onLoad:function(){cc.debug.setDisplayStats(!1),this.unitCof=[0,"K","M","B","T"],window.gameApplication=this,this.resManager=this.node.addComponent("ResManager"),this.soundManager=this.node.addComponent("SoundManager"),this.viewManager=this.node.addComponent("ViewManager"),this.effectManager=this.node.addComponent("EffectManager"),this.dataManager=this.node.addComponent("DataManager"),cc.game.on(cc.game.EVENT_HIDE,function(){cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){cc.audioEngine.resumeAll()})},start:function(){viewManager.showView("GameView",!0,!0)},onGiftBtnClick:function(t){null!=t&&t(!0)},onVideoBtnClick:function(t){null!=t&&t(!0)},onShareBtnClick:function(t){null!=t&&t(!0),SDK().getItem("bestScore",function(t){null!=t&&null!=t||(t=0)}.bind(this))},countUnit:function(t){for(var i=0;t>=1e4;)t*=.001,i+=1;var e=t;return i>0&&(e=e.toFixed(1)),[e,i,"$"+e+gameApplication.unitCof[i],e+gameApplication.unitCof[i]]}}),cc._RF.pop()},{}],GameOver:[function(t,i){"use strict";cc._RF.push(i,"5cf8cJ0j6FEKKbuFPp7zSWQ","GameOver"),cc.Class({extends:cc.Component,properties:{curScoreText:{default:null,visible:!1},bestScoreText:{default:null,visible:!1},restartBtn:{default:null,visible:!1}},onLoad:function(){this.curScoreText=cc.find("Bg/CurText",this.node).getComponent(cc.Label),this.bestScoreText=cc.find("Bg/BestScore",this.node).getComponent(cc.Label),this.restartBtn=cc.find("Bg/Restart",this.node),this.restartBtn.on("click",function(){this.menuClick(null,"restart")}.bind(this),this)},onEnable:function(){this.bestScoreText.string=gameViewScript.bestScore,this.curScoreText.string=gameViewScript.curScore,this.scheduleOnce(function(){gameApplication.onGiftBtnClick(null,1)}.bind(this),1)},menuClick:function(t,i){soundManager.playSound("btnClick"),"restart"==i?(viewManager.popView("GameOver",!1,function(){}.bind(this)),cc.sys.localStorage.setItem("gameData","0"),gameViewScript.isGuide=!0,gameViewScript.gameStart()):"share"==i&&gameApplication.onShareBtnClick(null,2)}}),cc._RF.pop()},{}],GameView:[function(t,i){"use strict";cc._RF.push(i,"59812sXL4JJ1rH67ajcbmvt","GameView");var e,n=50,s=[3e3,4e3,5e3,6e3,7e3],o=[new cc.Color(0,160,233,255),new cc.Color(234,104,162,255),new cc.Color(255,99,51,255),new cc.Color(255,71,71,255),new cc.Color(126,107,90,255),new cc.Color(246,179,127,255),new cc.Color(0,153,68,255)];cc.Class({extends:cc.Component,properties:{cardSlotList:{default:[],visible:!1},cardDataList:{default:[],visible:!1},cardUIList:{default:[],visible:!1},cardPoolList:{default:[],visible:!1},cardPoolCards:{default:[],visible:!1},cardPrefab:{default:null,type:cc.Prefab},curScore:{default:0,visible:!1},bestScore:{default:0,visible:!1},bestScoreText:{default:null,visible:!1},curScoreText:{default:null,visible:!1},proline:{default:null,visible:!1},collisioning:{default:null,visible:!1},onDisCard:{default:!1,visible:!1},discardBtn:{default:null,visible:!1},discardCount:{default:0,visible:!1},discardCountText:{default:null,visible:!1},onCuting:{default:!1,visible:!1},cutCount:{default:0,visible:!1},cutCountText:{default:null,visible:!1},cutTip:{default:null,visible:!1},changeCount:{default:0,visible:!1},changeCountText:{default:null,visible:!1},overUI:{default:{},visible:!1},score3:{default:null,visible:!1},scoreTime:{default:0,visible:!1},isGetTime:{default:0,visible:!1},isGuide:{default:!1,visible:!1},friends:{default:[],visible:!1},overIdx:{default:-1,visible:!1},isFirstShare:{default:!1,visible:!1},adSpriteList:{default:[],type:[cc.Node]},lightList:{default:[],type:[cc.Node]},levelPro:{default:null,visible:!1},levelTextList:{default:[],visible:!1},levelNum:{default:[],visible:!1},levelColorNode:{default:[],visible:!1},isOver:{default:!1,visible:!1},clearIdx:{default:0,visible:!1},curSkinIdx:{default:0,visible:!1},skinsSprite:{default:null,visible:!1},skinsNew:{default:[],visible:!1},skinsData:{default:[],visible:!1}},proLoadSprite:function(){for(var t=2,i=0;i<11;i+=1)resManager.loadSpriteAsync("GameSp.card"+t,null),t*=2},loadCardSprite:function(t,i){var e=this.curSkinIdx;"X"!=t&&0!=t||(e="N"),resManager.loadSprite("GameSp."+e+"-card"+t,function(t){i.spriteFrame=t}.bind(this))},destroyCard:function(t,i){this.scheduleOnce(function(){var i={};i.parent=t.parent,i.position=t.position,effectManager.particleShow(i,1),t.destroy()}.bind(this),.15*(7-i))},clearData:function(){for(var t=0;t<4;t+=1){if(this.cardSlotList[t].getComponent(cc.BoxCollider).tag=2,this.cardDataList[t]=[],null!=this.cardUIList[t]&&null!=this.cardUIList[t]){if(this.cardUIList[t].length>0)for(var i=0;i<this.cardUIList[t].length;i+=1)this.destroyCard(this.cardUIList[t][i],i);this.cardUIList[t]=[]}t<2&&null!=this.cardPoolCards[t]&&(this.cardPoolCards[t].destroy(),this.cardPoolCards[t]=null)}},loadSkin:function(t){cc.sys.localStorage.setItem("skinidx",t),this.curSkinIdx=t;for(var i=0;i<4;i+=1){if(null!=this.cardUIList[i]&&null!=this.cardUIList[i]&&this.cardUIList[i].length>0)for(var e=0;e<this.cardUIList[i].length;e+=1)this.loadCardSprite(this.cardDataList[i][e],this.cardUIList[i][e].sprite);i<2&&null!=this.cardPoolCards[i]&&this.loadCardSprite(this.cardPoolCards[i].num,this.cardPoolCards[i].sprite)}},initUI:function(){this.proLoadSprite();for(var t=0;t<4;t+=1)this.cardSlotList[t]=cc.find("Gaming/CardSlot/Slot"+t,this.node),t<2&&(this.cardPoolList[t]=cc.find("Gaming/CardPool/Pool"+t,this.node));this.discardBtn=cc.find("UIView/Bottom/Discard",this.node),this.discardCountText=cc.find("UIView/Bottom/Discard/Num",this.node).getComponent(cc.Label),this.cutCountText=cc.find("UIView/Bottom/Cut/Num",this.node).getComponent(cc.Label),this.changeCountText=cc.find("UIView/Bottom/ChangeCard/Num",this.node).getComponent(cc.Label),this.cutTip=cc.find("Gaming/Middle/CutTip",this.node),this.score3=cc.find("UIView/Top/X3Show",this.node).getComponent(cc.Sprite),this.bestScoreText=cc.find("UIView/Top/BestScore/Num",this.node).getComponent(cc.Label),this.curScoreText=cc.find("UIView/Top/CurScore",this.node).getComponent(cc.Label),this.proline=cc.find("Gaming/CardPool/Proline",this.node),this.levelPro=cc.find("UIView/Top/Level/LevelPro",this.node).getComponent(cc.ProgressBar),this.levelPro.totalLength=this.levelPro.node.width,this.levelPro.progress=0,this.levelTextList[0]=cc.find("UIView/Top/Level/CurLevel/Num",this.node).getComponent(cc.Label),this.levelTextList[1]=cc.find("UIView/Top/Level/NextLevel/Num",this.node).getComponent(cc.Label),this.levelColorNode[0]=cc.find("UIView/Top/Level/CurLevel",this.node),this.levelColorNode[1]=cc.find("UIView/Top/Level/NextLevel",this.node),this.levelColorNode[2]=cc.find("UIView/Top/Level/LevelPro/bar",this.node);var i=this.cardSlotList[0].parent.getComponent(cc.Layout),e=(i.node.width-4*this.cardSlotList[0].width)/5;i.paddingLeft=e,i.paddingRight=e,i.spacingX=e,this.skinsSprite=cc.find("UIView/Top/Skins/NewSprite",this.node),this.curSkinIdx=cc.sys.localStorage.getItem("skinidx"),null==this.curSkinIdx||null==this.curSkinIdx?this.curSkinIdx="N":this.curSkinIdx=Number.parseInt(this.curSkinIdx),n=(cc.winSize.height-690)/7},initData:function(){var t=cc.sys.localStorage.getItem("gameData");if(null!=(t=JSON.parse(t))&&"0"!=t){this.cardDataList=t.cardData;for(var i=0;i<4;i+=1){this.cardUIList[i]=[];for(var c=0;c<this.cardDataList[i].length;c+=1)"X"==this.cardDataList[i][c]&&(this.cardDataList[i][c]=64),(r=this.produceCard(this.cardDataList[i][c])).mask.active=!1,r.parent=this.cardSlotList[i],r.position=cc.v2(0,0-c*n-10),this.cardUIList[i][c]=r,c==this.cardDataList[i].length-1?r.getComponent(cc.BoxCollider).tag=2:r.getComponent(cc.BoxCollider).tag=1,0==c?(this.cardSlotList[i].getComponent(cc.BoxCollider).tag=1,r.pro=this.cardSlotList[i]):r.pro=this.cardUIList[i][c-1],r.active=!0,this.ridContorlAction(r)}var a=t.pool;for(i=0;i<a.length;i+=1){var r;(r=this.produceCard(a[i])).mask.active=!1,this.cardPoolCards[i]=r,r.parent=this.cardPoolList[i],0==i?r.scale=.8:(r.scale=1,r.isReady=!0),this.bindContorlAction(r),r.position=cc.v2(0,0),r.active=!0}this.discardCount=t.discard,this.discardCountText.string=this.discardCount,this.curScore=t.curScore,this.curScoreText.string=gameApplication.countUnit(this.curScore)[3]}else{for(i=0;i<4;i+=1)this.cardDataList[i]=[],this.cardUIList[i]=[];this.poolCard(function(){this.poolCard()}.bind(this)),this.discardCount=2,this.discardCountText.string=this.discardCount,this.curScore=0,this.curScoreText.string=gameApplication.countUnit(this.curScore)[3],this.scoreTime=0,this.setItem("LevelScore",0)}this.getItem("Level",function(t){null!=t.Level?this.levelNum[0]=t.Level:this.levelNum[0]=0==t?1:t,this.getItem("LevelScore",function(t){null!=t.LevelScore?this.levelNum[1]=t.LevelScore:this.levelNum[1]=t,this.levelTextList[0].string=this.levelNum[0],this.levelTextList[1].string=this.levelNum[0]+1;var i;i=this.levelNum[0]<25?this.levelNum[0]*s[Number.parseInt(this.levelNum[0]/5)]:175e3;var n=this.levelNum[1]/i;this.levelPro.progress=n;var c=Math.floor(Math.random()*o.length),a=this.getRandom(c,1,7);e=a[0],this.levelColorNode[0].color=o[c],this.levelColorNode[2].color=o[c],this.levelColorNode[1].color=o[a[0]],this.setPros(this.levelNum[0])}.bind(this))}.bind(this))},setPros:function(t){for(var i=0;i<13;i+=1)if(null!=this.skinsData[i]){var e=!1;this.skinsData[i].pros<this.skinsData[i].need&&(e=!0),this.skinsData[i].pros=Number.parseInt(t),e&&this.skinsData[i].pros>=this.skinsData[i].need&&(this.skinsSprite.active=!0,this.lightList[2].active=!0)}dataManager.setStore("Skins",this.skinsData)},dealSkins:function(){dataManager.getStore("SkinsFirst",function(t){if(3!=t){dataManager.setStore("SkinsFirst",3),dataManager.setStore("SkinNew",[0,0,0,0,0,0,0,0,0,0,0,0,0]);var i=[{need:5,pros:0},{need:10,pros:0},{need:15,pros:0},{need:20,pros:0},{need:25,pros:0},{need:30,pros:0},{need:35,pros:0},{need:40,pros:0},{need:45,pros:0},{need:50,pros:0},{need:55,pros:0},{need:60,pros:0},{need:65,pros:0}];this.skinsData=i,dataManager.setStore("Skins",i)}else dataManager.getStore("Skins",function(t){this.skinsData=t}.bind(this)),dataManager.getStore("SkinNew",function(t){0==t&&(t=[0,0,0,0,0,0,0,0,0,0],dataManager.setStore("SkinNew",t)),this.skinsNew=t}.bind(this))}.bind(this))},initGuide:function(){this.isGuide=!0;var t=JSON.stringify({cardData:[[2],[4,2],[16,8,4,2],[8,4,2]],pool:[2,2],discard:2,curScore:0});cc.sys.localStorage.setItem("gameData",t)},onLoad:function(){window.gameViewScript=this,this.cardDataList=[],this.dealSkins(),this.initUI(),SDK().getItem("isFirst",function(t){3!=t||"3"!=t?(this.initGuide(),this.setProp(1,1),this.setProp(1,0),SDK().setItem({isFirst:3})):(SDK().getItem("cut",function(t){null!=t&&null!=t||(t=0),this.setProp(t,1)}.bind(this)),SDK().getItem("change",function(t){null!=t&&null!=t||(t=0),this.setProp(t,0)}.bind(this)),SDK().getItem("bestScore",function(t){null!=t&&null!=t||(t=0),this.bestScore=t,this.bestScoreText.string=gameApplication.countUnit(this.bestScore)[3]}.bind(this))),soundManager.loadBg(),this.gameStart()}.bind(this))},onEnable:function(){this.schedule(this.updataVal,1)},onDisable:function(){this.unschedule(this.updataVal)},updataVal:function(){this.changeCount>0?(this.changeCountText.node.active=!0,this.adSpriteList[0].active=!1):(this.changeCountText.node.active=!1,this.adSpriteList[0].active=!0),this.cutCount>0?(this.cutCountText.node.active=!0,this.adSpriteList[1].active=!1):(this.cutCountText.node.active=!1,this.adSpriteList[1].active=!0),this.discardCount>0?(this.discardCountText.node.active=!0,this.adSpriteList[2].active=!1):(this.discardCountText.node.active=!1,this.adSpriteList[2].active=!0)},start:function(){SDK().getItem("Short",function(t){100!=t&&SDK().canCreateShortcutAsync(function(t){t&&SDK().setItem({Short:100})}.bind(this))}.bind(this))},gameStart:function(){if(this.clearData(),this.initData(),this.checkOver(),this.isGuide){this.isGuide=!1;var t=cc.find("Guide",this.node),i=cc.find("Guide/Hand",this.node);t.active=!0;var e=viewManager.getUIPosition(this.cardPoolList[1],i.parent),s=viewManager.getUIPosition(this.cardSlotList[2],i.parent);s.y=s.y-4*n,i.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){i.position=e}.bind(this),this),cc.moveTo(2,s).easing(cc.easeIn(1)))))}this.isOver=!1},bindContorlAction:function(t){t.on("touchstart",function(){t.isReady&&(t.isMoving=!0)}.bind(this),this),t.on("touchmove",function(i){t.isMoving&&this.cardMoving(t,i)}.bind(this),this),t.on("touchend",function(i){t.isMoving&&(this.moveOver(t,i),t.isMoving=!1)}.bind(this),this),t.on("touchcancel",function(i){t.isMoving&&(this.moveOver(t,i),t.isMoving=!1)}.bind(this),this)},ridContorlAction:function(t){t.off("touchstart"),t.off("touchmove"),t.off("touchend"),t.off("touchcancel"),t.on("touchstart",function(){this.cutOff(t)}.bind(this),this)},produceCard:function(t){var i=cc.instantiate(this.cardPrefab);i.mask=cc.find("Mask",i);var e=i.getComponent(cc.Sprite);i.sprite=e,i.num=t;var n=cc.find("Cut",i);return n.on("touchstart",function(){this.cutOff(i)}.bind(this),this),i.cutButton=n,this.loadCardSprite(t,e),i},poolCard:function(t){var i=Math.random(),e=0;if(i<=.09?e=2:i<=.27?e=4:i<=.45?e=8:i<=.63?e=16:i<=.81?e=32:i<=.99?e=64:i<=1&&(e="X"),0!=e){var n=0;if(null!=this.cardPoolCards[0]&&null!=this.cardPoolCards[0]){var s=this.cardPoolCards[0];s.isReady=!1;var o=viewManager.getUIPosition(s,this.cardPoolList[1]);s.parent=this.cardPoolList[1],s.position=o,s.runAction(cc.sequence(cc.spawn(cc.moveTo(.3,cc.v2(0,0)),cc.scaleTo(.3,1)),cc.callFunc(function(){this.cardPoolCards[1]=s,s.isReady=!0}.bind(this),this)))}else null!=this.cardPoolCards[1]&&null==this.cardPoolCards[0]||(n=1);var c=this.produceCard(e);c.parent=this.cardPoolList[n],c.scale=.8,1==n&&(c.scale=1),c.x=-140,c.y=0,c.active=!0,c.runAction(cc.sequence(cc.scaleTo(.3,0,1),cc.callFunc(function(){c.mask.active=!1}.bind(this),this),cc.scaleTo(.3,c.scale))),c.runAction(cc.sequence(cc.moveTo(.3,cc.v2(0,0)),cc.callFunc(function(){if(this.cardPoolCards[n]=c,this.bindContorlAction(c),1==n)c.isReady=!0;else{var i={};i.cardData=this.cardDataList,i.pool=[this.cardPoolCards[0].num,this.cardPoolCards[1].num],i.discard=this.discardCount,i.curScore=this.curScore,i.scoreTime=this.scoreTime;var e=JSON.stringify(i);cc.sys.localStorage.setItem("gameData",e)}null!=t&&t(c)}.bind(this),this)))}},cardMoving:function(t,i){this.onCuting=!1,this.cutTip.active=!1,this.cutShow(!1);var e=i.touch._point,n=t.parent.convertToNodeSpaceAR(e);n.y>0&&(n.y=n.y+.5*n.y),t.position=n},moveOver:function(t){if(t.isMoving)if(null==this.collisioning||this.collisioning.merging)this.onDisCard&&this.discardCount>0?this.discardCard(t):t.position=cc.v2(0,0);else{cc.find("Guide",this.node).active=!1,soundManager.playSound("PutCard");var i=this.cardSlotList.indexOf(this.collisioning);if(i>=0)t.parent=this.collisioning,t.position=cc.v2(0,-10),t.pro=this.collisioning,this.collisioning.getComponent(cc.BoxCollider).tag=1,t.getComponent(cc.BoxCollider).tag=2,t.runAction(cc.sequence(cc.scaleTo(.1,t.scale-.1),cc.scaleTo(.1,1))),this.cardUIList[i].push(t),this.cardDataList[i].push(t.num);else{if(i=this.cardSlotList.indexOf(this.collisioning.parent),8==this.cardUIList[i].length&&this.collisioning.num!=t.num&&"X"!=t.num)return void(t.position=cc.v2(0,0));t.parent=this.collisioning.parent,t.position=cc.v2(this.collisioning.x,this.collisioning.y-n),t.pro=this.collisioning,this.collisioning.getComponent(cc.BoxCollider).tag=1,t.getComponent(cc.BoxCollider).tag=2,t.runAction(cc.sequence(cc.scaleTo(.1,t.scale-.1),cc.scaleTo(.1,1))),this.cardUIList[i].push(t),this.cardDataList[i].push(t.num),null==t.pro.num&&"X"==t.num&&(this.cardDataList[i][this.cardDataList.length-1]=64)}this.ridContorlAction(t),this.collisioning=null,this.proline.active=!1,this.mergeCard(t,0),this.poolCard()}this.scheduleOnce(function(){this.checkOver()}.bind(this),1)},mergeCard:function(t,i){if(null!=t.pro.num)if(t.num==t.pro.num||"X"==t.num)t.merging=!0,this.scheduleOnce(function(){var e=this.cardSlotList.indexOf(t.parent),n=this.cardUIList[e].indexOf(t);this.cardUIList[e].splice(n-1,2),this.cardDataList[e].splice(n-1,2),t.runAction(cc.sequence(cc.moveTo(.2,t.pro.position).easing(cc.easeBackIn()),cc.scaleTo(.1,.8),cc.callFunc(function(){soundManager.playSound("merge"+i),"X"==t.num?t.num=2*t.pro.num:t.num=2*t.num,this.loadCardSprite(t.num,t.getComponent(cc.Sprite));var n=t.pro.pro;if(this.cardSlotList.indexOf(t.pro)<0&&t.pro.destroy(),t.pro=n,2048==t.num){var s={};s.parent=this.cardSlotList[e],s.position=t.position,effectManager.particleShow(s,0),soundManager.playSound("2048Sound")}}.bind(this),this),cc.scaleTo(.1,1),cc.callFunc(function(){i>0&&this.flyCombo(t,i),i+=1,2048!=t.num?(this.cardUIList[e].splice(n-1,0,t),this.cardDataList[e].splice(n-1,0,t.num),this.cardUIList[e].indexOf(t)!=this.cardDataList[e].length-1?t.getComponent(cc.BoxCollider).tag=1:t.getComponent(cc.BoxCollider).tag=2,t.merging=!1,this.mergeCard(t,i)):(this.discardCount=this.discardCount+2,this.discardCountText.string=this.discardCount,t.pro.getComponent(cc.BoxCollider).tag=2,t.destroy());var s=t.num*i;this.setScore(s)}.bind(this),this)))}.bind(this),.2);else{var e=this.cardSlotList.indexOf(t.parent),n=this.cardUIList[e].indexOf(t);n<this.cardUIList[e].length-1&&this.mergeCard(this.cardUIList[e][n+1],i),SDK().getItem("Short",function(t){100!=t&&SDK().canCreateShortcutAsync(function(t){t&&SDK().setItem({Short:100})}.bind(this))}.bind(this))}else"X"==t.num&&(t.num=64,this.loadCardSprite(t.num,t.getComponent(cc.Sprite)))},discardCard:function(t){if(this.onDisCard||!t.isMoving){this.discardCount=this.discardCount-1,this.discardCountText.string=this.discardCount;var i=viewManager.getUIPosition(this.discardBtn,t.parent);soundManager.playSound("Discard"),t.runAction(cc.spawn(cc.sequence(cc.scaleTo(.4,0),cc.callFunc(function(){t.destroy(),this.poolCard(),this.onDisCard=!1}.bind(this),this)),cc.moveTo(.3,i)))}},cutOff:function(t){this.onCuting&&(this.cutShow(!1),this.lightList[1].active=!1,this.cutTip.active=!1,this.onCuting=!1,this.setProp(-1,1),soundManager.playSound("Discard"),t.runAction(cc.sequence(cc.scaleTo(.15,.6,1.5),cc.scaleTo(.15,1.2,.8),cc.scaleTo(.1,0),cc.callFunc(function(){var i={};i.parent=t.parent,i.position=t.position,effectManager.particleShow(i,1)}.bind(this),this))),this.scheduleOnce(function(){for(var i=this.cardSlotList.indexOf(t.parent),e=!1,s=-1,o=0;o<this.cardDataList[i].length;o+=1)e&&(this.cardUIList[i][o-1]=this.cardUIList[i][o],this.cardDataList[i][o-1]=this.cardDataList[i][o],this.cardUIList[i][o-1].runAction(cc.moveBy(.2,cc.v2(0,n)))),t==this.cardUIList[i][o]&&(e=!0,o+1<this.cardDataList[i].length&&(s=o,this.cardUIList[i][o+1].pro=t.pro));var c=this.cardUIList[i].pop();this.cardDataList[i].pop(),c==t&&(t.pro.getComponent(cc.BoxCollider).tag=2),t.destroy(),-1!=s&&this.mergeCard(this.cardUIList[i][s],0)}.bind(this),.7))},boomCard:function(){soundManager.playSound("Boom"),this.isOver=!1;for(var t=0;t<4;t+=1){var i=null,e=0;this.cardUIList[t].length>3?(i=this.cardUIList[t][this.cardUIList[t].length-4],e=this.cardUIList[t].length-3):i=this.cardSlotList[t],i.getComponent(cc.BoxCollider).tag=2;for(var n=this.cardUIList[t].length-1;n>=e;n-=1){var s=this.cardUIList[t].pop(),o={};o.parent=this.cardSlotList[t],o.position=s.position,effectManager.particleShow(o,0),s.destroy(),this.cardDataList[t].pop()}}},scoreCard:function(){soundManager.playSound("ScoreCard"),this.scoreTime<0&&(this.scoreTime=0),this.scoreTime=this.scoreTime+20,effectManager.flyReward(1,0,this.score3.node,null,function(){this.score3.node.active=!0}.bind(this))},showOver:function(){this.scheduleOnce(function(){viewManager.popView("GameOver",!0)}.bind(this),1.2)},checkOver:function(){if(!this.isOver){for(var t=0,i=0;i<4;i+=1)this.cardDataList[i].length>=8&&(t+=1),null!=this.cardPoolCards[1]&&("X"!=this.cardPoolCards[1].num&&this.cardPoolCards[1].num!=this.cardDataList[i][7]||(t-=1));t>=4&&(this.isOver=!0,soundManager.playSound("Fail"),gameViewScript.clearData(),gameViewScript.showOver())}},checkRewardCard:function(t){if(!(this.isGetTime>0)&&this.cardDataList[t].length>=8){var i=Math.random();viewManager.popView("UseCardView",!0,function(t){this.isGetTime=120;var e=cc.find("Bg/Card",t).getComponent(cc.Sprite),n=cc.find("Bg/Use",t),s=cc.find("Bg/Desc",t).getComponent("LocalizedLabel"),o=cc.find("Bg/Close",t);o.off("click"),o.on("click",function(){e.node.active=!1,s.node.active=!0,n.off("click"),viewManager.popView("UseCardView",!1)}.bind(this),this);var c=null;i>=.5?(c=function(){this.isFirstShare=!1,viewManager.popView("UseCardView",!1,function(){this.scheduleOnce(function(){gameViewScript.boomCard()}.bind(this),.5)}.bind(this))}.bind(this),s.dataID="lang.boomCardDesc",resManager.loadSprite("UIView.boomCard",function(t){e.spriteFrame=t,e.node.active=!0}.bind(this))):(c=function(){this.isFirstShare=!1,gameViewScript.scoreCard(),viewManager.popView("UseCardView",!1)}.bind(this),s.dataID="lang.X3CardDesc",resManager.loadSprite("UIView.x3Card",function(t){e.spriteFrame=t,e.node.active=!0}.bind(this))),s.node.active=!0,n.off("click"),this.isFirstShare?n.on("click",function(){c(),gameApplication.onShareBtnClick(function(){}.bind(this))}.bind(this),this):n.on("click",function(){gameApplication.onVideoBtnClick(function(t){t&&c()}.bind(this),0)}.bind(this),this)}.bind(this))}},cutShow:function(t){for(var i=0;i<4;i+=1)if(null!=this.cardUIList[i]&&null!=this.cardUIList[i]&&this.cardUIList[i].length>0)for(var e=0;e<this.cardUIList[i].length;e+=1)this.cardUIList[i][e].cutButton.active=t},CollisionEnter:function(t,i){2==t.tag&&0==i.tag&&i.node.isMoving&&!t.node.merging&&(this.collisioning=t.node,this.proline.active=!0,this.proline.position=viewManager.getUIPosition(this.collisioning,this.proline.parent)),3==t.tag&&(this.onDisCard=!0)},CollisionStay:function(t){t.node,this.collisioning},CollisionExit:function(t){t.node==this.collisioning&&(this.collisioning=null,this.proline.active=!1),3==t.tag&&(this.onDisCard=!1)},menuClick:function(t,i){if(this.isFirstShare=!1,soundManager.playSound("btnClick"),"change"==i)this.changeCount>0?(this.setProp(-1,0),this.lightList[0].active=!1,this.cardPoolCards[1].num="X",this.cardPoolCards[1].runAction(cc.sequence(cc.scaleTo(.1,0,1),cc.callFunc(function(){this.loadCardSprite("X",this.cardPoolCards[1].getComponent(cc.Sprite))}.bind(this),this),cc.scaleTo(.1,1)))):this.isFirstShare?(this.isFirstShare=!1,this.setProp(1,0),gameApplication.onShareBtnClick(function(){}.bind(this))):gameApplication.onVideoBtnClick(function(t){t&&(this.setProp(1,0),this.lightList[0].active=!0)}.bind(this),0);else if("cut"==i){if(this.onCuting)return;this.cutCount>0&&!this.onCuting?(this.onCuting=!0,this.cutTip.active=!0,this.cutShow(!0)):this.isFirstShare?(this.isFirstShare=!1,this.setProp(1,1),gameApplication.onShareBtnClick(function(){}.bind(this))):gameApplication.onVideoBtnClick(function(t){t&&(this.setProp(1,1),this.lightList[1].active=!0)}.bind(this),1)}else if("discard"==i){if(this.discardCount>0)return void this.discardCard(this.cardPoolCards[1]);this.isFirstShare?(this.isFirstShare=!1,this.discardCount=this.discardCount+1,this.discardCountText.string=this.discardCount,gameApplication.onShareBtnClick(function(){}.bind(this))):gameApplication.onVideoBtnClick(function(t){t&&(this.discardCount=this.discardCount+1,this.discardCountText.string=this.discardCount)}.bind(this),2)}else"pause"==i?viewManager.popView("PauseView",!0):"closeGuide"==i?cc.find("Guide",this.node).active=!1:"clear"==i?(this.clearIdx=this.clearIdx+1,this.clearIdx%5==0&&(SDK().setItem({isFirst:100}),cc.sys.localStorage.setItem("gameData","0"))):"Skins"==i&&(viewManager.popView("SkinView",!0),this.skinsSprite.active=!1,this.lightList[2].active=!1)},setProp:function(t,i){0==i?(this.changeCount=this.changeCount+t,this.changeCountText.string=this.changeCount,SDK().setItem({change:this.changeCount})):1==i&&(this.cutCount=this.cutCount+t,this.cutCountText.string=this.cutCount,SDK().setItem({cut:this.cutCount})),this.isFirstShare},setScore:function(t){if(this.scoreTime>0&&(t*=3),this.levelNum.length>0){this.levelNum[1]=this.levelNum[1]+t;var i;if(i=this.levelNum[0]<25?this.levelNum[0]*s[Number.parseInt(this.levelNum[0]/5)]:175e3,this.levelNum[1]>i){this.levelNum[1]=this.levelNum[1]-i,this.levelNum[0]=this.levelNum[0]+1,this.setItem("Level",this.levelNum[0]),this.levelColorNode[0].color=this.levelColorNode[1].color,this.levelColorNode[2].color=this.levelColorNode[1].color;var n=this.getRandom(e,2,7);this.levelColorNode[1].color=o[n[1]],e=n[1],this.setPros(this.levelNum[0]),viewManager.popView("PassView",!0)}this.levelTextList[0].string=this.levelNum[0],this.levelTextList[1].string=this.levelNum[0]+1,this.setItem("LevelScore",this.levelNum[1]);var c;c=this.levelNum[0]<25?this.levelNum[0]*s[Number.parseInt(this.levelNum[0]/5)]:175e3;var a=this.levelNum[1]/c;this.levelPro.progress=a}this.curScore=this.curScore+t,this.curScoreText.string=gameApplication.countUnit(this.curScore)[3],this.curScore>this.bestScore&&(this.bestScore=this.curScore,this.bestScoreText.string=gameApplication.countUnit(this.bestScore)[3],SDK().setItem({bestScore:this.curScore}))},getItem:function(t,i){dataManager.getStore(t,function(e){null!=e&&null!=e||(dataManager.setStore(t,1),e=1),null!=i&&i(e)}.bind(this))},setItem:function(t,i){dataManager.setStore(t,i)},flyCombo:function(t,i){i+=1,this.scoreTime>0&&(i*=3),effectManager.flyText("X "+i,t)},getRandom:function(t,i,e){for(var n=[],s=0;s<e;s+=1)n[s]=s;if(t<e){var o=n[t];n[t]=n[n.length-1],n[n.length-1]=o,n=n.slice(0,n.length-1)}var c=[],a=0;for(s=0;s<i;s+=1){var r=Math.floor(Math.random()*n.length);o=n[r],n[r]=n[n.length-1],n[n.length-1]=o,n=n.slice(0,n.length-1),c[a]=o,a+=1}return c},update:function(t){this.scoreTime>0?(this.scoreTime=this.scoreTime-t,this.score3.fillRange=this.scoreTime/20):this.score3.node.active=!1,this.isGetTime>0&&(this.isGetTime=this.isGetTime-t)}}),cc._RF.pop()},{}],PageViewTouch:[function(t,i){"use strict";cc._RF.push(i,"e9009lLZKRPsJY++KlOeqeY","PageViewTouch"),cc.Class({extends:cc.Component,properties:{target:{default:null,type:cc.PageView}},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.target.__proto__._onTouchBegan,this.target.__proto__,!0),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.target.__proto__._onTouchMoved,this.target.__proto__,!0),this.node.on(cc.Node.EventType.TOUCH_END,this.target.__proto__._onTouchEnded,this.target.__proto__,!0),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.target.__proto__._onTouchCancelled,this.target.__proto__,!0)}}),cc._RF.pop()},{}],PassView:[function(t,i){"use strict";cc._RF.push(i,"ad16bx+gdFCb5x1OIKVCJzB","PassView"),cc.Class({extends:cc.Component,properties:{curLvText:{default:null,visible:!1},okayBtn:{default:null,visible:!1}},onLoad:function(){this.curLvText=cc.find("Bg/Star/Sprite/Level",this.node).getComponent(cc.Label),this.okayBtn=cc.find("Bg/Okay",this.node),this.okayBtn.on("click",function(){this.menuClick(null,"Okay")}.bind(this),this)},onEnable:function(){var t={};t.parent=gameViewScript.levelPro.node.parent,t.position=gameViewScript.levelPro.node.position,effectManager.particleShow(t,2),this.curLvText.string="LV "+gameViewScript.levelNum[0]},menuClick:function(t,i){soundManager.playSound("btnClick"),"Okay"==i&&(viewManager.popView("PassView",!1),gameApplication.onGiftBtnClick(null,0),gameViewScript.levelNum[0]%5==0&&viewManager.popView("SkinView",!0))}}),cc._RF.pop()},{}],PauseView:[function(t,i){"use strict";cc._RF.push(i,"28e62XD7b5L1oVX4rMxOMJX","PauseView"),cc.Class({extends:cc.Component,onLoad:function(){window.pauseViewScript=this,this.musicSprite=cc.find("Bg/Btns/Music/Sprite",this.node).getComponent(cc.Sprite)},onEnable:function(){soundManager.isOpen?resManager.loadSprite("UIView.musicOnSprite",function(t){this.musicSprite.spriteFrame=t}.bind(this)):resManager.loadSprite("UIView.musicOffSprite",function(t){this.musicSprite.spriteFrame=t}.bind(this))},menuClick:function(t,i){soundManager.playSound("btnClick"),"description"==i?viewManager.popView("InfoView",!0):"restart"==i?(cc.sys.localStorage.setItem("gameData","0"),gameViewScript.isGuide=!0,gameViewScript.gameStart(),viewManager.popView("PauseView",!1)):"music"==i&&(soundManager.isOpen?(soundManager.setIsOpen(!1),soundManager.setBgOpen(!1),resManager.loadSprite("UIView.musicOffSprite",function(t){this.musicSprite.spriteFrame=t}.bind(this))):(soundManager.setIsOpen(!0),soundManager.setBgOpen(!0),resManager.loadSprite("UIView.musicOnSprite",function(t){this.musicSprite.spriteFrame=t}.bind(this))))}}),cc._RF.pop()},{}],ResManager:[function(t,i){"use strict";cc._RF.push(i,"0dc172Q1IlKMJpC2xp+VTAp","ResManager"),cc.Class({extends:cc.Component,properties:{actionList:{default:[],visible:!1},resSaver:{default:{},visible:!1},isFree:{default:[],visible:!1}},onLoad:function(){this.isFree=[!0,!0,!0,!0,!0],window.resManager=this},loadSprite:function(t,i){this.pushAction(1,t,i)},loadConfig:function(t,i){this.pushAction(2,t,i)},loadPrefab:function(t,i){this.pushAction(3,t,i)},loadClip:function(t,i){this.pushAction(4,t,i)},loadBone:function(t,i){this.pushAction(5,t,i)},pushAction:function(t,i,e){if(null==this.resSaver[i]){var n={};n.type=t,n.name=i,n.cb=e,this.actionList.push(n),this.isFree[t]&&this.dealAction()}else null!=e&&e(this.resSaver[i])},dealAction:function(){var t=this.actionList.shift();if(null!=t){var i=t.cb;if(t.cb=function(t){null!=i&&i(t),this.dealAction()}.bind(this),this.isFree[t.type]=!1,""==t.name||null==t.name)return console.log("action.name is empty"),void this.dealAction();switch(t.type){case 1:var e=t.name.split("."),n=e[0],s=e[1];cc.resources.load("texture2d/"+n,cc.SpriteAtlas,function(i,e){null==i?(this.resSaver[t.name]=e.getSpriteFrame(s),null!=t.cb&&t.cb(this.resSaver[t.name])):(console.warn(t.name),console.warn(i),null!=t.cb&&t.cb(null)),this.isFree[t.type]=!0}.bind(this));break;case 2:cc.resources.load("conf/"+t.name,function(i,e){e=e,null==i?(this.resSaver[t.name]=e,null!=t.cb&&t.cb(e)):(console.warn(t.name),console.warn(i),null!=t.cb&&t.cb(null)),this.isFree[t.type]=!0}.bind(this));break;case 3:cc.resources.load("prefab/"+t.name,function(i,e){null==i?(this.resSaver[t.name]=e,null!=t.cb&&t.cb(e)):(console.warn(t.name),console.warn(i),null!=t.cb&&t.cb(null)),this.isFree[t.type]=!0}.bind(this));break;case 4:cc.resources.load("sound/"+t.name,cc.AudioClip,function(i,e){null==i?(this.resSaver[t.name]=e,null!=t.cb&&t.cb(e)):(console.warn(t.name),console.warn(i),null!=t.cb&&t.cb(null)),this.isFree[t.type]=!0}.bind(this));break;case 5:cc.resources.loadDir("bone/"+t.name,function(i,e){null==i?(this.resSaver[t.name]=e,null!=t.cb&&t.cb(e)):(console.warn(t.name),console.warn(i),null!=t.cb&&t.cb(null)),this.isFree[t.type]=!0}.bind(this))}}else this.isFree=[!0,!0,!0,!0,!0]},loadSoundAsync:function(t,i){cc.resources.load("sound/"+t,cc.AudioClip,function(e,n){null==e?(this.resSaver[t]=n,null!=i&&i(n)):(console.warn(t,e),null!=i&&i(null))}.bind(this))},loadSpriteAsync:function(t,i){var e=t.split("."),n=e[0],s=e[1];cc.resources.load("texture2d/"+n,cc.SpriteAtlas,function(e,n){null==e?(this.resSaver[t]=n.getSpriteFrame(s),null!=i&&i(this.resSaver[t])):(console.warn(t,e),null!=i&&i(null))}.bind(this))}}),cc._RF.pop()},{}],SkinView:[function(t,i){"use strict";cc._RF.push(i,"89cbcXseJBL5KWysUHvV8If","SkinView"),cc.Class({extends:cc.Component,properties:{SkinsContent:{default:null,visible:!1},SkinItem:{default:null,visible:!1},unlockNum:{default:null,visible:!1},curSkinIdx:{default:0,visible:!1},skinCount:{default:0,visible:!1},skinsData:{default:[],visible:!1},skinsList:{default:[],visible:!1},select:{default:null,visible:!1},skinsNew:{default:[],visible:!1}},onLoad:function(){window.skinView=this,this.SkinsContent=cc.find("Bg/Main/Skins/view/content",this.node).getComponent(cc.Layout),this.SkinItem=cc.find("Bg/Main/Skins/view/content/SkinItem",this.node),this.SkinsContent.spacingX=.5*(this.SkinsContent.node.width-390),this.unlockNum=cc.find("Bg/Main/Unlock/Num",this.node).getComponent(cc.Label),this.skinsData=gameViewScript.skinsData,this.skinsNew=gameViewScript.skinsNew},onEnable:function(){this.skinCount=0,this.unlockNum.string=this.skinCount+"/"+this.skinsData.length,this.scheduleOnce(function(){null!=this.skinsData&&null!=this.skinsData&&this.showSkins()}.bind(this),.5)},showSkins:function(){for(var t=0;t<this.skinsData.length;t+=1)this.loadSkinItem(t)},loadSkinItem:function(t){var i=this.skinsList[t];null==i&&((i={}).main=cc.instantiate(this.SkinItem),i.pros=cc.find("Pros",i.main).getComponent(cc.Label),i.pros.string="Lv."+this.skinsData[t].need,i.skinImage=cc.find("SkinImage",i.main).getComponent(cc.Sprite),i.select=cc.find("Select",i.main),i.lockSprite=cc.find("LockSprite",i.main),i.newSprite=cc.find("NewSprite",i.main),resManager.loadSprite("GameSp."+t+"-card16",function(t){i.skinImage.spriteFrame=t}.bind(this)),i.main.parent=this.SkinsContent.node,this.skinsList[t]=i,i.main.on("click",function(){soundManager.playSound("btnClick"),(gameViewScript.levelNum[0]>=this.skinsData[t].need||openAllLevel)&&("N"!=gameViewScript.curSkinIdx&&(this.skinsList[gameViewScript.curSkinIdx].select.active=!1),this.curSkinIdx=t,i.select.active=!0,gameViewScript.loadSkin(t),this.skinsNew[t]=1,i.newSprite.active=!1,dataManager.setStore("SkinNew",this.skinsNew))}.bind(this))),i.select.active=gameViewScript.curSkinIdx==t,gameViewScript.levelNum[0]>=this.skinsData[t].need||openAllLevel?(i.lockSprite.active=!1,i.skinImage.node.active=!0,this.skinCount=1+this.skinCount,this.unlockNum.string=this.skinCount+"/"+this.skinsData.length,i.pros.node.active=!1,i.newSprite.active=0==this.skinsNew[t]):(i.lockSprite.active=!0,i.skinImage.node.active=!1,i.pros.node.active=!0,i.newSprite.active=!1),i.main.active=!0}}),cc._RF.pop()},{}],SoundManager:[function(t,i){"use strict";cc._RF.push(i,"2e203tup99JJ5nSDvFuy7AM","SoundManager");var e=["Boom","Discard","Fail","GetScore","Over","PutCard","ScoreCard","btnClick","closePop","pop"];cc.Class({extends:cc.Component,properties:{isOpen:{default:!0,visible:!1},isBgOpen:{default:!0,visible:!1},isVoiceOpen:{default:!0,visible:!1},audio:{default:null,tpye:cc.AudioClip}},onLoad:function(){window.soundManager=this},start:function(){this.preLoad()},preLoad:function(){for(var t=0;t<e.length;t+=1)resManager.loadSoundAsync(e[t],null)},loadBg:function(){resManager.loadClip("Bg",function(t){null!=t?(this.audio=t,this.bg=cc.audioEngine.play(this.audio,!0,.2)):console.log(soundtype+" soundClip not exist!")}.bind(this))},playSound:function(t){this.isOpen&&(null!=resManager?resManager.loadSoundAsync(t,function(i){null!=i?cc.audioEngine.play(i,!1,1):console.log(t+" soundClip not exist!")}.bind(this)):console.log("resManeger not exist!(\u8d44\u6e90\u7ba1\u7406\u5668\u4e0d\u5b58\u5728\uff01)"))},playBg:function(){this.isBgOpen?this.bg=cc.audioEngine.play(this.audio,!1,1):cc.audioEngine.stop(this.bg)},setBgOpen:function(t){if(this.isBgOpen=t,this.isBgOpen)try{null!=str&&HiboGameJs.mute(0)}catch(i){}else try{null!=str&&HiboGameJs.mute(1)}catch(i){}this.playBg()},setIsOpen:function(t){if(this.isOpen=t,this.isOpen)try{null!=str&&HiboGameJs.mute(0)}catch(i){}else try{null!=str&&HiboGameJs.mute(1)}catch(i){}},setVoiceIsOpen:function(t){if(this.isVoiceOpen=t,t)try{null!=str&&HiboGameJs.enableMic(0)}catch(i){}else try{null!=str&&HiboGameJs.enableMic(1)}catch(i){}}}),cc._RF.pop()},{}],SpriteAnimation:[function(t,i){"use strict";cc._RF.push(i,"2d7c3U6Dp1OyJSvStQhSQ7o","SpriteAnimation"),cc.Class({extends:cc.Component,properties:{isPlay:!1,loop:!0,sprite:{default:null,type:cc.Sprite},shadow:{default:null,type:cc.Sprite},itemId:{default:null,visible:!1},animCount:{default:0,type:cc.Integer,visible:!1},sprites:{default:[],type:[cc.SpriteFrame],visible:!1},spritesArray:{default:[],visible:!1},fps:{default:5,type:cc.Integer,visible:!1},delta:{default:0,type:cc.Integer,visible:!1},index:{default:0,type:cc.Integer,visible:!1},wait:{default:0,type:cc.Integer,visible:!1},waitDelta:{default:0,type:cc.Integer,visible:!1},gameAtlas:{default:null,type:cc.SpriteAtlas},isInited:{default:!1,visible:!1},isRotat:{default:!0,visible:!1},oPoint:{default:cc.v2(0,0),visible:!1},callback:{default:null,visible:!1}},playSprites:function(t,i,e,n,s,o,c,a,r){if(this.animCount=8,this.fps=s,this.wait=0,this.waitDelta=0,this.scale=null==a?1:a,null==e&&(e=0),this.isReset=o,this.loop=null==c||c,this.isRotat=!1,this.isInited&&this.itemId==t&&null!=this.spritesArray[t][n])this.sprites=this.spritesArray[t][n],this.play(r);else{this.itemId=t,this.spritesArray[t]=[],this.spritesArray[t][n]=[],this.sprites=this.spritesArray[t][n];for(var l=e;l<e+i;l+=1){var u=this.gameAtlas.getSpriteFrame(this.itemId+l);this.spritesArray[t][n].push(u)}this.isInited=!0,null!=this.sprites.length&&this.sprites.length>0&&this.play(r)}},playSpriteByIdx:function(t,i){this.sprite.spriteFrame=this.gameAtlas.getSpriteFrame(t+i),this.isPlay=!1},playSpriteByName:function(t,i){this.sprite.spriteFrame=this.gameAtlas.getSpriteFrame(t+i),this.isPlay=!1},play:function(t){this.index=0,this.isPlay=!0,this.node.scale=this.scale,this.node.opacity=255,null!=this.shadow&&(this.shadow.node.active=!0),null!=t&&(this.callback=t)},reSet:function(){this.index=0,null!=this.sprite&&(this.sprite.spriteFrame=this.sprites[this.index]),this.isPlay=!1,this.node.opacity=255,this.node.setRotation(0),null!=this.shadow&&(this.shadow.node.active=!1,this.shadow.node.setRotation(0)),null!=this.callback&&this.callback()},update:function(t){if(null!=this.shadow){var i=this.shadow.node.position,e=cc.v2(this.node.position.x+10,this.node.position.y-10);i!=e&&(this.shadow.node.position=e)}if(this.wait>0&&this.waitDelta<this.wait)this.waitDelta+=t;else if(this.isPlay&&this.fps>0&&this.sprites.length>0){this.delta+=t;var n=1/this.fps;n<this.delta&&(this.delta=n>0?this.delta-n:0,this.sprite.spriteFrame=this.sprites[this.index],null!=this.shadow&&(this.shadow.spriteFrame=this.sprites[this.index]),this.index+1==this.sprites.length&&(this.waitDelta=0,this.loop||(this.isPlay=!1),this.isReset&&this.reSet()),this.index=this.index+1>=this.sprites.length?0:this.index+1)}}}),cc._RF.pop()},{}],ViewManager:[function(t,i){"use strict";cc._RF.push(i,"bdc085+axJNRJ+ly2Kx9a/o","ViewManager"),cc.Class({extends:cc.Component,properties:{idxList:{default:{},visible:!1},viewList:{default:[],type:[cc.Node],visible:!1},popSaver:{default:{},visible:!1},curPopList:{default:[],type:[cc.Node],visible:!1},curDir:{default:0,visible:!1}},judgeDir:function(t){Math.random(),this.curDir=null!=t?t?2:4:1},showView:function(t,i,e,n,s,o){void 0===n&&(n=null),void 0===s&&(s=null),void 0===o&&(o=0),null==n?this.judgeDir(e):this.curDir=n;var c=this.idxList[t];if(null==c){var a=cc.find("Canvas");if(null==(r=cc.find(t,a)))return void resManager.loadPrefab(t,function(c){null!=(r=cc.instantiate(c))&&(r.parent=a,this.showView(t,i,e,n,s,o))}.bind(this));if(r.width=cc.winSize.width,r.height=cc.winSize.height,null==r)return;c=this.viewList.length,this.idxList[t]=c,this.viewList[c]=r,r.width=cc.winSize.width,r.height=cc.winSize.height}for(var r=this.viewList[c],l=0;l<this.viewList.length;l+=1)r!=this.viewList[l]&&this.viewList[l].active&&i&&(this.viewList[l].stopAllActions(),this.showAnim(this.viewList[l],!1,0,null));return this.showAnim(r,i,o,s),r},showAnim:function(t,i,e,n){(i&&0==t.active||!i&&1==t.active)&&(t.stopAllActions(),i&&t.setSiblingIndex(t.parent.childrenCount),this.showType(2,t,i,e,n))},showType:function(t,i,e,n,s){var o=null;switch(t){case 0:e?(i.opacity=0,i.active=!0,o=cc.sequence(cc.fadeIn(.5).easing(cc.easeSineIn(2)),cc.delayTime(n),cc.callFunc(function(){null!=s&&s(i),this.noBtnMask(!1,i)}.bind(this),this))):(this.noBtnMask(!0,i),o=cc.sequence(cc.fadeOut(.5).easing(cc.easeSineIn(2)),cc.callFunc(function(){i.active=!1,null!=s&&s(i)}.bind(this))));break;case 1:e?(i.scale=0,i.active=!0,o=cc.sequence(cc.scaleTo(.5,1).easing(cc.easeBounceOut(2)),cc.delayTime(n),cc.callFunc(function(){null!=s&&s(),this.noBtnMask(!1,i)}.bind(this),this))):(this.noBtnMask(!0,i),o=cc.sequence(cc.scaleTo(.5,0).easing(cc.easeSineIn(2)),cc.callFunc(function(){i.active=!1,null!=s&&s()}.bind(this))));break;case 2:var c;1==this.curDir?c=cc.v2(cc.winSize.width,0):2==this.curDir?c=cc.v2(0,cc.winSize.height):3==this.curDir?c=cc.v2(-cc.winSize.width,0):4==this.curDir&&(c=cc.v2(0,-cc.winSize.height)),e?(i.active=!0,i.setPosition(c.x,c.y),o=cc.sequence(cc.moveTo(.5,cc.v2(0,0)).easing(cc.easeSineIn(2)),cc.delayTime(n),cc.callFunc(function(){null!=s&&s(),this.noBtnMask(!1,i)}.bind(this),this))):(this.noBtnMask(!0,i),o=cc.sequence(cc.moveTo(.5,cc.v2(-c.x,-c.y)).easing(cc.easeSineIn(2)),cc.callFunc(function(){i.active=!1,null!=s&&s()}.bind(this))))}null!=o&&(i.stopAllActions(),this.scheduleOnce(function(){i.runAction(o)}.bind(this),.1))},initPopView:function(){resManager.loadConfig("ResourceList",function(t){var i=t.popViewList;this.closeCount=0,this.loadAction(i,i.length,0)}.bind(this))},loadAction:function(t,i,e){this.popView(t[e],!0,function(){var n=e;(e+=1)<i&&this.loadAction(t,i,e),this.popAnim(this.popSaver[t[n]],!1,function(){this.closeCount=this.closeCount+1,this.node.emit("loadPop",{pro:this.closeCount/i})}.bind(this),!0)}.bind(this))},closePop:function(t){this.popView(t,!1,null)},popView:function(t,i,e){var n=this.popSaver[t];if(1!=n)if(null==n){var s=cc.find("Canvas"),o=cc.find(t,s);null==o?(this.popSaver[t]=1,resManager.loadPrefab(t,function(t){(n=cc.instantiate(t)).width=cc.winSize.width,n.height=cc.winSize.height,this.savePop(n,i,e)}.bind(this))):this.savePop(o,i,e)}else this.popAnim(n,i,e)},savePop:function(t,i,e){if(null!=t){var n=cc.find("Bg/Close",t);n.off("click"),n.on("click",function(){this.closePop(t.name),soundManager.playSound("btnClick")},this);var s=cc.find("Canvas");t.parent=s,this.popSaver[t.name]=t,this.popAnim(t,i,e,!0)}},popAnim:function(t,i,e){var n=cc.find("Bg",t),s=n.getComponent(cc.Widget);if(null!=s&&s.updateAlignment(),i){n.scale=0,t.x=0,t.active=!0,soundManager.playSound("pop"),t.setSiblingIndex(t.parent.childrenCount),n.runAction(cc.sequence(cc.scaleTo(.5,1).easing(cc.easeElasticOut(3)),cc.callFunc(function(){null!=e&&e(t)}.bind(this),this)));var o=this.curPopList.pop();if(null!=o&&null!=o){var c=this.popSaver[o];o!=t.name&&(c.active=!1,this.curPopList.push(o))}this.curPopList.push(t.name)}else{soundManager.playSound("closePop"),n.runAction(cc.sequence(cc.scaleTo(.3,0).easing(cc.easeBackIn(3)),cc.callFunc(function(){t.active=!1,null!=e&&e(t)}.bind(this),this)));var a=this.curPopList.findIndex(function(i){return i==t.name});a>=0&&this.curPopList.splice(a,1);var r=this.curPopList.pop();if(null!=r&&null!=r){var l=this.popSaver[r];r!=t.name&&(l.active=!0,this.curPopList.push(r))}}},noBtnMask:function(t,i){var e=cc.find("noBtn",i);null==e&&((e=new cc.Node("noBtn")).addComponent(cc.BlockInputEvents),e.width=cc.winSize.width,e.height=cc.winSize.height),e.active=t},closePopView:function(t,i){this.popView(t,!1,i)},removeView:function(t){var i=this.viewList[this.idxList[t]];this.idxList[t]=null;for(var e=0;e<this.viewList.length;e+=1)i==this.viewList[e]&&(this.viewList[e]=null)},getUIPosition:function(t,i){var e=t.parent.convertToWorldSpaceAR(t.position);return i.convertToNodeSpaceAR(e)},lerpAction:function(t,i,e,n,s){null==this.agent&&(this.agent={}),null==this.agent[s]&&(this.agent[s]=new cc.Node("agent"),this.agent[s].x=0),this.agent[s].stopAllActions();var o=this.agent[s];null!=t&&(o.x=t);var c=e/.02,a=i/c;o.runAction(cc.repeat(cc.sequence(cc.callFunc(function(){n(o)}.bind(this),this),cc.moveBy(.02,cc.v2(a,0))),c+1))},stopLerpAction:function(t){null!=this.agent[t]&&this.agent[t].stopAllActions()},stopAllLerpActions:function(){for(var t in this.agent)null!=this.agent[t]&&this.agent[t].stopAllActions()},onLoad:function(){window.viewManager=this}}),cc._RF.pop()},{}],facebook:[function(t,i){"use strict";cc._RF.push(i,"6542a5UC9RCqLxrtQE6lpYc","facebook");var e,n=[],s=[],o={},c=function(){this.cb=null,this.videoAd=[],this.videoAdState=[],this.InterstitialAd=[],this.InterstitialAdState=[],this.playTimes=0,this.MyPlayer={},this.sdk_ad=null};c.prototype.init=function(t){if("undefined"!=typeof FBInstant){this.playTimes=0;for(var i=0;i<n.length;i+=1)this.loadVideoAd(i);for(i=0;i<s.length;i+=1)this.loadInterstitialAd(i);o.name=FBInstant.player.getName(),cc.loader.load(FBInstant.player.getPhoto(),function(t,i){o.head=new cc.SpriteFrame(i)}),o.id=FBInstant.player.getID(),this.MyPlayer=o,this.getLocale(),FBInstant.player.canSubscribeBotAsync().then(function(t){return console.log(t)}),null!=t&&t()}else null!=t&&t()},c.prototype.sePros=function(t){"undefined"!=typeof FBInstant&&FBInstant.setLoadingProgress(t)},c.prototype.fbEvent=function(t,i){"undefined"!=typeof FBInstant&&FBInstant.logEvent(t,i)},c.prototype.getItem=function(t,i,e){var n;"undefined"==typeof FBInstant?(void 0!==(n=null!=e?cc.sys.localStorage.getItem(t):JSON.parse(cc.sys.localStorage.getItem(t)))&&null!=n&&"null"!=n||(n="guideStep"==t?-1:0),i(n,t)):FBInstant.player.getDataAsync([""+t]).then(function(e){n=void 0===e[t]?"guideStep"==t?-1:0:e[t],i(n,t)})},c.prototype.setItem=function(t,i){if("undefined"==typeof FBInstant){for(var e in t)cc.sys.localStorage.setItem(e,t[e]);null!=i&&i()}else FBInstant.player.setDataAsync(t).then(function(){null!=i&&i()})},c.prototype.getLocale=function(){if("undefined"!=typeof FBInstant)return FBInstant.getLocale()},c.prototype.getGameId=function(){return""},c.prototype.getName=function(){return"undefined"==typeof FBInstant?"undefined":FBInstant.player.getName()},c.prototype.canCreateShortcutAsync=function(t){"undefined"!=typeof FBInstant&&FBInstant.canCreateShortcutAsync().then(function(i){i?FBInstant.createShortcutAsync().then(function(){null!=t&&t(!0)}).catch(function(){null!=t&&t(!1)}):null!=t&&t(!1)})},c.prototype.switchGameAsync=function(t){if("undefined"==typeof FBInstant)return!1;FBInstant.switchGameAsync(t).catch(function(){})},c.prototype.getCatalogAsync=function(t){"undefined"!=typeof FBInstant?FBInstant.payments.getCatalogAsync().then(function(i){console.log(i),t(i)}).catch(function(i){console.log(i),t([])}):null!=t&&t([])},c.prototype.purchaseAsync=function(t,i,e){t=""+t,"undefined"!=typeof FBInstant?FBInstant.payments.purchaseAsync({productID:t,developerPayload:t}).then(function(t){e(t)}).catch(function(t){console.log(t),e(!1,null)}):null!=e&&e(!0,{})},c.prototype.getPurchasesAsync=function(t){"undefined"!=typeof FBInstant?FBInstant.payments.getPurchasesAsync().then(function(i){t(i)}).catch(function(){t([])}):null!=t&&t(!1,null)},c.prototype.consumePurchaseAsync=function(t,i){"undefined"!=typeof FBInstant?FBInstant.payments.consumePurchaseAsync(t).then(function(){i(!0)}).catch(function(){i(!1)}):null!=i&&i(!0,{})},c.prototype.playWith=function(t,i,e){if("undefined"!=typeof FBInstant){var n=this;FBInstant.context.createAsync(t).then(function(){n.doShare(i,5),e(null!=e)}).catch(e(!1))}else null!=e&&e(!0)},c.prototype.share=function(t,i,e){if("undefined"!=typeof FBInstant){var n=this;FBInstant.context.chooseAsync().then(function(){n.doShare(t,e),null!=i&&i(!0)}).catch(function(t){null!=t.code&&"SAME_CONTEXT"==t.code&&null!=i&&i(!1)})}else null!=i&&i(!0)},c.prototype.doShare=function(t,i){var e=this.getName()+"Let's play together?";0==i?e="I already surpassed you!":1==i?e="I'm one step away from success. I need your help!":2==i?e=FBInstant.player.getName()+" doesn't think you can win at 2048 Solitaire Can you prove them wrong?":3==i?e="The most enjoyable 2048 game ever. Come play with me now!":4==i?e=FBInstant.player.getName()+" just overtook you! Do you think you can beat him? Challenge him now!":5==i&&(e="Dare to accept my challenge?");var n="texture2d/share"+Math.floor(2.99*Math.random());cc.resources.load(n,cc.Texture2D,function(t,i){var n=document.createElement("canvas"),s=n.getContext("2d");n.width=600,n.height=420;var o=i.getHtmlElementObj();s.drawImage(o,0,0);var c=n.toDataURL("image/png");FBInstant.updateAsync({action:"CUSTOM",cta:"Play",image:c,text:{default:e,localizations:{}},template:"play_turn",data:{myReplayData:"..."},strategy:"IMMEDIATE",notification:"NO_PUSH"}).then(function(){})}.bind(this))},c.prototype.shareBestScore3Times=function(t){SDK().getItem("share_times",function(i){var e=Math.floor(Date.now()/1e3);if(null==i||i<=0||i-e<0){var n={};n.share_times=e+180,SDK().setItem(n,function(){SDK().shareBestScore(t)})}})},c.prototype.shareBestScore=function(t,i){null!=t&&""!=t||(t="all"),this.getItem(t,function(t){SDK().share(t,function(t){i&&i(t)})}.bind(this))},c.prototype.plusPlayTimes=function(){this.playTimes++,this.showInterstitialAd(function(){console.log("\u64ad\u653eDone")},0)},c.prototype.openVideoAd=function(){return!0},c.prototype.openinterstitialAd=function(){return!0},c.prototype.getInterstitialCount=function(){return 2},c.prototype.isPlayOpAD=function(){return 10*Math.random()<=0},c.prototype.loadInterstitialAd=function(t){"undefined"!=typeof FBInstant&&this.openinterstitialAd()&&FBInstant.getInterstitialAdAsync(s[t]).then(function(i){return this.InterstitialAd[t]=i,this.InterstitialAdState[t]="AD_LOADING",this.InterstitialAd[t].loadAsync()}.bind(this)).catch(function(){}.bind(this)).then(function(){this.InterstitialAdState[t]="AD_LOAD_SUCCESS"}.bind(this))},c.prototype.showInterstitialAd=function(t,i){if(null!=this.InterstitialAd[i]){if("undefined"==typeof FBInstant)return void(t&&t(!1));this.InterstitialAd[i].showAsync().then(function(){this.InterstitialAdState[i]="AD_COMPLETE",t&&t(!0),this.loadInterstitialAd(i)}.bind(this)).catch(function(){this.InterstitialAdState[i]="AD_COMPLETE",t&&t(!1)}.bind(this))}else t&&t(!1),this.loadInterstitialAd(i)},c.prototype.loadVideoAd=function(t){"undefined"!=typeof FBInstant&&FBInstant.getRewardedVideoAsync(n[t]).then(function(i){return this.videoAd[t]=i,this.videoAdState[t]="AD_LOADING",this.videoAd[t].loadAsync()}.bind(this)).then(function(){this.videoAdState[t]="AD_LOAD_SUCCESS"}.bind(this)).catch(function(){this.videoAdState[t]="AD_LOADING"}.bind(this))},c.prototype.hasVideoAd=function(){return"undefined"!=typeof FBInstant&&this.videoAd.length>0},c.prototype.showVideoAd=function(t,i){"undefined"!=typeof FBInstant?null!=this.videoAd[i]?(console.log("show video ad start"),this.videoAd[i].showAsync().then(function(){this.videoAdState[i]="AD_COMPLETE",t&&t(!0),this.loadVideoAd(i)}.bind(this)).catch(function(){this.videoAdState[i]="AD_COMPLETE",t&&t(!1),this.loadVideoAd(i)}.bind(this))):(console.log("show video ad Stop"),t&&t(!1),this.loadVideoAd(i)):t&&t(!0)},c.prototype.getSelfInfo=function(){return"undefined"==typeof FBInstant?(Math.random(),{id:1}):o},c.prototype.setRankScore=function(t,i,e,n){if("undefined"==typeof FBInstant)console.log("set rank fail");else{var s,o=FBInstant.context.getID();if(null!=o&&(o="."+o),1==t){if(s="Friends",null==o)return void(o="")}else{if(2!=t)return null!=n&&n("wrong type"),void console.log("wrong type");s="world",o=""}FBInstant.getLeaderboardAsync(s+o).then(function(t){return t.setScoreAsync(i,e)}).then(function(){return console.log("Score saved")}).catch(function(t){return console.error(t)})}},c.prototype.getRankScore=function(t,i){if("undefined"==typeof FBInstant)console.log("get self rank fail");else{var e,n=FBInstant.context.getID();if(null!=n&&(n="."+n),1==t){if(e="Friends",null==n)return void(n="")}else{if(2!=t)return null!=i&&i("wrong type"),void console.log("wrong type");e="world",n=""}FBInstant.getLeaderboardAsync(e+n).then(function(t){return t.getPlayerEntryAsync()}).then(function(t){var e;null!=t&&((e={}).id=t.getPlayer().getID(),e.no=t.getRank(),e.name=t.getPlayer().getName(),e.score=t.getScore(),e.headUrl=t.getPlayer().getPhoto()),i(e)}).catch(function(t){return console.error(t)})}},c.prototype.getPercent=function(t){"undefined"==typeof FBInstant?(console.log("get rank fail"),null!=t&&t()):FBInstant.getLeaderboardAsync("World").then(function(t){return t.getEntryCountAsync()}).then(function(i){null!=t&&t(i)})},c.prototype.getWorldRank=function(t,i,e,n){if("undefined"==typeof FBInstant)console.log("get rank fail");else{var s,o=FBInstant.context.getID();if(null!=o&&(o="."+o),1==t){if(s="Friends",null==o)return o="",void(null!=n&&n([]))}else{if(2!=t)return null!=n&&n("wrong type"),void console.log("wrong type");s="world",o=""}var c=[];FBInstant.getLeaderboardAsync(s+o).then(function(t){return t.getEntriesAsync(i,e)}).then(function(t){for(var i=0;i<t.length;i++)c[i]={},c[i].id=t[i].getPlayer().getID(),c[i].no=t[i].getRank(),c[i].name=t[i].getPlayer().getName(),c[i].score=t[i].getScore(),c[i].headUrl=t[i].getPlayer().getPhoto(),c[i].ext=t[i].getExtraData();null!=n&&n(c)}).catch(function(t){return console.error(t)})}},c.prototype.getFriendRank=function(t,i){if("undefined"==typeof FBInstant)console.log("getFriendsInfo fail"),null!=i&&i({});else{var e,n=FBInstant.context.getID();if(null!=n&&(n="."+n),1==t){if(e="Friends",null==n)return console.log(FBInstant.context.getType()),n="",void(null!=i&&i([]))}else{if(2!=t)return null!=i&&i("wrong type"),void console.log("wrong type");e="world",n=""}var s=[];FBInstant.getLeaderboardAsync(e+n).then(function(t){return t.getConnectedPlayerEntriesAsync()}).then(function(t){for(var e=0;e<t.length;e+=1)s[e]={},s[e].id=t[e].getPlayer().getID(),s[e].name=t[e].getPlayer().getName(),s[e].headUrl=t[e].getPlayer().getPhoto(),s[e].no=t[e].getRank(),s[e].score=t[e].getScore(),s[e].ext=t[e].getExtraData();null!=i&&i(s)})}},c.prototype.postRankToMessage=function(t,i){if("undefined"==typeof FBInstant)console.log("post rank fail");else{var e,n=FBInstant.context.getID();if(null!=n&&(n="."+n),1==t){if(e="Friends",null==n)return void(n="")}else{if(2!=t)return null!=i&&i("wrong type"),void console.log("wrong type");e="world",n=""}FBInstant.updateAsync({action:"LEADERBOARD",name:e+n}).then(function(){return console.log("Update Posted")}).catch(function(t){return console.error(t)})}},c.prototype.getTime=function(t){FBInstant.getLeaderboardAsync("time").then(function(i){return i.setScoreAsync(9001).then(function(i){console.log(i.getTimestamp()),null!=t&&t(i.getTimestamp())})})},i.exports=function(){return e||(e=new c),e},cc._RF.pop()},{}],globals:[function(t,i){"use strict";cc._RF.push(i,"f774aa2KJxEp68y3WRvT7GZ","globals"),window.SDK=t("../SDK/facebook"),window.openAllLevel=!1,cc._RF.pop()},{"../SDK/facebook":"facebook"}],"use_v2.0.x_cc.Toggle_event":[function(t,i){"use strict";cc._RF.push(i,"60bcfA6BkhM8ID0JyDlHe+c","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["globals","DataManager","GameApplication","PageViewTouch","ResManager","SoundManager","facebook","Cards","EffectManager","SpriteAnimation","ViewManager","GameOver","GameView","PassView","PauseView","SkinView","use_v2.0.x_cc.Toggle_event"]);