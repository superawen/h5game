window.__require=function t(e,o,i){function r(s,c){if(!o[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!c&&l)return l(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var h=o[s]={exports:{}};e[s][0].call(h.exports,function(t){return r(e[s][1][t]||t)},h,h.exports,t,e,o,i)}return o[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<i.length;s++)r(i[s]);return r}({circleDouble:[function(t,e){"use strict";function o(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(o)return(o=o.call(t)).next.bind(o);if(Array.isArray(t)||(o=i(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"==typeof t)return r(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,i=new Array(e);o<e;o++)i[o]=t[o];return i}cc._RF.push(e,"0ff0aKPMAJOcobSa5/wMMfS","circleDouble"),cc.Class({extends:cc.Component,properties:{starNode:{default:null,type:cc.Node}},setColors:function(t,e,i){for(i>e.length&&(i=e.length),this.optionalColors=[],this.optionalColors[0]=t;this.optionalColors.length<i;){var r=e[parseInt(Math.random()*i)];this.optionalColors.includes(r)||(this.optionalColors[this.optionalColors.length]=r)}for(var n,s=o(this.node.children);!(n=s()).done;){var c;(c=n.value)!=this.starNode&&((c=c.getComponent("circle")).setColors(t,this.optionalColors,i),c.hideStar())}}}),cc._RF.pop()},{}],circle:[function(t,e){"use strict";cc._RF.push(e,"bc2d5v7+iVGHL6aJ4+fFqzJ","circle"),cc.Class({extends:cc.Component,properties:{starNode:{default:null,type:cc.Node},duration:0,reverse:!1},onLoad:function(){var t=this.reverse?-360:360;this.node.runAction(cc.repeatForever(cc.rotateBy(this.duration,t))),this.starNode.runAction(cc.repeatForever(cc.rotateBy(this.duration,-t)))},setColors:function(t,e,o){if(o>e.length&&(o=e.length),e.length==o&&e.includes(t))this.optionalColors=e;else for(this.optionalColors=[],this.optionalColors[0]=t;this.optionalColors.length<o;){var i=e[parseInt(Math.random()*o)];this.optionalColors.includes(i)||(this.optionalColors[this.optionalColors.length]=i)}for(var r in this.node.children)this.node.children[r]!=this.starNode&&(this.node.children[r].color=this.optionalColors[r%this.optionalColors.length])},hideStar:function(){this.starNode.active=!1}}),cc._RF.pop()},{}],cross:[function(t,e){"use strict";cc._RF.push(e,"e8f5cTJKUBNEK5q+aj45TuO","cross"),cc.Class({extends:cc.Component,properties:{duration:0,crossNode:{default:null,type:cc.Node}},onLoad:function(){this.crossNode.runAction(cc.repeatForever(cc.rotateBy(this.duration,360)))},setColors:function(t,e,o){for(o>e.length&&(o=e.length),this.optionalColors=[],this.optionalColors[0]=t;this.optionalColors.length<o;){var i=e[parseInt(Math.random()*o)];this.optionalColors.includes(i)||(this.optionalColors[this.optionalColors.length]=i)}for(var r in this.crossNode.children)this.crossNode.children[r].color=this.optionalColors[r%this.optionalColors.length]}}),cc._RF.pop()},{}],gameOver:[function(t,e){"use strict";cc._RF.push(e,"30572cjelJPB5qEQ+HumiPY","gameOver"),cc.Class({extends:cc.Component,properties:{currentScoreNode:{default:null,type:cc.Node},historyNode:{default:null,type:cc.Node},firstScoreNode:{default:null,type:cc.Node},secondScoreNode:{default:null,type:cc.Node},thirdScoreNode:{default:null,type:cc.Node}},onLoad:function(){var t=this.node.getComponent("gameResult");this.currentScoreNode.getComponent(cc.Label).string=t.getLastScore(),this.historyNode.active=!0;var e=t.getHistoryScores();this.firstScoreNode.getComponent(cc.Label).string=e[0],this.secondScoreNode.getComponent(cc.Label).string=e[1],this.thirdScoreNode.getComponent(cc.Label).string=e[2]},playAgain:function(){cc.director.loadScene("Game")}}),cc._RF.pop()},{}],gameResult:[function(t,e){"use strict";cc._RF.push(e,"d50a8spJZZLtbk78WqITNcg","gameResult"),cc.Class({extends:cc.Component,properties:{lastScoreKey:{default:"lastScore",visible:!1},historyScoresKey:{default:"historyScores",visible:!1}},setNewScore:function(t){cc.sys.localStorage.setItem(this.lastScoreKey,t);var e=this.getHistoryScores();e||(e=[0,0,0]),e.push(t);for(var o=e.length-1;o>0&&e[o]>e[o-1];o--){var i=e[o];e[o]=e[o-1],e[o-1]=i}e.pop(),cc.sys.localStorage.setItem(this.historyScoresKey,JSON.stringify(e))},getLastScore:function(){return cc.sys.localStorage.getItem(this.lastScoreKey)},getHistoryScores:function(){var t=cc.sys.localStorage.getItem(this.historyScoresKey);return t?JSON.parse(t):t}}),cc._RF.pop()},{}],game:[function(t,e){"use strict";cc._RF.push(e,"61219/eGQFGG6GNY+cG5sr4","game"),cc.Class({extends:cc.Component,properties:{colors:{default:[],type:[cc.Color]},operateTipNode:{default:null,type:cc.Node},player:{default:null,type:t("player")},obstacleSet:{default:null,type:t("obstacleSet")},giftCollector:{default:null,type:t("giftCollector")}},onLoad:function(){cc.debug.setDisplayStats(!1),cc.director.getCollisionManager().enabled=!0,this.player.game=this,this.player.setJumpTopListener(function(t,e){this.obstacleSet.moveDown(t,e)}.bind(this)),this.obstacleSet.setColors(this.colors),this.node.once(cc.Node.EventType.TOUCH_START,this.hideOperateTip,this),this.node.on(cc.Node.EventType.TOUCH_START,this.player.jump,this.player),cc.sys.platform===cc.sys.WECHAT_GAME&&(wx.cloud.init(),this._getUserInfo())},_getUserInfo:function(){wx.cloud.callFunction({name:"getUserInfo",data:{},success:function(t){window.userInfo=t.result,wx.getOpenDataContext().postMessage({type:"userInfo",userInfo:window.userInfo})},fail:function(t){cc.error(t)}})},hideOperateTip:function(){this.operateTipNode.active=!1,this.operateTipNode.parent.removeChild(this.operateTipNode),delete this.operateTipNode},gameOver:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.player.jump,this.player),this.node.getComponent("gameResult").setNewScore(this.giftCollector.getScore()),cc.director.loadScene("GameOver")},captureStar:function(t){this.giftCollector.captureStar(t)}}),cc._RF.pop()},{giftCollector:"giftCollector",obstacleSet:"obstacleSet",player:"player"}],giftCollector:[function(t,e){"use strict";cc._RF.push(e,"f4e4cR+yhlN/rkSav8Ddl11","giftCollector"),cc.Class({extends:cc.Component,properties:{starScoreNode:{default:null,type:cc.Node}},onLoad:function(){this.starCount=0,this.score=0},captureStar:function(t){this.starCount+=1,this.score+=t,this.starScoreNode.getComponent(cc.Label).string=this.score.toString()},getScore:function(){return this.score}}),cc._RF.pop()},{}],lineSeries:[function(t,e){"use strict";function o(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(o)return(o=o.call(t)).next.bind(o);if(Array.isArray(t)||(o=i(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"==typeof t)return r(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,i=new Array(e);o<e;o++)i[o]=t[o];return i}cc._RF.push(e,"f8170o+K8dDpLMm2hNVluRx","lineSeries"),cc.Class({extends:cc.Component,properties:{linePrefab:{default:null,type:cc.Prefab},starNode:{default:null,type:cc.Node},lineMargin:0,speed:0},onLoad:function(){this.canvasWidth=cc.find("Canvas").width,this.left=-this.canvasWidth/2,this.starNode.zIndex=9,this.lines=[];for(var t=cc.instantiate(this.linePrefab),e=0;e<this.canvasWidth/t.width+2;e++)t=cc.instantiate(this.linePrefab),this.node.addChild(t),t.setPosition(new cc.v2(-this.canvasWidth/2+(t.width+this.lineMargin)*e,0)),this.lines[e]=t},update:function(){var t=this.lines[0];if(t.x<this.left-t.width){var e=this.lines[this.lines.length-1];t.x=e.x+e.width+this.lineMargin,this.optionalColors&&this.updateLineColor(t),this.lines.shift(),this.lines.push(t)}for(var i,r=o(this.lines);!(i=r()).done;)i.value.x-=this.speed},setColors:function(t,e,i){for(i>e.length&&(i=e.length),this.optionalColors=[],this.optionalColors[0]=t;this.optionalColors.length<i;){var r=e[parseInt(Math.random()*i)];this.optionalColors.includes(r)||(this.optionalColors[this.optionalColors.length]=r)}for(var n,s=o(this.lines);!(n=s()).done;){var c=n.value;this.updateLineColor(c)}},updateLineColor:function(t){this.usingColorTimes||(this.usingColorTimes=0),t.color=this.optionalColors[Math.floor(this.usingColorTimes/2)%this.optionalColors.length],this.usingColorTimes++}}),cc._RF.pop()},{}],line:[function(t,e){"use strict";cc._RF.push(e,"f4b4aQWMPlIjKN39BdpAeLe","line"),cc.Class({extends:cc.Component,onLoad:function(){var t=this.node.getComponent(cc.Collider);t.size.width=this.node.width,t.size.height=this.node.height},onCollisionEnter:function(){}}),cc._RF.pop()},{}],obstacleSet:[function(t,e){"use strict";function o(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(o)return(o=o.call(t)).next.bind(o);if(Array.isArray(t)||(o=i(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"==typeof t)return r(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,i=new Array(e);o<e;o++)i[o]=t[o];return i}cc._RF.push(e,"43f0fkRjSlEFb/tAY0jjxXb","obstacleSet"),cc.Class({extends:cc.Component,properties:{player:{default:null,type:t("player")},obstaclesPrefab:{default:[],type:[cc.Prefab]},startObstaclePrefab:{default:null,type:cc.Prefab},palettePrefab:{default:null,type:cc.Prefab},protectiveProbability:.05,protectiveCoverPrefab:{default:null,type:cc.Prefab}},onLoad:function(){var t=cc.find("Canvas");this.node.width=t.width,this.node.height=t.height,this.obstacleMargin=this.node.height/3,this.palletePool=new cc.NodePool},start:function(){this.createObstacle(this.obstacleMargin,this.createPallete(this.obstacleMargin),this.startObstaclePrefab)},setColors:function(t){this.optionalColors=t,this.primaryColor=t[0],this.usingColorCount=0},moveDown:function(t,e){var i=this.node.children[1];i.y+i.height/2<-this.node.height/2&&(this.node.removeChild(i),"palette"==i.group&&this.palletePool.put(i));var r=this.node.children[this.node.childrenCount-1],n=r.y+r.height/2;if(n<this.node.height/2){var s=n+this.obstacleMargin;this.createObstacle(s,this.createPallete(s))}for(var c,a=o(this.node.children);!(c=a()).done;){var l=c.value;"DeadLine"!=l.name&&l.runAction(cc.moveBy(e,cc.v2(0,t>0?-t:t)))}},createPallete:function(t){var e=this.palletePool.get();e||(e=cc.instantiate(this.palettePrefab)),this.node.addChild(e),e.setPosition(new cc.v2(0,t-this.obstacleMargin/2+e.height/2));var o=e.getComponent("palette").setColors(this.optionalColors,this.lastPrimaryColor);if(this.lastPrimaryColor=o,Math.random()<this.protectiveProbability){var i=cc.instantiate(this.protectiveCoverPrefab);this.node.addChild(i),i.setPosition(new cc.v2(e.x,e.y))}return o},createObstacle:function(t,e,o){this.usingColorCount<this.optionalColors.length&&this.usingColorCount++,o||(o=this.obstaclesPrefab[parseInt(Math.random()*this.obstaclesPrefab.length)]);var i=cc.instantiate(o);this.node.addChild(i),i.setPosition(new cc.v2(0,t+i.height/2));var r=i.name[0].toLowerCase()+i.name.slice(1);i.getComponent(r).setColors(e,this.optionalColors,this.usingColorCount)}}),cc._RF.pop()},{player:"player"}],palette:[function(t,e){"use strict";cc._RF.push(e,"3bdc4DT+OtOmYT6giwGdXUP","palette"),cc.Class({extends:cc.Component,properties:{},onCollisionEnter:function(){this.node.parent.removeChild(this.node),this.node.active=!1},setColors:function(t,e){return this.colors=t,this.exceptColor=e,this.getPrimaryColor()},getPrimaryColor:function(){if(!this.primaryColor)do{this.primaryColor=this.colors[parseInt(Math.random()*this.colors.length)]}while(this.primaryColor==this.exceptColor);return this.primaryColor}}),cc._RF.pop()},{}],player:[function(t,e){"use strict";cc._RF.push(e,"0dd3dxX/GhM4artdMGzoTXt","player"),cc.Class({extends:cc.Component,properties:{jumpHeight:0,jumpDuration:0,sinkDuration:0,deadEffectPrefab:{default:null,type:cc.Prefab},deadAudioClip:{default:null,type:cc.AudioClip},capturedGiftAudioClip:{default:null,type:cc.AudioClip},protectivePBNode:{default:null,type:cc.Node}},onLoad:function(){this.updateStyle(this.node.color)},setJumpTopListener:function(t){this.jumpTopListener=t},jump:function(){this.node.stopAllActions();var t=this.jumpHeight;this.node.y+this.jumpHeight>0&&(t=-this.node.y,this.jumpTopListener(this.jumpHeight,this.jumpDuration));var e=cc.moveBy(this.jumpDuration,cc.v2(0,t)).easing(cc.easeCubicActionOut()),o=-this.node.parent.height/2,i=cc.moveBy(this.sinkDuration,cc.v2(0,o)).easing(cc.easeCubicActionIn());this.node.runAction(cc.sequence(e,i))},updateStyle:function(t){this.node.color=t;var e=this.node.getComponent(cc.ParticleSystem);e.startColor=t,e.endColor=t},protective:function(t){this.isProtectived&&this.unschedule(this.updateProtective),this.isProtectived=!0;var e=this.node.getComponent(cc.ParticleSystem);e.startColorVarCache||(e.startColorVarCache=new cc.Color,e.startColorVarCache.set(e.startColorVar)),e.startColorVar=cc.Color.WHITE,this.protectivePBNode.active=!0;var o=this.protectivePBNode.getComponent(cc.ProgressBar);o.progress=1,o.step=o.totalLength/(t/.016),this.schedule(this.updateProtective,.016)},updateProtective:function(){var t=this.protectivePBNode.getComponent(cc.ProgressBar);if(t.progress-=t.step,!(t.progress>0)){this.isProtectived=!1;var e=this.node.getComponent(cc.ParticleSystem);e.startColorVar=e.startColorVarCache,this.protectivePBNode.active=!1,this.unschedule(this.updateProtective)}},gameOver:function(){if(this.node.active){var t=cc.instantiate(this.deadEffectPrefab);this.node.parent.addChild(t),t.setPosition(cc.v2(this.node.x,this.node.y)),this.node.active=!1,cc.audioEngine.play(this.deadAudioClip,!1,.3),this.scheduleOnce(this.game.gameOver.bind(this.game),1)}},onCollisionEnter:function(t){switch(t.node.group){case"obstacle":this.isProtectived||t.node.color.equals(this.node.color)||this.gameOver();break;case"gift":this.game.captureStar(t.node.getComponent("star").score),cc.audioEngine.play(this.capturedGiftAudioClip,!1,.3);break;case"palette":this.updateStyle(t.node.getComponent("palette").getPrimaryColor());break;case"protective":this.protective(t.node.getComponent("protectiveCover").protectiveDuration)}}}),cc._RF.pop()},{}],protectiveCover:[function(t,e){"use strict";cc._RF.push(e,"dd02ermAdBNhapvm6qVkD0a","protectiveCover"),cc.Class({extends:cc.Component,properties:{protectiveDuration:5},getCover:function(){return this.node.getComponent(cc.Sprite).spriteFrame},onCollisionEnter:function(){this.node.parent.removeChild(this.node)}}),cc._RF.pop()},{}],star:[function(t,e){"use strict";cc._RF.push(e,"a38f8w4Cu1Gy4wL3UeClKbN","star"),cc.Class({extends:cc.Component,properties:{score:0,capturedEffectPrefab:{default:null,type:cc.Prefab}},unuse:function(){this.node.active=!1},reuse:function(){this.node.active=!0},onCollisionEnter:function(){var t=cc.instantiate(this.capturedEffectPrefab);this.node.parent.addChild(t),t.setPosition(cc.v2(this.node.x,this.node.y)),t.zIndex=this.node.zIndex,this.node.parent.removeChild(this.node),this.node.active=!1}}),cc._RF.pop()},{}],"use_v2.0.x_cc.Toggle_event":[function(t,e){"use strict";cc._RF.push(e,"d852cvBS8dL3Yc+Zm2ThjhS","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["use_v2.0.x_cc.Toggle_event","circle","circleDouble","cross","game","gameOver","gameResult","giftCollector","line","lineSeries","obstacleSet","palette","player","protectiveCover","star"]);