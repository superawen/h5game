window.__require=function t(e,o,n){function i(c,a){if(!o[c]){if(!e[c]){var r=c.split("/");if(r=r[r.length-1],!e[r]){var l="function"==typeof __require&&__require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+c+"'")}c=r}var p=o[c]={exports:{}};e[c][0].call(p.exports,function(t){return i(e[c][1][t]||t)},p,p.exports,t,e,o,n)}return o[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({AudioManager:[function(t,e,o){"use strict";cc._RF.push(e,"66cc4DGA7dOXo1nnlMk0Yos","AudioManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.AudioManager=o.AudioType=void 0;var n,i=t("../GameLoop");(function(t){t[t.CLICK=0]="CLICK",t[t.GLOD=1]="GLOD",t[t.LOST=2]="LOST",t[t.OBSMAN=3]="OBSMAN",t[t.OBSWOMAN=4]="OBSWOMAN",t[t.WIN=5]="WIN",t[t.BGM_1=6]="BGM_1",t[t.BGM_2=7]="BGM_2",t[t.BGM_3=8]="BGM_3",t[t.BGM_CAT=9]="BGM_CAT"})(n=o.AudioType||(o.AudioType={}));var s=function(){function t(){this.bgm=""}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.playSound=function(t,e,o){i.GameLoop.getInstance().isMuteAudio||cc.audioEngine.play(i.GameLoop.getInstance().audios[t],e||!1,o||.5)},t.prototype.stopAll=function(){cc.audioEngine.stopAll()},t.prototype.pauseAll=function(){cc.audioEngine.pauseAll()},t.prototype.resumeAll=function(){cc.audioEngine.resumeAll(),this.playSound(n.CLICK,!1,0)},t.prototype.playBGM=function(t){i.GameLoop.getInstance().isMuteAudio||(cc.audioEngine.stopMusic(),cc.audioEngine.playMusic(i.GameLoop.getInstance().audios[t],!0))},t.prototype.stopBgm=function(){cc.audioEngine.stopMusic()},t.prototype.pauseMusic=function(){cc.audioEngine.isMusicPlaying()&&cc.audioEngine.pauseMusic()},t.prototype.resumeBGM=function(){cc.audioEngine.isMusicPlaying()||cc.audioEngine.resumeMusic()},t._instance=null,t}();o.AudioManager=s,cc._RF.pop()},{"../GameLoop":"GameLoop"}],CameraShake:[function(t,e,o){"use strict";cc._RF.push(e,"9ef2clj+itFYrHzX3+UbpHv","CameraShake"),Object.defineProperty(o,"__esModule",{value:!0}),o.CameraShake=void 0;var n=t("./Shake"),i=cc._decorator,s=i.ccclass,c=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.shake=function(){var t=this,e=n.Shake.create(.5,8,8);this.node.runAction(cc.sequence(e,cc.callFunc(function(){t.node.setPosition(cc.v2(0,0))})))},__decorate([s],e)}(cc.Component));o.CameraShake=c,cc._RF.pop()},{"./Shake":"Shake"}],EventManager:[function(t,e,o){"use strict";cc._RF.push(e,"d11d9upGPNEVo25JinUzVU3","EventManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.EventManager=o.EventType=void 0,function(t){t[t.zoomTrigger=1]="zoomTrigger",t[t.zoomIn=2]="zoomIn",t[t.onHide=3]="onHide",t[t.onShow=4]="onShow",t[t.addObsPool=5]="addObsPool",t[t.addGoldPool=6]="addGoldPool",t[t.gameOver=7]="gameOver"}(o.EventType||(o.EventType={}));var n=function(){function t(){this.event_cache=null,this.event_cache={}}return t.getInstance=function(){return null==t.singleInstance&&(t.singleInstance=new t),t.singleInstance},t.prototype.addEventListener=function(t,e,o,n){if(void 0===o&&(o=""),void 0===n&&(n=0),t&&e){for(var i=this.event_cache[t]||[],s=!1,c=0;c<i.length;c++)if(i[c].class_id===o){s=!0;break}if(!s){var a={type:t,class_id:o,priority:n,callback:e};if(n>0){var r=!0;for(c=i.length-1;c>=0;c--)if(i[c].priority>n){i.splice(c+1,0,a),r=!1;break}r&&i.splice(0,0,a)}else i.push(a);this.event_cache[t]=i}}},t.prototype.dispatchEvent=function(t,e){if(t){var o=this.event_cache[t];if(o)for(var n=0;n<o.length;n++)o[n].callback(e)}},t.prototype.removeEventListener=function(t,e){if(t&&e){var o=this.event_cache[t];if(o){for(var n=0;n<o.length;n++)if(o[n].callback===e){o.splice(n,1);break}0==o.length&&delete this.event_cache[t]}}},t.prototype.removeEventListenerByTag=function(t,e){if(t)for(var o in this.event_cache){var n=this.event_cache[o];if(n){for(var i=0;i<n.length;i++)if(n[i].class_id===e){n.splice(i,1);break}0==n.length&&delete this.event_cache[t]}}},t.singleInstance=null,t}();o.EventManager=n,cc._RF.pop()},{}],FlyCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"cc1f66+retGZ5dISiIzN9rN","FlyCtrl"),Object.defineProperty(o,"__esModule",{value:!0}),o.FlyCtrl=void 0;var n=t("../../GameLoop"),i=t("../../comms/AudioManager"),s=t("../../comms/CameraShake"),c=t("./levelThreeExterior"),a=t("../../other/explosion"),r=t("../../other/goldAction"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveSpeed=0,e.maxRot=0,e.rotSpeed=0,e.cameraShake=null,e.maxBorder=0,e.dir=0,e.downBtn=null,e.upBtn=null,e.child=null,e.isDown=!1,e.isUp=!1,e.isComplete=!1,e.explosionCtrl=null,e}return __extends(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0},e.prototype.start=function(){this.maxBorder=cc.view.getVisibleSize().height,this.downBtn=cc.find("Canvas/UILayer/uiElement/down_btn"),this.upBtn=cc.find("Canvas/UILayer/uiElement/up_btn"),this.cameraShake=cc.find("Canvas/Main Camera").getComponent(s.CameraShake),this.explosionCtrl=cc.find("Canvas/run_layer/ground_layer/explosion").getComponent(a.explosion),this.child=this.node.children[0],this.onBtnEvent()},e.prototype.update=function(t){this.dir=(this.isUp?1:0)+(this.isDown?-1:0),this.rotate(t),this.move(t),this.isComplete&&(this.node.x+=400*t)},e.prototype.move=function(t){this.node.y-=this.moveSpeed*(Math.abs(this.child.rotation)/this.maxRot)*(this.child.rotation>0?1:-1)*t,this.node.y<.2*this.maxBorder&&(this.node.y=.2*this.maxBorder),this.node.y>.8*this.maxBorder&&(this.node.y=.8*this.maxBorder)},e.prototype.rotate=function(t){t=.0172,0==this.dir?Math.abs(this.child.rotation)<1?this.child.rotation=0:this.child.rotation>0?this.child.rotation-=this.rotSpeed*t:this.child.rotation+=this.rotSpeed*t:this.dir>0?this.child.rotation>-this.maxRot?this.child.rotation-=this.rotSpeed*t:this.child.rotation=-this.maxRot:this.child.rotation<this.maxRot?this.child.rotation+=this.rotSpeed*t:this.child.rotation=this.maxRot},e.prototype.complete=function(){this.isComplete=!0},e.prototype.onBtnEvent=function(){this.downBtn.on("touchstart",this.getDownBtnDown,this),this.downBtn.on("touchend",this.getDownBtnUp,this),this.downBtn.on("touchcancel",this.getDownBtnUp,this),this.upBtn.on("touchstart",this.getUpBtnDown,this),this.upBtn.on("touchend",this.getUpBtnUp,this),this.upBtn.on("touchcancel",this.getUpBtnUp,this)},e.prototype.getDownBtnDown=function(){this.isDown=!0},e.prototype.getDownBtnUp=function(){this.isDown=!1},e.prototype.getUpBtnDown=function(){this.isUp=!0},e.prototype.getUpBtnUp=function(){this.isUp=!1},e.prototype.onCollisionEnter=function(t){switch(t.tag){case 6:t.node.destroy();var e=t.node.getComponent(r.goldAction);c.levelThreeExterior.getInstance().addScore(e.score,t.node.convertToWorldSpaceAR(cc.v2(0,0)),e.goldId),i.AudioManager.getInstance().playSound(i.AudioType.GLOD);break;case 7:n.GameLoop.getInstance().win();break;case 9:t.node.destroy(),c.levelThreeExterior.getInstance().addScore(200,t.node.convertToWorldSpaceAR(cc.v2(0,0)),3),i.AudioManager.getInstance().playSound(i.AudioType.GLOD);break;case 15:case 16:this.explosionCtrl.play(t.node.position),c.levelThreeExterior.getInstance().minusHeart(this.node.position),t.node.destroy(),this.cameraShake.shake(),i.AudioManager.getInstance().playSound(n.GameLoop.getInstance().isMan?i.AudioType.OBSMAN:i.AudioType.OBSWOMAN)}},e.prototype.onDestroy=function(){this.downBtn.off("touchstart",this.getDownBtnDown,this),this.downBtn.off("touchend",this.getDownBtnUp,this),this.downBtn.off("touchcancel",this.getDownBtnUp,this),this.upBtn.off("touchstart",this.getUpBtnDown,this),this.upBtn.off("touchend",this.getUpBtnUp,this),this.upBtn.off("touchcancel",this.getUpBtnUp,this)},__decorate([u({type:cc.Float,tooltip:"\u901f\u5ea6"})],e.prototype,"moveSpeed",void 0),__decorate([u({type:cc.Float,tooltip:"\u6700\u5927\u65cb\u8f6c\u89d2\u5ea6"})],e.prototype,"maxRot",void 0),__decorate([u({type:cc.Float,tooltip:"\u65cb\u8f6c\u901f\u5ea6"})],e.prototype,"rotSpeed",void 0),__decorate([p],e)}(cc.Component);o.FlyCtrl=h,cc._RF.pop()},{"../../GameLoop":"GameLoop","../../comms/AudioManager":"AudioManager","../../comms/CameraShake":"CameraShake","../../other/explosion":"explosion","../../other/goldAction":"goldAction","./levelThreeExterior":"levelThreeExterior"}],GameLoop:[function(t,e,o){"use strict";cc._RF.push(e,"276adx6aIxD24oAFa00rCo6","GameLoop"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameLoop=void 0;var n=t("./sceneState/SceneController"),i=t("./sceneState/ISceneState"),s=t("../plugs/IPlatform"),c=t("./sceneState/01level/mainExterior"),a=t("./sceneState/03level/levelThreeExterior"),r=t("./uiSystem/loadPanel"),l=t("./sceneState/02level/levelTwoExterior"),p=t("./comms/AudioManager"),u=t("./comms/EventManager"),h=cc._decorator,d=h.ccclass,y=h.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audios=[],e.mSceneCtrl=null,e.platform=null,e.isPlayBgAction=!1,e.isMan=!0,e.currIndex=-1,e.isMuteAudio=!1,e.isMuteEff=!1,e.isLoadSub=!1,e.userName="",e.buildNode=new Array,e.groundNode=new Array,e}var o;return __extends(e,t),o=e,e.getInstance=function(){return this._instance},e.prototype.onLoad=function(){o._instance=this,cc.game.addPersistRootNode(this.node),this.schedule(function(){cc.sys.garbageCollect()},30),cc.game.setFrameRate(58)},e.prototype.start=function(){this.mSceneCtrl=new n.SceneController,this.mSceneCtrl.setState(new i.startSceneState(this.mSceneCtrl),!1),cc.sys.platform===cc.sys.WECHAT_GAME?this.platform=new s.WeChatPlatform:cc.sys.platform===cc.sys.QQ_PLAY&&(this.platform=new s.QQPlay),null!=this.platform&&(this.platform.init(),this.platform.requestNet()),this.isLoadSub||this.DownLoadSubPack(),this.onSysEvent()},e.prototype.update=function(){this.mSceneCtrl.stateUpdate()},e.prototype.onSysEvent=function(){null!=this.platform&&(this.platform.onShow(this.onShow.bind(this)),this.platform.onHide(this.onHide.bind(this)))},e.prototype.onMusicBtn=function(){return this.isMuteAudio=!this.isMuteAudio,this.isMuteAudio?p.AudioManager.getInstance().pauseMusic():p.AudioManager.getInstance().resumeBGM(),this.isMuteAudio},e.prototype.win=function(){0==this.currIndex?c.mainExterior.getInstance().win():1==this.currIndex?l.levelTwoExterior.getInstance().win():2==this.currIndex&&a.levelThreeExterior.getInstance().win()},e.prototype.gotoStartScene=function(){0==this.currIndex?c.mainExterior.getInstance().uiMgr.openPanel(r.loadPanel,"loadPanel",["01startScene",c.mainExterior.getInstance(),1]):1==this.currIndex?l.levelTwoExterior.getInstance().uiMgr.openPanel(r.loadPanel,"loadPanel",["01startScene",l.levelTwoExterior.getInstance(),1]):2==this.currIndex&&a.levelThreeExterior.getInstance().uiMgr.openPanel(r.loadPanel,"loadPanel",["01startScene",a.levelThreeExterior.getInstance(),1])},e.prototype.DownLoadSubPack=function(){"undefined"!=typeof wx&&(this.isLoadSub=!0)},e.prototype.onShow=function(){p.AudioManager.getInstance().resumeAll(),-1!=this.currIndex&&this.platform.showModal("Tip","\u6e38\u620f\u5df2\u6682\u505c\uff0c\u70b9\u51fb\u7ee7\u7eed",function(){u.EventManager.getInstance().dispatchEvent(u.EventType.onShow)},function(){u.EventManager.getInstance().dispatchEvent(u.EventType.onShow)})},e.prototype.onHide=function(){p.AudioManager.getInstance().pauseAll(),-1!=this.currIndex&&u.EventManager.getInstance().dispatchEvent(u.EventType.onHide)},e.prototype.offShow=function(){},e.prototype.offHide=function(){},e.prototype.onDestroy=function(){this.mSceneCtrl.stateEnd(),null!=this.platform&&(this.platform.offShow(this.offShow),this.platform.offHide(this.offHide))},e._instance=null,__decorate([y({type:[cc.AudioClip],tooltip:"\u97f3\u9891\u8d44\u6e90"})],e.prototype,"audios",void 0),o=__decorate([d],e)}(cc.Component);o.GameLoop=f,cc._RF.pop()},{"../plugs/IPlatform":"IPlatform","./comms/AudioManager":"AudioManager","./comms/EventManager":"EventManager","./sceneState/01level/mainExterior":"mainExterior","./sceneState/02level/levelTwoExterior":"levelTwoExterior","./sceneState/03level/levelThreeExterior":"levelThreeExterior","./sceneState/ISceneState":"ISceneState","./sceneState/SceneController":"SceneController","./uiSystem/loadPanel":"loadPanel"}],GlobalVar:[function(t,e){"use strict";cc._RF.push(e,"907d35G7bBL0YyIGxEyrK7s","GlobalVar"),window.GlobalVar=new cc.Class({}),GlobalVar.switchPosToNode=function(t,e){var o=t.parent.convertToWorldSpaceAR(t.getPosition());return e.convertToNodeSpaceAR(o)},GlobalVar.switchPosToNodeLocalPos=function(t,e,o){var n=t.convertToWorldSpaceAR(e);return o.convertToNodeSpaceAR(n)},GlobalVar.shuffle=function(t){for(var e=t.length;e;e--){var o=Math.floor(Math.random()*e),n=[t[o],t[e-1]];t[e-1]=n[0],t[o]=n[1]}return t},GlobalVar.getRanElementByArray=function(t,e){for(var o,n,i=t.slice(0),s=t.length,c=s-e;s-- >c;)o=i[n=Math.floor((s+1)*Math.random())],i[n]=i[s],i[s]=o;return i.slice(c).map(Number)},GlobalVar.ConstVal={AUDIO_DIR:"audios"},cc._RF.pop()},{}],IGoldAction:[function(t,e,o){"use strict";cc._RF.push(e,"ae4fcjwCW5Jq6r2v+SgHsPg","IGoldAction"),Object.defineProperty(o,"__esModule",{value:!0}),o.IGoldAction=void 0;var n=cc._decorator,i=n.ccclass,s=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.box=null,e.sp=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.box=this.getComponent(cc.BoxCollider),this.sp=this.getComponent(cc.Sprite)},e.prototype.start=function(){this.action()},e.prototype.setGoldId=function(){},e.prototype.action=function(){},e.prototype.hide=function(){this.box.enabled=!1,this.sp.enabled=!1},e.prototype.show=function(){this.box&&(this.box.enabled||(this.box.enabled=!0,this.sp.enabled=!0))},__decorate([i],e)}(cc.Component));o.IGoldAction=s,cc._RF.pop()},{}],IOpenStrategy:[function(t,e,o){"use strict";cc._RF.push(e,"7333fSMjltAOo1yDZM/R4wf","IOpenStrategy"),Object.defineProperty(o,"__esModule",{value:!0}),o.strateC=o.strateB=o.strateA=o.IOpenStrategy=void 0;var n=function(){function t(t){this.mObj=null,this.mOpenVec=cc.v2(0,0),this.mEndVec=cc.v2(0,0),this.mSpeed=.3,this.mObj=t}return t.prototype.setActionSpeed=function(t){this.mSpeed=t},t.prototype.open=function(){},t.prototype.close=function(){},t}();o.IOpenStrategy=n;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.open=function(t){this.mObj.scale=0,this.mObj.opacity=0,this.mObj.runAction(cc.sequence(cc.spawn(cc.fadeTo(this.mSpeed,255),cc.scaleTo(this.mSpeed,1).easing(cc.easeBackOut())),cc.callFunc(function(){t()})))},e.prototype.close=function(t){this.mObj.runAction(cc.sequence(cc.spawn(cc.fadeTo(this.mSpeed,0),cc.scaleTo(this.mSpeed,0).easing(cc.easeBackIn())),cc.callFunc(function(){t()})))},e}(n);o.strateA=i;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.open=function(t){this.mObj.scale=2,this.mObj.opacity=0,this.mObj.runAction(cc.sequence(cc.spawn(cc.fadeTo(this.mSpeed,255),cc.scaleTo(this.mSpeed,1).easing(cc.easeBackOut())),cc.callFunc(function(){t()})))},e.prototype.close=function(t){this.mObj.runAction(cc.sequence(cc.spawn(cc.fadeTo(this.mSpeed,0),cc.scaleTo(this.mSpeed,2).easing(cc.easeBackIn())),cc.callFunc(function(){t()})))},e}(n);o.strateB=s;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.open=function(t){this.mObj.opacity=0,this.mObj.runAction(cc.sequence(cc.fadeIn(this.mSpeed),cc.callFunc(function(){t()})))},e.prototype.close=function(t){this.mObj.runAction(cc.sequence(cc.fadeOut(this.mSpeed),cc.callFunc(function(){t()})))},e}(n);o.strateC=c,cc._RF.pop()},{}],IPlatform:[function(t,e,o){"use strict";cc._RF.push(e,"047b5tcoFJO8IRxA4lttqYQ","IPlatform"),Object.defineProperty(o,"__esModule",{value:!0}),o.QQPlay=o.WeChatPlatform=o.IPlatform=void 0;var n=function(){function t(){this.liuhai=0,this.nickName=""}return t.prototype.init=function(){},t.prototype.setUserCloudStorage=function(){},t.prototype.saveFile=function(){},t.prototype.shareAppMessage=function(){},t.prototype.showToast=function(t,e,o){void 0===o&&(o=!0)},t.prototype.hideToast=function(){},t.prototype.showLoading=function(t,e){void 0===e&&(e=!0)},t.prototype.hideLoading=function(){},t.prototype.showModal=function(){},t.prototype.postMessageToOpenDataContext=function(){},t.prototype.requestNet=function(){},t.prototype.requestSetUnLock=function(){},t.prototype.requestGetUnLock=function(){},t.prototype.onShow=function(){},t.prototype.onHide=function(){},t.prototype.offShow=function(){},t.prototype.offHide=function(){},t}();o.IPlatform=n;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._canvas=null,e}return __extends(e,t),e.prototype.init=function(){if("undefined"!=typeof wx){var t=wx.getSystemInfoSync();this.liuhai=t.statusBarHeight;var e=t.windowWidth,o=t.windowHeight,n=wx.createUserInfoButton({type:"text",text:"",style:{left:0,top:0,width:e,height:o,lineHeight:40,backgroundColor:"#00000000",color:"#00000000",textAlign:"center",fontSize:10,borderRadius:4}}),i=this;n.onTap(function(t){var e=t.userInfo;e&&(i.nickName=e.nickName,cc.loader.load({url:e.avatarUrl,type:"png"},function(t){t&&console.error(t)}),n.hide(),n.destroy())})}},e.prototype.setUserCloudStorage=function(t){console.log("setUserCloudStorage"),this.postMessageToOpenDataContext({k:""+t[0].key,v:""+t[0].value})},e.prototype.saveFile=function(t,e){if(cc.sys.platform!==cc.sys.WECHAT_GAME)return console.log("it not wechat"),!1;this.showToast("\u6d77\u62a5\u751f\u6210\u4e2d...",1);var o=this,n=[{img:null,src:"https://www.19960909.com/minigame-fendi/imgs/scene_"+t+".png"}],i=0,s=function(){++i==n.length&&o.drawImg(n,e)},c=function(){o.failSave()};try{for(var a=0;a<n.length;a++)n[a].img=wx.createImage(),n[a].img.src=n[a].src,n[a].img.onload=s,n[a].img.onerror=c}catch(r){console.log("\u62a5\u9519:",r)}},e.prototype.shareAppMessage=function(){console.log("shareAppMessage"),wx.shareAppMessage({title:"\u60f3\u4e0e\u6211\u4e00\u8d77\u63a2\u7d22\u201cFENDI \u7f57\u9a6c\u5947\u9047\u8bb0\u201d \u5417?",imageUrl:"https://www.19960909.com/minigame-fendi/imgs/share.jpg"})},e.prototype.showToast=function(t,e,o){var n;void 0===o&&(o=!0),n=0==e?"success":1==e?"loading":"none",wx.showToast({title:t,icon:n,duration:2e3,mask:o})},e.prototype.hideToast=function(){wx.hideToast()},e.prototype.showLoading=function(t,e){void 0===e&&(e=!0),wx.showLoading({title:t,mask:e})},e.prototype.hideLoading=function(){wx.hideLoading()},e.prototype.showModal=function(t,e,o,n){wx.showModal({title:t,content:e,success:function(t){t.confirm?(console.log("\u7528\u6237\u70b9\u51fb\u786e\u5b9a"),o()):t.cancel&&(console.log("\u7528\u6237\u70b9\u51fb\u53d6\u6d88"),n())}})},e.prototype.postMessageToOpenDataContext=function(t){wx.getOpenDataContext().postMessage(t)},e.prototype.requestNet=function(){console.log("==userLogins=="),wx.login({success:function(t){t.code&&wx.request({url:"https://www.19960909.com/Login",data:{code:t.code},success:function(){},fail:function(){}})}})},e.prototype.requestSetUnLock=function(){console.log("==userSetUnLock=="),wx.login({success:function(t){t.code&&wx.request({url:"https://www.19960909.com/SetUnLock",data:{session:"",value:0},success:function(t){t.data.err},fail:function(){}})}})},e.prototype.requestGetUnLock=function(){console.log("==userGetUnLock=="),wx.login({success:function(t){t.code&&wx.request({url:"https://www.19960909.com/GetUnLock",data:{session:""},success:function(t){var e=t.data;0!=e.err||e.data},fail:function(){}})}})},e.prototype.onShow=function(t){wx.onShow(t)},e.prototype.onHide=function(t){wx.onHide(t)},e.prototype.offShow=function(t){wx.offShow(t)},e.prototype.offHide=function(t){wx.offHide(t)},e.prototype.drawImg=function(t,e){try{var o=null;this._canvas?(this.clearCanvas(),o=this._canvas):this._canvas=o=wx.createCanvas();var n=o.getContext("2d");o.width=t[0].img.width,o.height=t[0].img.height,n.font="90px \u5fae\u8f6f\u96c5\u9ed1",n.fillStyle="#c67861",n.textAlign="center",n.drawImage(t[0].img,0,0,t[0].img.width,t[0].img.height),n.fillText(e,.5*o.width,480,o.width),n.font="50px \u5fae\u8f6f\u96c5\u9ed1",n.fillStyle="#3b3a3a",n.textAlign="center",n.fillText(this.nickName,.5*o.width,380,o.width),this.canvasToImg(o)}catch(i){console.log("drawImg error:",i)}},e.prototype.canvasToImg=function(t){var e=this;try{t.toTempFilePath({x:0,y:0,width:t.width,height:t.height,destWidth:t.width,destHeight:t.height,fileType:"png",quality:1,success:function(t){console.log("\u4fdd\u5b58\u8def\u5f84\u6210\u529f:",t.tempFilePath),e.getPhotosAlbum(t.tempFilePath)},fail:function(t){console.log("\u4fdd\u5b58\u8def\u5f84\u5931\u8d25:",t)}})}catch(o){console.log("canvas\u8f6c\u56fe\u7247\u5931\u8d25:",o)}},e.prototype.getPhotosAlbum=function(t){var e=this;wx.authorize({scope:"scope.writePhotosAlbum",success:function(){console.log("\u83b7\u53d6\u6388\u6743\u6210\u529f"),e.savePicture(t)},fail:function(){console.log("\u83b7\u53d6\u6388\u6743\u5931\u8d25")}})},e.prototype.savePicture=function(t){var e=this;wx.saveImageToPhotosAlbum({filePath:t,success:function(){e.showToast("\u6d77\u62a5\u5df2\u4fdd\u5b58\u81f3\u76f8\u518c",0),console.log("\u4fdd\u5b58\u6210\u529f")},fail:function(t){console.log("\u4fdd\u5b58\u5931\u8d25:",t)}})},e.prototype.clearCanvas=function(){this._canvas.getContext("2d").clearRect(0,0,this._canvas.width,this._canvas.height)},e.prototype.failSave=function(){console.log("\u4fdd\u5b58\u5931\u8d25")},e}(n);o.WeChatPlatform=i;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(n);o.QQPlay=s,cc._RF.pop()},{}],ISceneState:[function(t,e,o){"use strict";cc._RF.push(e,"55906FsyoJEf433w3W2JoMp","ISceneState"),Object.defineProperty(o,"__esModule",{value:!0}),o.level_3State=o.level_2State=o.mainSceneState=o.startSceneState=o.ISceneState=void 0;var n=t("./startScene/startExterior"),i=t("./01level/mainExterior"),s=t("./03level/levelThreeExterior"),c=t("./02level/levelTwoExterior"),a=function(){function t(t,e){this.mName="",this.mSceneCtrl=null,this.mSceneCtrl=t,this.mName=e}return t.prototype.getSceneName=function(){return this.mName},t.prototype.stateStart=function(){},t.prototype.stateUpdate=function(){},t.prototype.stateEnd=function(){},t}();o.ISceneState=a;var r=function(t){function e(e,o){return void 0===o&&(o="01startScene"),t.call(this,e,o)||this}return __extends(e,t),e.prototype.stateStart=function(){n.startExterior.getInstance(),n.startExterior.getInstance().setSceneState(this)},e.prototype.stateUpdate=function(){n.startExterior.getInstance().update()},e.prototype.stateEnd=function(){n.startExterior.getInstance().end()},e.prototype.setMainState=function(){this.mSceneCtrl.setState(new l(this.mSceneCtrl))},e.prototype.setLevel_2State=function(){this.mSceneCtrl.setState(new p(this.mSceneCtrl))},e.prototype.setLevel_3State=function(){this.mSceneCtrl.setState(new u(this.mSceneCtrl))},e}(a);o.startSceneState=r;var l=function(t){function e(e,o){return void 0===o&&(o="01level"),t.call(this,e,o)||this}return __extends(e,t),e.prototype.stateStart=function(){i.mainExterior.getInstance(),i.mainExterior.getInstance().setLevel_1State(this)},e.prototype.stateUpdate=function(){i.mainExterior.getInstance().update()},e.prototype.stateEnd=function(){i.mainExterior.getInstance().end()},e.prototype.setStartState=function(){this.mSceneCtrl.setState(new r(this.mSceneCtrl))},e.prototype.setMainState=function(){this.mSceneCtrl.setState(new e(this.mSceneCtrl))},e.prototype.setLevel_2State=function(){this.mSceneCtrl.setState(new p(this.mSceneCtrl))},e.prototype.setLevel_3State=function(){this.mSceneCtrl.setState(new u(this.mSceneCtrl))},e}(a);o.mainSceneState=l;var p=function(t){function e(e,o){return void 0===o&&(o="02level"),t.call(this,e,o)||this}return __extends(e,t),e.prototype.stateStart=function(){c.levelTwoExterior.getInstance(),c.levelTwoExterior.getInstance().setLevelTwoState(this)},e.prototype.stateUpdate=function(){c.levelTwoExterior.getInstance().update()},e.prototype.stateEnd=function(){c.levelTwoExterior.getInstance().end()},e.prototype.setStartState=function(){this.mSceneCtrl.setState(new r(this.mSceneCtrl))},e.prototype.setMainState=function(){this.mSceneCtrl.setState(new l(this.mSceneCtrl))},e.prototype.setLevel_2State=function(){this.mSceneCtrl.setState(new e(this.mSceneCtrl))},e.prototype.setLevel_3State=function(){this.mSceneCtrl.setState(new u(this.mSceneCtrl))},e}(a);o.level_2State=p;var u=function(t){function e(e,o){return void 0===o&&(o="03level"),t.call(this,e,o)||this}return __extends(e,t),e.prototype.stateStart=function(){s.levelThreeExterior.getInstance(),s.levelThreeExterior.getInstance().setLevelThreeState(this)},e.prototype.stateUpdate=function(){s.levelThreeExterior.getInstance().update()},e.prototype.stateEnd=function(){s.levelThreeExterior.getInstance().end()},e.prototype.setStartState=function(){this.mSceneCtrl.setState(new r(this.mSceneCtrl))},e.prototype.setMainState=function(){this.mSceneCtrl.setState(new l(this.mSceneCtrl))},e.prototype.setLevel_2State=function(){this.mSceneCtrl.setState(new p(this.mSceneCtrl))},e.prototype.setLevel_3State=function(){this.mSceneCtrl.setState(new e(this.mSceneCtrl))},e}(a);o.level_3State=u,cc._RF.pop()},{"./01level/mainExterior":"mainExterior","./02level/levelTwoExterior":"levelTwoExterior","./03level/levelThreeExterior":"levelThreeExterior","./startScene/startExterior":"startExterior"}],ISpineCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"dae68+2UrxEP50evqJTBn3Z","ISpineCtrl"),Object.defineProperty(o,"__esModule",{value:!0}),o.ISpineCtrl=void 0;var n=cc._decorator,i=n.ccclass,s=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mixTime=0,e.spine=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.spine=this.getComponent(sp.Skeleton)},e.prototype.start=function(){},e.prototype.jump=function(){this._setTimeScale(.3)},e.prototype.squat=function(){this._setTimeScale(.5)},e.prototype.run=function(){this._setTimeScale(1)},e.prototype.stop=function(){this.spine.paused=!0},e.prototype.continue=function(){this.spine.paused=!1},e.prototype.motuo_jump=function(){this._setTimeScale(.3)},e.prototype.motuo_squat=function(){this._setTimeScale(.5)},e.prototype.motuo_run=function(){this._setTimeScale(1)},e.prototype._setMix=function(t,e,o){void 0===o&&(o=this.mixTime),this.spine.setMix(t,e,o),this.spine.setMix(e,t,o)},e.prototype._setTimeScale=function(t){this.spine.timeScale=t},__decorate([s(cc.Float)],e.prototype,"mixTime",void 0),__decorate([i],e)}(cc.Component);o.ISpineCtrl=c,cc._RF.pop()},{}],ISystem:[function(t,e,o){"use strict";cc._RF.push(e,"3d4e9aFYShOh66lQY3vFzak","ISystem"),Object.defineProperty(o,"__esModule",{value:!0}),o.ISystem=void 0;var n=function(){function t(){}return t.prototype.sysInit=function(){},t.prototype.sysUpdate=function(){},t.prototype.sysRelease=function(){},t}();o.ISystem=n,cc._RF.pop()},{}],IUIBase:[function(t,e,o){"use strict";cc._RF.push(e,"6ebb1g6gFdMWrgDhdTAILhG","IUIBase"),Object.defineProperty(o,"__esModule",{value:!0}),o.IUIBase=o.PanelLayer=void 0;var n=cc._decorator,i=n.ccclass;n.property,function(t){t.funcPanel="funcPanel",t.alertTip="alertTip",t.tipFloat="tipFloat"}(o.PanelLayer||(o.PanelLayer={}));var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mOpenStrategy=null,e}return __extends(e,t),e.prototype.initStrategy=function(){},e.prototype.getSkinPath=function(){return"prefabs/uiPanels/"+this.skinPath},e.prototype.getSkinName=function(){return this.skinPath},e.prototype.init=function(t){t&&(this.args=t)},e.prototype.initComponent=function(){},e.prototype.open=function(){this.onShowing()},e.prototype.onShowing=function(){var t=this;this.mOpenStrategy.open(function(){t.onShowed()})},e.prototype.onShowed=function(){},e.prototype.update=function(){},e.prototype.Close=function(t){this.onClosing(t)},e.prototype.onClosing=function(t){var e=this;this.mOpenStrategy.close(function(){t(),e.onClosed()})},e.prototype.onClosed=function(){},__decorate([i],e)}(cc.Component);o.IUIBase=s,cc._RF.pop()},{}],LayerCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"9dc328paDFDlZ9ysgjo/mXy","LayerCtrl"),Object.defineProperty(o,"__esModule",{value:!0}),o.LayerCtrl=void 0;var n,i=t("../../../GameLoop");(function(t){t[t.build=0]="build",t[t.ground=1]="ground"})(n||(n={}));var s=cc._decorator,c=s.ccclass,a=s.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layerType=n.build,e.currWay=null,e.oldWay=null,e.nextPos=null,e.isComplete=!1,e.interval=1,e.timer=0,e.loadNodes=new Array,e}return __extends(e,t),e.prototype.start=function(){this.init()},e.prototype.init=function(){this.timer=this.interval,this.currWay=this.node.children[0],this.nextPos=this.currWay.getChildByName("nextPos"),this.layerType==n.build?(this.loadNodes=i.GameLoop.getInstance().buildNode,i.GameLoop.getInstance().buildNode=[]):this.layerType==n.ground&&(this.loadNodes=i.GameLoop.getInstance().groundNode,i.GameLoop.getInstance().groundNode=[])},e.prototype.update=function(){this.isComplete||(this.timer-=.0172,this.timer<0&&(this.timer=this.interval,this.check()))},e.prototype.check=function(){0!=this.loadNodes.length&&(GlobalVar.switchPosToNode(this.nextPos,this.node).x+this.node.x<1.3*cc.view.getVisibleSize().width&&this.nextWay(),null!=this.oldWay&&this.oldWay.isValid&&this.oldWay.convertToWorldSpaceAR(cc.v2(0,0)).x<0&&this.oldWay.parent.destroy())},e.prototype.nextWay=function(){0!=this.loadNodes.length?this.setNextWay():this.isComplete=!0},e.prototype.setNextWay=function(){this.oldWay=this.nextPos,this.currWay=this.loadNodes.shift(),this.node.addChild(this.currWay),this.currWay.setPosition(GlobalVar.switchPosToNode(this.nextPos,this.node)),this.nextPos=this.currWay.getChildByName("nextPos")},__decorate([a({type:cc.Enum(n)})],e.prototype,"layerType",void 0),__decorate([c],e)}(cc.Component);o.LayerCtrl=r,cc._RF.pop()},{"../../../GameLoop":"GameLoop"}],LayerRun:[function(t,e,o){"use strict";cc._RF.push(e,"beb84k4hTxMyLGuItr5dfwo","LayerRun"),Object.defineProperty(o,"__esModule",{value:!0}),o.LayerRun=void 0;var n,i=cc._decorator,s=i.ccclass,c=i.property;(function(t){t[t.default=0]="default",t[t.loop=1]="loop"})(n||(n={}));var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layer=n.default,e.moveSpeed=0,e.stop=!1,e.loops=null,e}return __extends(e,t),e.prototype.start=function(){this.loops=new Array,this.loops=this.node.children},e.prototype.update=function(){this.stop||(this.node.x-=.0172*this.moveSpeed,this.layer===n.loop&&this.check())},e.prototype.setSpeed=function(t){void 0===t&&(t=200),this.moveSpeed=t},e.prototype.setMultiple=function(t){this.moveSpeed*=t},e.prototype.check=function(){if(this.loops[0].convertToWorldSpaceAR(cc.v2(0,0)).x<0){var t=this.loops.shift();t.x=this.loops[this.loops.length-1].x+400*Math.random()+800,t.setScale(1,.6+.4*Math.random()),this.loops.push(t)}},__decorate([c({type:cc.Enum(n),tooltip:"\u5c42\u7ea7\u679a\u4e3e"})],e.prototype,"layer",void 0),__decorate([c({type:cc.Float,tooltip:"\u79fb\u52a8\u901f\u5ea6"})],e.prototype,"moveSpeed",void 0),__decorate([s],e)}(cc.Component);o.LayerRun=a,cc._RF.pop()},{}],LoaderManager:[function(t,e,o){"use strict";cc._RF.push(e,"63afeKB6cZKrZmunM0yDNEX","LoaderManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.Assets=o.Loader=void 0;var n=function(){function t(){this.mIsComplete=!1,this.assets=[]}return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.loader=function(){var t=this;cc.loader.loadResArray(i,function(e,o){e?console.error("Loader.loader is fail !"):(t.assets=o,t.mIsComplete=!0)})},t.prototype.isLoadComplete=function(){return this.mIsComplete},t.prototype.loadInstantFree=function(t,e){cc.loader.loadRes(t,function(t,o){t?console.log(t):(e(o),cc.loader.release(o))})},t.prototype.loadInstance=function(t,e){cc.loader.loadRes(t,function(t,o){t?console.log(t):e(o)})},t.prototype.release=function(){cc.loader.release(i),this.mIsComplete=!1},t.prototype.getAssetByIndex=function(t){return this.assets[t]},t._instance=null,t}();o.Loader=n;var i=["ui/FENDIUI"];(function(t){t[t.Grid=0]="Grid"})(o.Assets||(o.Assets={})),cc._RF.pop()},{}],ManSpineCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"b660cA5PN1PppCSKp7KLfuU","ManSpineCtrl"),Object.defineProperty(o,"__esModule",{value:!0}),o.ManSpineCtrl=void 0;var n=t("./ISpineCtrl"),i=cc._decorator,s=i.ccclass,c=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.start=function(){this._setMix("nanren_pao","nanren_tiao",.2),this._setMix("nanren_pao","nanren_xiatan",.1),this._setMix("nanren__motuocherun","nanren_motuochetiao",.2),this._setMix("nanren__motuocherun","nanren_motuochepao",.1)},e.prototype.jump=function(){this.spine.setAnimation(0,"nanren_tiao",!1),t.prototype.jump.call(this)},e.prototype.squat=function(){this.spine.setAnimation(0,"nanren_xiatan",!0),t.prototype.squat.call(this)},e.prototype.run=function(){"nanren_pao"!=this.spine.animation&&(this.spine.setAnimation(0,"nanren_pao",!0),t.prototype.run.call(this))},e.prototype.motuo_jump=function(){this.spine.setAnimation(0,"nanren_motuochetiao",!1),t.prototype.motuo_jump.call(this)},e.prototype.motuo_squat=function(){this.spine.setAnimation(0,"nanren_motuochepao",!1),t.prototype.motuo_squat.call(this)},e.prototype.motuo_run=function(){this.spine.setAnimation(0,"nanren__motuocherun",!0),t.prototype.motuo_run.call(this)},__decorate([s],e)}(n.ISpineCtrl));o.ManSpineCtrl=c,cc._RF.pop()},{"./ISpineCtrl":"ISpineCtrl"}],NodePool:[function(t,e,o){"use strict";cc._RF.push(e,"9a3d1sFYf9DKY0rG83NUPfQ","NodePool"),Object.defineProperty(o,"__esModule",{value:!0}),o.NodePool=void 0;var n=function(){function t(){this.list=null,this.list=new Array}return t.prototype.put=function(t){t.parent=null,this.list.push(t)},t.prototype.get=function(){return this.list.shift()},t.prototype.getRand=function(){var t=Math.floor(Math.random()*this.list.length);return this.list.splice(t,1)[0]},t.prototype.size=function(){return this.list.length},t.prototype.clear=function(){this.list.forEach(function(t){t.destroy()}),this.list=[]},t}();o.NodePool=n,cc._RF.pop()},{}],SceneController:[function(t,e,o){"use strict";cc._RF.push(e,"206a2cG06ZKOKwnv8d6V5nj","SceneController"),Object.defineProperty(o,"__esModule",{value:!0}),o.SceneController=void 0;var n=function(){function t(){this.mSceneState=null,this.isLoadComplete=!1,this.isRunStart=!1}return t.prototype.setState=function(t,e){var o=this;void 0===e&&(e=!0),null!=this.mSceneState&&this.mSceneState.stateEnd(),this.mSceneState=t,e?(this.isLoadComplete=!1,cc.director.loadScene(this.mSceneState.getSceneName(),function(){o.isLoadComplete=!0}),this.isRunStart=!1):(this.mSceneState.stateStart(),this.isRunStart=!0,this.isLoadComplete=!0)},t.prototype.stateUpdate=function(){this.isLoadComplete&&(this.isRunStart||(this.mSceneState.stateStart(),this.isRunStart=!0),null!=this.mSceneState&&this.mSceneState.stateUpdate())},t.prototype.stateEnd=function(){this.mSceneState.stateEnd()},t}();o.SceneController=n,cc._RF.pop()},{}],Shake:[function(t,e,o){"use strict";cc._RF.push(e,"c270eGw/yhGqYKidfLBbDha","Shake"),Object.defineProperty(o,"__esModule",{value:!0}),o.Shake=void 0;var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._initial_x=0,e._initial_y=0,e._strength_x=0,e._strength_y=0,e}return __extends(e,t),e.create=function(t,o,n){var i=new e;return i.initWithDuration(t,o,n),i},e.prototype.initWithDuration=function(t,e,o){return cc.ActionInterval.prototype.initWithDuration.apply(this,arguments),this._strength_x=e,this._strength_y=o,!0},e.prototype.fgRangeRand=function(t,e){return Math.random()*(e-t)+t},e.prototype.update=function(){var t=this.fgRangeRand(-this._strength_x,this._strength_x),e=this.fgRangeRand(-this._strength_y,this._strength_y);this.getTarget().setPosition(t+this._initial_x,e+this._initial_y)},e.prototype.startWithTarget=function(t){cc.ActionInterval.prototype.startWithTarget.apply(this,arguments),this._initial_x=t.x,this._initial_y=t.y},e.prototype.stop=function(){this.getTarget().setPosition(new cc.Vec2(this._initial_x,this._initial_y)),cc.ActionInterval.prototype.stop.apply(this)},e}(cc.ActionInterval);o.Shake=n,cc._RF.pop()},{}],UISystem:[function(t,e,o){"use strict";cc._RF.push(e,"4c2545EcHtBQo9WvGyZWaqj","UISystem"),Object.defineProperty(o,"__esModule",{value:!0}),o.UISystem=void 0;var n=t("./ISystem"),i=t("../uiSystem/IUIBase"),s=t("../sceneState/startScene/startExterior"),c=t("../GameLoop"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mMaskLayer=null,e}return __extends(e,t),e.prototype.sysInit=function(){this.initLayer(),this.dict=new Map},e.prototype.initLayer=function(){for(var t in this.uiLayer=cc.find("Canvas/UILayer"),this.mMaskLayer=cc.find("funcPanel/mask",this.uiLayer),null==this.uiLayer&&console.error("UISystem.initLayer fail, uiLayer is null!"),this.layerDict=new Map,i.PanelLayer)this.layerDict.set(t,this.uiLayer.getChildByName(t))},e.prototype.openPanel=function(t,e,o){var n=this;if(null==this.dict.get(e)){this.openMask();var i=this.uiLayer.addComponent(t);i.init(o),this.dict.set(e,i),cc.loader.loadRes(i.getSkinPath(),cc.Prefab,function(t,e){if(t)console.log(t);else{null==e&&console.error("UISys.openPanel fail, skin is null, skinPath = "+i.getSkinPath()),i.skin=cc.instantiate(e),i.initStrategy();var o=n.layerDict.get(i.layer);i.skin.setParent(o),i.open()}})}},e.prototype.closePanel=function(t){var e=this,o=this.dict.get(t);null!=o&&(this.closeMask(),o.Close(function(){e.closeEndHandle(o)}))},e.prototype.closeEndHandle=function(t){t.skin.destroy(),this.uiLayer.removeComponent(t),this.dict.delete(t.getSkinName())},e.prototype.openMask=function(){0==this.dict.size&&(this.mMaskLayer.active=!0,-1==c.GameLoop.getInstance().currIndex&&s.startExterior.getInstance().hideUI())},e.prototype.closeMask=function(){this.dict.size<=1&&(this.mMaskLayer.active=!1,-1==c.GameLoop.getInstance().currIndex&&s.startExterior.getInstance().showUI())},e}(n.ISystem);o.UISystem=a,cc._RF.pop()},{"../GameLoop":"GameLoop","../sceneState/startScene/startExterior":"startExterior","../uiSystem/IUIBase":"IUIBase","./ISystem":"ISystem"}],WomanSpineCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"a49e43kjIRCDrtuOFovtI15","WomanSpineCtrl"),Object.defineProperty(o,"__esModule",{value:!0}),o.WomanSpineCtrl=void 0;var n=t("./ISpineCtrl"),i=cc._decorator,s=i.ccclass,c=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.start=function(){this._setMix("nvren_pao","nvren_tiao",.2),this._setMix("nvren_pao","nvren_xiatan",.1),this._setMix("nvren__motuocherun","nvren_motuochetiao",.2),this._setMix("nvren__motuocherun","nvren_motuochexiahua",.1)},e.prototype.jump=function(){this.spine.setAnimation(0,"nvren_tiao",!1),t.prototype.jump.call(this)},e.prototype.squat=function(){this.spine.setAnimation(0,"nvren_xiatan",!0),t.prototype.squat.call(this)},e.prototype.run=function(){"nvren_pao"!=this.spine.animation&&(this.spine.setAnimation(0,"nvren_pao",!0),t.prototype.run.call(this))},e.prototype.motuo_jump=function(){this.spine.setAnimation(0,"nvren_motuochetiao",!1),t.prototype.motuo_jump.call(this)},e.prototype.motuo_squat=function(){this.spine.setAnimation(0,"nvren_motuochexiahua",!1),t.prototype.motuo_squat.call(this)},e.prototype.motuo_run=function(){this.spine.setAnimation(0,"nvren__motuocherun",!0),t.prototype.motuo_run.call(this)},__decorate([s],e)}(n.ISpineCtrl));o.WomanSpineCtrl=c,cc._RF.pop()},{"./ISpineCtrl":"ISpineCtrl"}],accountsPanel:[function(t,e,o){"use strict";cc._RF.push(e,"a68b4hC5YZLVLyDpKskzmmz","accountsPanel"),Object.defineProperty(o,"__esModule",{value:!0}),o.accountsPanel=void 0;var n=t("./IUIBase"),i=t("./openAction/IOpenStrategy"),s=t("../GameLoop"),c=t("../comms/AudioManager"),a=t("./loadPanel"),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.buildNode=null,e.socre=null,e.title=null,e.backBtn=null,e.againBtn=null,e.posterBtn=null,e.shareBtn=null,e.scoreLa=null,e}return __extends(e,t),e.prototype.initStrategy=function(){this.mOpenStrategy=new i.strateC(this.skin)},e.prototype.init=function(e){t.prototype.init.call(this,e),this.skinPath="accountsPanel",this.layer=n.PanelLayer.funcPanel},e.prototype.onShowing=function(){t.prototype.onShowing.call(this),this.initComponent()},e.prototype.initComponent=function(){var t=this;this.content=cc.find("content",this.skin),this.buildNode=cc.find("build",this.skin),this.socre=cc.find("right/score",this.skin),this.title=this.socre.children[0].getComponent(cc.Sprite),this.backBtn=cc.find("btn_back",this.skin),this.againBtn=cc.find("right/btn_again",this.skin),this.posterBtn=cc.find("right/btn_poster",this.skin),this.shareBtn=cc.find("right/btn_share",this.skin),this.scoreLa=cc.find("scoreLa",this.socre).getComponent(cc.Label),this.scoreLa.string=""+this.args[1],cc.loader.loadRes("imgs/lv"+(s.GameLoop.getInstance().currIndex+1),cc.SpriteFrame,function(e,o){t.buildNode.getComponent(cc.Sprite).spriteFrame=o}),cc.loader.loadRes("imgs/title_"+(s.GameLoop.getInstance().currIndex+1),cc.SpriteFrame,function(e,o){t.title.spriteFrame=o}),cc.loader.loadRes("imgs/content_"+(s.GameLoop.getInstance().currIndex+1),cc.SpriteFrame,function(e,o){t.content.getComponent(cc.Sprite).spriteFrame=o}),this.args[2]&&(2==s.GameLoop.getInstance().currIndex?cc.loader.loadRes("imgs/btn_return",cc.SpriteFrame,function(e,o){t.againBtn.getComponent(cc.Sprite).spriteFrame=o}):cc.loader.loadRes("imgs/btn_continue",cc.SpriteFrame,function(e,o){t.againBtn.getComponent(cc.Sprite).spriteFrame=o})),this.onBtnEvent(),c.AudioManager.getInstance().playBGM(c.AudioType.BGM_CAT)},e.prototype.onShowed=function(){t.prototype.onShowed.call(this),this.showAction()},e.prototype.onBtnEvent=function(){this.backBtn.on("touchend",this.onBackBtn,this),this.againBtn.on("touchend",this.onAgainBtn,this),this.posterBtn.on("touchend",this.onPosterBtn,this),this.shareBtn.on("touchend",this.onShareBtn,this)},e.prototype.showAction=function(){this.content.y-=100,this.backBtn.x+=100,this.againBtn.x-=100,this.posterBtn.x+=100,this.shareBtn.y-=100,this.backBtn.runAction(this.commAction(-100,0)),this.content.runAction(this.commAction(0,100,.2)),this.socre.runAction(cc.spawn(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.fadeIn(.2))),this.againBtn.runAction(this.commAction(100,0,.4)),this.posterBtn.runAction(this.commAction(-100,0,.6)),this.shareBtn.runAction(this.commAction(0,100,.8)),this.buildNode.runAction(cc.spawn(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.fadeIn(.2)))},e.prototype.commAction=function(t,e,o){return cc.sequence(cc.delayTime(o),cc.spawn(cc.moveBy(.3,cc.v2(t,e)).easing(cc.easeBackOut()),cc.fadeIn(.3)))},e.prototype.onBackBtn=function(){s.GameLoop.getInstance().gotoStartScene(),c.AudioManager.getInstance().playSound(c.AudioType.CLICK)},e.prototype.onAgainBtn=function(){this.args[2]?2==s.GameLoop.getInstance().currIndex?this.args[0].uiMgr.openPanel(a.loadPanel,"loadPanel",["01startScene",this.args[0]]):(s.GameLoop.getInstance().currIndex=(s.GameLoop.getInstance().currIndex+1)%3,this.args[0].uiMgr.openPanel(a.loadPanel,"loadPanel",["0"+(s.GameLoop.getInstance().currIndex+1)+"level",this.args[0]])):0==s.GameLoop.getInstance().currIndex?this.args[0].uiMgr.openPanel(a.loadPanel,"loadPanel",["01level",this.args[0],1]):1==s.GameLoop.getInstance().currIndex?this.args[0].uiMgr.openPanel(a.loadPanel,"loadPanel",["02level",this.args[0],1]):this.args[0].uiMgr.openPanel(a.loadPanel,"loadPanel",["03level",this.args[0],1])},e.prototype.onShareBtn=function(){console.log("onShareBtn"),null!=s.GameLoop.getInstance().platform&&s.GameLoop.getInstance().platform.shareAppMessage()},e.prototype.onPosterBtn=function(){null!=s.GameLoop.getInstance().platform&&s.GameLoop.getInstance().platform.saveFile(s.GameLoop.getInstance().currIndex+1,this.scoreLa.string)},e.prototype.onDestroy=function(){this.backBtn.off("touchend",this.onBackBtn,this),this.againBtn.off("touchend",this.onAgainBtn,this),this.posterBtn.off("touchend",this.onPosterBtn,this),this.shareBtn.off("touchend",this.onShareBtn,this)},e}(n.IUIBase);o.accountsPanel=r,cc._RF.pop()},{"../GameLoop":"GameLoop","../comms/AudioManager":"AudioManager","./IUIBase":"IUIBase","./loadPanel":"loadPanel","./openAction/IOpenStrategy":"IOpenStrategy"}],changeRankPanel:[function(t,e,o){"use strict";cc._RF.push(e,"b7211CYDyBBap0EVObbmhFg","changeRankPanel"),Object.defineProperty(o,"__esModule",{value:!0}),o.changeRankPanel=void 0;var n=t("./IUIBase"),i=t("../sceneState/startScene/startExterior"),s=t("../comms/AudioManager"),c=t("../GameLoop"),a=t("./openAction/IOpenStrategy"),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.closeBtn=null,e.wxSubContextView=null,e}return __extends(e,t),e.prototype.initStrategy=function(){this.mOpenStrategy=new a.strateA(this.skin)},e.prototype.init=function(e){t.prototype.init.call(this,e),this.skinPath="changeRankPanel",this.layer=n.PanelLayer.funcPanel},e.prototype.onShowed=function(){this.initComponent()},e.prototype.initComponent=function(){this.closeBtn=cc.find("close_btn",this.skin),this.wxSubContextView=cc.find("rankPanel/context",this.skin).getComponent(cc.WXSubContextView),this.closeBtn.on("touchend",this.onCloseBtn,this),null!=c.GameLoop.getInstance().platform&&(this.wxSubContextView.enabled=!0,c.GameLoop.getInstance().platform.postMessageToOpenDataContext({k:"s_33"}))},e.prototype.onCloseBtn=function(){i.startExterior.getInstance().uiSys.closePanel(this.getSkinName()),s.AudioManager.getInstance().playSound(s.AudioType.CLICK)},e.prototype.onDestroy=function(){this.closeBtn.off("touchend",this.onCloseBtn,this)},e}(n.IUIBase);o.changeRankPanel=r,cc._RF.pop()},{"../GameLoop":"GameLoop","../comms/AudioManager":"AudioManager","../sceneState/startScene/startExterior":"startExterior","./IUIBase":"IUIBase","./openAction/IOpenStrategy":"IOpenStrategy"}],desPanel:[function(t,e,o){"use strict";cc._RF.push(e,"377dcr44VtLMoWc7V/4wALF","desPanel"),Object.defineProperty(o,"__esModule",{value:!0}),o.desPanel=void 0;var n=t("./IUIBase"),i=t("../sceneState/startScene/startExterior"),s=t("../comms/AudioManager"),c=t("./openAction/IOpenStrategy"),a=cc._decorator,r=a.ccclass,l=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.closeBtn=null,e}return __extends(e,t),e.prototype.initStrategy=function(){this.mOpenStrategy=new c.strateA(this.skin)},e.prototype.init=function(e){t.prototype.init.call(this,e),this.skinPath="desPanel",this.layer=n.PanelLayer.funcPanel},e.prototype.onShowed=function(){this.initComponent()},e.prototype.initComponent=function(){this.closeBtn=cc.find("btn_close",this.skin),this.closeBtn.on("touchend",this.onCloseBtn,this)},e.prototype.onCloseBtn=function(){i.startExterior.getInstance().uiSys.closePanel(this.getSkinName()),s.AudioManager.getInstance().playSound(s.AudioType.CLICK)},e.prototype.onDestroy=function(){this.closeBtn.off("touchend",this.onCloseBtn,this)},__decorate([r],e)}(n.IUIBase));o.desPanel=l,cc._RF.pop()},{"../comms/AudioManager":"AudioManager","../sceneState/startScene/startExterior":"startExterior","./IUIBase":"IUIBase","./openAction/IOpenStrategy":"IOpenStrategy"}],destroyCheck:[function(t,e,o){"use strict";cc._RF.push(e,"df305Ga339JUZC4G+X/7laB","destroyCheck"),Object.defineProperty(o,"__esModule",{value:!0}),o.destroyCheck=void 0;var n=cc._decorator,i=n.ccclass,s=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=0,e.checkInterval=3,e}return __extends(e,t),e.prototype.update=function(){var t=this;if(this.checkInterval--,this.checkInterval<0){if(0==this.node.children.length)return void this.node.destroy();this.node.children.forEach(function(e){0==t.type?e.convertToWorldSpaceAR(cc.v2(0,0)).x+e.width*(1-e.anchorX)*e.scaleX+("room"==e.name?800:0)<0&&e.destroy():e.convertToWorldSpaceAR(cc.v2(0,0)).x+.5*e.width<-100&&e.destroy()}),this.checkInterval=3}},__decorate([s({type:cc.Float})],e.prototype,"type",void 0),__decorate([i],e)}(cc.Component);o.destroyCheck=c,cc._RF.pop()},{}],explosion:[function(t,e,o){"use strict";cc._RF.push(e,"3eb303shlRFILmv8Qp6t3Q/","explosion"),Object.defineProperty(o,"__esModule",{value:!0}),o.explosion=void 0;var n=cc._decorator,i=n.ccclass,s=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sp=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.sp=this.getComponent(sp.Skeleton)},e.prototype.play=function(t){this.node.setPosition(t),this.sp.setAnimation(0,"animation",!1)},__decorate([i],e)}(cc.Component));o.explosion=s,cc._RF.pop()},{}],glod:[function(t,e,o){"use strict";cc._RF.push(e,"8d89fJwbkBHR7fg1SsANl5a","glod"),Object.defineProperty(o,"__esModule",{value:!0}),o.glod=void 0;var n=t("./IGoldAction"),i=cc._decorator,s=i.ccclass,c=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.index=0,e}return __extends(e,t),e.prototype.start=function(){this.init()},e.prototype.init=function(){var t=this,e=Math.random();this.index=e>.9?0:e>.65?1:2,this.node.children.forEach(function(e){var o=e.getComponent(n.IGoldAction);o&&o.setGoldId(t.index)})},__decorate([s],e)}(cc.Component));o.glod=c,cc._RF.pop()},{"./IGoldAction":"IGoldAction"}],goldAction:[function(t,e,o){"use strict";cc._RF.push(e,"0a7220aw2tFbIZbcnwMCBNK","goldAction"),Object.defineProperty(o,"__esModule",{value:!0}),o.goldAction=void 0;var n=t("./IGoldAction"),i=cc._decorator,s=i.ccclass,c=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goldSpList=[],e.goldId=0,e.score=0,e}return __extends(e,t),e.prototype.setGoldId=function(t){this.node.getComponent(cc.Sprite).spriteFrame=this.goldSpList[t],this.goldId=t,0==this.goldId?this.score=50:1==this.goldId?this.score=20:this.score=10},e.prototype.action=function(){this.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.4,0,1),cc.scaleTo(.4,1,1))))},__decorate([c({type:[cc.SpriteFrame]})],e.prototype,"goldSpList",void 0),__decorate([s],e)}(n.IGoldAction);o.goldAction=a,cc._RF.pop()},{"./IGoldAction":"IGoldAction"}],levelThreeExterior:[function(t,e,o){"use strict";cc._RF.push(e,"fe047zK31FGvouYHH6p2LtE","levelThreeExterior"),Object.defineProperty(o,"__esModule",{value:!0}),o.levelThreeExterior=void 0;var n=t("../../systems/UISystem"),i=t("../../GameLoop"),s=t("../01level/bgModule/LayerRun"),c=t("../../uiSystem/accountsPanel"),a=t("../../comms/AudioManager"),r=t("./FlyCtrl"),l=t("../../comms/EventManager"),p=t("../../other/goldAction"),u=t("../../other/scoreTip"),h=function(){function t(){this.lvThreeState=null,this.uiMgr=null,this.pyCtrl=null,this.heartNum=3,this.score=0,this.heart=null,this.scoreLa=null,this.heartLess=null,this.isGamePause=!1,this.obsType=new Array,this.scoreTipPool=null,this.preScoreTip=null,this.goldPool=null,this.preGold=null,this.init()}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.endInstance=function(){this._instance=null},t.prototype.init=function(){this.initComponent()},t.prototype.initComponent=function(){var t=this;this.uiMgr=new n.UISystem,this.uiMgr.sysInit(),this.createRole(),this.heart=cc.find("Canvas/UILayer/uiElement/heart"),this.scoreLa=cc.find("Canvas/UILayer/uiElement/score").getComponent(cc.Label),this.heartLess=cc.find("Canvas/run_layer/player_layer/heart_less"),this.scoreTipPool=new cc.NodePool,cc.loader.loadRes("prefabs/glods/scoreTip",cc.Prefab,function(e,o){t.preScoreTip=o,t.scoreTipPool.put(cc.instantiate(o)),t.scoreTipPool.put(cc.instantiate(o))}),this.goldPool=new cc.NodePool,cc.loader.loadRes("prefabs/glods/goldPre",cc.Prefab,function(e,o){t.preGold=o,t.goldPool.put(cc.instantiate(o)),t.goldPool.put(cc.instantiate(o))}),a.AudioManager.getInstance().playBGM(a.AudioType.BGM_3),l.EventManager.getInstance().addEventListener(l.EventType.onHide,this.onHide.bind(this),"levelThreeExterior"),l.EventManager.getInstance().addEventListener(l.EventType.onShow,this.onShow.bind(this),"levelThreeExterior")},t.prototype.createRole=function(){var t=this,e=null;i.GameLoop.getInstance().isMan?cc.loader.loadRes("prefabs/manFly",cc.Prefab,function(o,n){e=cc.instantiate(n),cc.find("Canvas/run_layer/player_layer").addChild(e),t.pyCtrl=e.getComponent(r.FlyCtrl)}):cc.loader.loadRes("prefabs/womanFly",cc.Prefab,function(o,n){e=cc.instantiate(n),cc.find("Canvas/run_layer/player_layer").addChild(e),t.pyCtrl=e.getComponent(r.FlyCtrl)})},t.prototype.onHide=function(){this.isGamePause=!0,this.stop()},t.prototype.onShow=function(){this.isGamePause=!1,this.continue()},t.prototype.setLevelThreeState=function(t){this.lvThreeState=t},t.prototype.gotoStartState=function(){this.lvThreeState.setStartState()},t.prototype.setMainState=function(){this.lvThreeState.setMainState()},t.prototype.setLevel_2State=function(){this.lvThreeState.setLevel_2State()},t.prototype.setLevel_3State=function(){this.lvThreeState.setLevel_3State()},t.prototype.update=function(){this.uiMgr.sysUpdate()},t.prototype.end=function(){this.goldPool.clear(),this.scoreTipPool.clear(),l.EventManager.getInstance().removeEventListenerByTag(l.EventType.onHide,"levelThreeExterior"),l.EventManager.getInstance().removeEventListenerByTag(l.EventType.onShow,"levelThreeExterior"),this.uiMgr.sysRelease(),t.endInstance()},t.prototype.win=function(){a.AudioManager.getInstance().playSound(a.AudioType.WIN),this.uiMgr.openPanel(c.accountsPanel,"accountsPanel",[t.getInstance(),this.score,0!=this.heartNum]),this.uploadScore()},t.prototype.stop=function(){cc.find("Canvas/run_layer").children.forEach(function(t){var e=t.getComponent(s.LayerRun);null!=e&&(e.stop=!0)})},t.prototype.continue=function(){cc.find("Canvas/run_layer").children.forEach(function(t){var e=t.getComponent(s.LayerRun);null!=e&&(e.stop=!1)})},t.prototype.addScore=function(t,e,o){this.score+=t,this.updateScore(),this.showAddScore(t,e),this.getGlodAction(o,e)},t.prototype.updateScore=function(){this.scoreLa.string="Score : "+this.score},t.prototype.showAddScore=function(t,e){var o=this,n=null;null==(n=this.scoreTipPool.size()>0?this.scoreTipPool.get():cc.instantiate(this.preScoreTip)).parent&&cc.director.getScene().addChild(n),n.getComponent(u.scoreTip).setSp(t),n.setPosition(e),n.runAction(cc.sequence(cc.moveBy(.5,cc.v2(0,100)),cc.callFunc(function(){o.scoreTipPool.put(n)})))},t.prototype.getGlodAction=function(t,e){var o=this;if(!(t>2)){var n=null;null==(n=this.goldPool.size()>0?this.goldPool.get():cc.instantiate(this.preGold)).parent&&cc.director.getScene().addChild(n),n.getComponent(p.goldAction).setGoldId(t),n.setPosition(e),n.runAction(cc.sequence(cc.moveTo(.5,this.scoreLa.node.convertToWorldSpaceAR(cc.v2(0,0))).easing(cc.easeIn(1)),cc.callFunc(function(){o.goldPool.put(n)})))}},t.prototype.minusHeart=function(e){this.heartNum--,this.floatHeartLess(e),this.heartNum>=0&&(this.heart.children[this.heartNum].color=cc.Color.GRAY),0==this.heartNum&&(a.AudioManager.getInstance().playSound(a.AudioType.LOST),this.uiMgr.openPanel(c.accountsPanel,"accountsPanel",[t.getInstance(),this.score,0!=this.heartNum]),this.stop(),this.uploadScore())},t.prototype.floatHeartLess=function(t){this.heartLess.setPosition(t),this.heartLess.opacity=0,this.heartLess.runAction(cc.sequence(cc.spawn(cc.moveBy(.5,cc.v2(0,100)),cc.fadeIn(.5)),cc.fadeOut(.5)))},t.prototype.uploadScore=function(t,e){void 0===t&&(t="rank_3"),void 0===e&&(e=""+this.score),null!=i.GameLoop.getInstance().platform&&(console.log("uploadScore"),i.GameLoop.getInstance().platform.setUserCloudStorage([{key:t,value:e}]))},t._instance=null,t}();o.levelThreeExterior=h,cc._RF.pop()},{"../../GameLoop":"GameLoop","../../comms/AudioManager":"AudioManager","../../comms/EventManager":"EventManager","../../other/goldAction":"goldAction","../../other/scoreTip":"scoreTip","../../systems/UISystem":"UISystem","../../uiSystem/accountsPanel":"accountsPanel","../01level/bgModule/LayerRun":"LayerRun","./FlyCtrl":"FlyCtrl"}],levelTwoExterior:[function(t,e,o){"use strict";cc._RF.push(e,"4e172CZR85E7L7wCaNRt1WD","levelTwoExterior"),Object.defineProperty(o,"__esModule",{value:!0}),o.levelTwoExterior=void 0;var n=t("../../systems/UISystem"),i=t("../../uiSystem/accountsPanel"),s=t("../01level/player/playerCtrl"),c=t("../../GameLoop"),a=t("../01level/bgModule/LayerRun"),r=t("../../comms/AudioManager"),l=t("../../comms/EventManager"),p=t("../../other/goldAction"),u=t("../../other/scoreTip"),h=function(){function t(){this.lvTwoState=null,this.uiMgr=null,this.pyCtrl=null,this.heartNum=3,this.score=0,this.heart=null,this.scoreLa=null,this.heartLess=null,this.isGamePause=!1,this.obsType=new Array,this.scoreTipPool=null,this.preScoreTip=null,this.goldPool=null,this.preGold=null,this.init()}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.endInstance=function(){this._instance=null},t.prototype.init=function(){this.initComponent()},t.prototype.initComponent=function(){var t=this;this.uiMgr=new n.UISystem,this.uiMgr.sysInit(),this.createRole(),this.heart=cc.find("Canvas/UILayer/uiElement/heart"),this.scoreLa=cc.find("Canvas/UILayer/uiElement/score").getComponent(cc.Label),this.heartLess=cc.find("Canvas/run_layer/player_layer/heart_less"),this.scoreTipPool=new cc.NodePool,cc.loader.loadRes("prefabs/glods/scoreTip",cc.Prefab,function(e,o){t.preScoreTip=o,t.scoreTipPool.put(cc.instantiate(o)),t.scoreTipPool.put(cc.instantiate(o))}),this.goldPool=new cc.NodePool,cc.loader.loadRes("prefabs/glods/goldPre",cc.Prefab,function(e,o){t.preGold=o,t.goldPool.put(cc.instantiate(o)),t.goldPool.put(cc.instantiate(o))}),r.AudioManager.getInstance().playBGM(r.AudioType.BGM_2),l.EventManager.getInstance().addEventListener(l.EventType.onHide,this.onHide.bind(this),"levelTwoExterior"),l.EventManager.getInstance().addEventListener(l.EventType.onShow,this.onShow.bind(this),"levelTwoExterior")},t.prototype.createRole=function(){var t=this,e=null;c.GameLoop.getInstance().isMan?cc.loader.loadRes("prefabs/manRole",cc.Prefab,function(o,n){e=cc.instantiate(n),cc.find("Canvas/run_layer/player_layer").insertChild(e,0),t.pyCtrl=e.getComponent(s.playerCtrl),t.pyCtrl.state=1}):cc.loader.loadRes("prefabs/womanRole",cc.Prefab,function(o,n){e=cc.instantiate(n),cc.find("Canvas/run_layer/player_layer").insertChild(e,0),t.pyCtrl=e.getComponent(s.playerCtrl),t.pyCtrl.state=1})},t.prototype.onHide=function(){this.isGamePause=!0,this.stop()},t.prototype.onShow=function(){this.isGamePause=!1,this.continue()},t.prototype.setLevelTwoState=function(t){this.lvTwoState=t},t.prototype.gotoStartState=function(){this.lvTwoState.setStartState()},t.prototype.setMainState=function(){this.lvTwoState.setMainState()},t.prototype.setLevel_2State=function(){this.lvTwoState.setLevel_2State()},t.prototype.setLevel_3State=function(){this.lvTwoState.setLevel_3State()},t.prototype.update=function(){this.uiMgr.sysUpdate()},t.prototype.end=function(){this.goldPool.clear(),this.scoreTipPool.clear(),this.uiMgr.sysRelease(),t.endInstance()},t.prototype.offEventSys=function(){l.EventManager.getInstance().removeEventListenerByTag(l.EventType.onHide,"levelTwoExterior"),l.EventManager.getInstance().removeEventListenerByTag(l.EventType.onShow,"levelTwoExterior")},t.prototype.win=function(){r.AudioManager.getInstance().playSound(r.AudioType.WIN),this.uiMgr.openPanel(i.accountsPanel,"accountsPanel",[t.getInstance(),this.score,0!=this.heartNum]),this.uploadScore(),this.offEventSys()},t.prototype.stop=function(){cc.find("Canvas/run_layer").children.forEach(function(t){var e=t.getComponent(a.LayerRun);null!=e&&(e.stop=!0)})},t.prototype.continue=function(){cc.find("Canvas/run_layer").children.forEach(function(t){var e=t.getComponent(a.LayerRun);null!=e&&(e.stop=!1)})},t.prototype.addScore=function(t,e,o){this.score+=t,this.updateScore(),this.showAddScore(t,e),this.getGlodAction(o,e)},t.prototype.updateScore=function(){this.scoreLa.string="Score : "+this.score},t.prototype.showAddScore=function(t,e){var o=this,n=null;null==(n=this.scoreTipPool.size()>0?this.scoreTipPool.get():cc.instantiate(this.preScoreTip)).parent&&cc.director.getScene().addChild(n),n.getComponent(u.scoreTip).setSp(t),n.setPosition(e),n.runAction(cc.sequence(cc.moveBy(.5,cc.v2(0,100)),cc.callFunc(function(){o.scoreTipPool.put(n)})))},t.prototype.getGlodAction=function(t,e){var o=this;if(!(t>2)){var n=null;null==(n=this.goldPool.size()>0?this.goldPool.get():cc.instantiate(this.preGold)).parent&&cc.director.getScene().addChild(n),n.getComponent(p.goldAction).setGoldId(t),n.setPosition(e),n.runAction(cc.sequence(cc.moveTo(.5,this.scoreLa.node.convertToWorldSpaceAR(cc.v2(0,0))).easing(cc.easeIn(1)),cc.callFunc(function(){o.goldPool.put(n)})))}},t.prototype.minusHeart=function(e){this.heartNum--,this.floatHeartLess(e),this.heartNum>=0&&(this.heart.children[this.heartNum].color=cc.Color.GRAY),0==this.heartNum&&(r.AudioManager.getInstance().playSound(r.AudioType.LOST),this.uiMgr.openPanel(i.accountsPanel,"accountsPanel",[t.getInstance(),this.score,0!=this.heartNum]),this.stop(),this.pyCtrl.stop(),this.uploadScore(),this.offEventSys(),l.EventManager.getInstance().dispatchEvent(l.EventType.gameOver))},t.prototype.floatHeartLess=function(t){this.heartLess.setPosition(t),this.heartLess.opacity=0,this.heartLess.runAction(cc.sequence(cc.spawn(cc.moveBy(.5,cc.v2(0,100)),cc.fadeIn(.5)),cc.fadeOut(.5)))},t.prototype.triggerObs=function(t,e){this.obsType.indexOf(e)>=0||(this.obsType.push(e),e>11?this.showObsTip(t,1):this.showObsTip(t,0))},t.prototype.showObsTip=function(t,e){cc.loader.loadRes("prefabs/other/"+(0==e?"dd":"jj"),cc.Prefab,function(e,o){var n=cc.instantiate(o);t.addChild(n),n.setPosition(cc.v2(0,.5*t.height)),n.scale=0,n.runAction(cc.sequence(cc.delayTime(.5),cc.scaleTo(.3,1).easing(cc.easeBackInOut()),cc.delayTime(2),cc.scaleTo(.3,0).easing(cc.easeBackInOut()),cc.callFunc(function(){n.destroy()})))}),cc.loader.loadRes("prefabs/other/"+(0==e?"guide_line_1":"guide_line_2"),cc.Prefab,function(e,o){var n=cc.instantiate(o);t.addChild(n),n.setPosition(cc.v2(0,0)),n.runAction(cc.sequence(cc.blink(.5,3),cc.delayTime(2),cc.fadeOut(.5),cc.callFunc(function(){n.destroy()})))})},t.prototype.uploadScore=function(t,e){void 0===t&&(t="rank_2"),void 0===e&&(e=""+this.score),null!=c.GameLoop.getInstance().platform&&(console.log("uploadScore"),c.GameLoop.getInstance().platform.setUserCloudStorage([{key:t,value:e}]))},t._instance=null,t}();o.levelTwoExterior=h,cc._RF.pop()},{"../../GameLoop":"GameLoop","../../comms/AudioManager":"AudioManager","../../comms/EventManager":"EventManager","../../other/goldAction":"goldAction","../../other/scoreTip":"scoreTip","../../systems/UISystem":"UISystem","../../uiSystem/accountsPanel":"accountsPanel","../01level/bgModule/LayerRun":"LayerRun","../01level/player/playerCtrl":"playerCtrl"}],loadPanel:[function(t,e,o){"use strict";cc._RF.push(e,"5c066LEpO1Mv5gnAqhU4M0n","loadPanel"),Object.defineProperty(o,"__esModule",{value:!0}),o.loadPanel=void 0;var n=t("../uiSystem/IUIBase"),i=t("../uiSystem/openAction/IOpenStrategy"),s=t("../GameLoop"),c=["prefabs/bgModule/01level/01screen_2","prefabs/bgModule/01level/01screen_3","prefabs/bgModule/01level/01screen_4","prefabs/bgModule/01level/01screen_5","prefabs/bgModule/01level/01screen_6","prefabs/bgModule/01level/01screen_7","prefabs/bgModule/01level/01screen_g2","prefabs/bgModule/01level/01screen_g3","prefabs/bgModule/01level/01screen_g4","jsons/bgm_1","prefabs/obstacle/fountain","prefabs/manRole","prefabs/womanRole"],a=["prefabs/bgModule/02level/02screen_2","prefabs/bgModule/02level/02screen_3","prefabs/bgModule/02level/02screen_4","prefabs/bgModule/02level/02screen_5","prefabs/bgModule/02level/02screen_6","prefabs/bgModule/02level/02screen_7","prefabs/bgModule/02level/02screen_8","prefabs/bgModule/02level/02screen_9","prefabs/bgModule/02level/02screen_10","prefabs/bgModule/02level/02screen_11","prefabs/bgModule/02level/02screen_g2","prefabs/bgModule/02level/02screen_g3","prefabs/bgModule/02level/02screen_g4","prefabs/manRole","prefabs/womanRole"],r=["prefabs/bgModule/03level/screen_2","prefabs/bgModule/03level/screen_3","prefabs/bgModule/03level/screen_4","prefabs/bgModule/03level/screen_5","prefabs/bgModule/03level/screen_6","prefabs/bgModule/03level/screen_7","prefabs/manFly","prefabs/womanFly"],l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pro=null,e.mark=null,e.txt=null,e.loadScene="",e.speed=.5,e.currPro=0,e.maxPro=0,e.isComplete=!1,e.isAlreadyLoadScene=!1,e}return __extends(e,t),e.prototype.initStrategy=function(){this.mOpenStrategy=new i.strateC(this.skin)},e.prototype.init=function(e){t.prototype.init.call(this,e),this.skinPath="loadPanel",this.layer=n.PanelLayer.funcPanel},e.prototype.update=function(t){if(this.isComplete&&this.currPro>=1){if(this.isAlreadyLoadScene)return;this.isAlreadyLoadScene=!0,"01level"==this.loadScene?this.args[1].setMainState():"02level"==this.loadScene?this.args[1].setLevel_2State():"03level"==this.loadScene?this.args[1].setLevel_3State():"01startScene"==this.loadScene&&this.args[1].gotoStartState()}this.currPro<this.maxPro&&(this.currPro+=t*this.speed,this.pro.fillRange=this.currPro,this.mark.x=this.pro.node.width*this.pro.fillRange,this.txt.string=(100*this.pro.fillRange).toFixed(2)+"%")},e.prototype.onShowing=function(){t.prototype.onShowing.call(this),this.initComponent()},e.prototype.initComponent=function(){this.pro=cc.find("pro/bar",this.skin).getComponent(cc.Sprite),this.mark=cc.find("pro/bar/mark",this.skin),this.txt=this.mark.getComponentInChildren(cc.Label),this.args&&null!=this.args[2]&&(this.speed=this.args[2])},e.prototype.onShowed=function(){this.load(this.args[0])},e.prototype.load=function(t){this.loadScene=t,cc.director.preloadScene(t,this.onProgress.bind(this),this.complete.bind(this))},e.prototype.onProgress=function(t,e){t/e>this.maxPro&&(this.maxPro=t/e)},e.prototype.complete=function(){"01level"==this.loadScene?cc.loader.loadResArray(c,this.loadResProgress.bind(this),this.loadResComplete.bind(this)):"02level"==this.loadScene?cc.loader.loadResArray(a,this.loadResProgress.bind(this),this.loadLevel_2Complete.bind(this)):"03level"==this.loadScene?cc.loader.loadResArray(r,this.loadResProgress.bind(this),this.loadLevel_3Complete.bind(this)):"01startScene"==this.loadScene&&(s.GameLoop.getInstance().buildNode=[],s.GameLoop.getInstance().groundNode=[],this.isComplete=!0)},e.prototype.loadResProgress=function(t,e){t/e>this.maxPro&&(this.maxPro=t/e)},e.prototype.loadResComplete=function(t,e){var o=0;for(s.GameLoop.getInstance().buildNode.push(cc.instantiate(e[0]));o<3;){for(var n=1;n<4;n++)s.GameLoop.getInstance().buildNode.push(cc.instantiate(e[n]));o++}for(s.GameLoop.getInstance().buildNode.push(cc.instantiate(e[4])),s.GameLoop.getInstance().buildNode.push(cc.instantiate(e[5])),o=0;o<3;){for(n=6;n<8;n++)s.GameLoop.getInstance().groundNode.push(cc.instantiate(e[n]));o++}s.GameLoop.getInstance().groundNode.push(cc.instantiate(e[8])),this.isComplete=!0},e.prototype.loadLevel_2Complete=function(t,e){var o=0;e.forEach(function(t){o<9&&s.GameLoop.getInstance().buildNode.push(cc.instantiate(t)),o++}),o=0,e.forEach(function(t){o<9&&s.GameLoop.getInstance().buildNode.push(cc.instantiate(t)),o++}),s.GameLoop.getInstance().buildNode.push(cc.instantiate(e[9])),this.isComplete=!0},e.prototype.loadLevel_3Complete=function(t,e){var o=0;e.forEach(function(t){o<5&&s.GameLoop.getInstance().buildNode.push(cc.instantiate(t)),o++}),o=0,e.forEach(function(t){o<5&&s.GameLoop.getInstance().buildNode.push(cc.instantiate(t)),o++}),s.GameLoop.getInstance().buildNode.push(cc.instantiate(e[5])),this.isComplete=!0},__decorate([p],e)}(n.IUIBase));o.loadPanel=u,cc._RF.pop()},{"../GameLoop":"GameLoop","../uiSystem/IUIBase":"IUIBase","../uiSystem/openAction/IOpenStrategy":"IOpenStrategy"}],loading:[function(t,e,o){"use strict";cc._RF.push(e,"34e4epV89FAl6ww7OGAkRCr","loading"),Object.defineProperty(o,"__esModule",{value:!0}),o.loading=void 0;var n=cc._decorator,i=n.ccclass,s=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bar=null,e.mark=null,e.txt=null,e.nextScene="01startScene",e.currPro=0,e.maxPro=0,e.isComplete=!1,e.isAlreadyLoadScene=!1,e}return __extends(e,t),e.prototype.start=function(){this.load()},e.prototype.update=function(t){if(this.isComplete&&this.currPro>=1){if(this.isAlreadyLoadScene)return;this.isAlreadyLoadScene=!0,cc.director.loadScene(this.nextScene)}this.currPro<this.maxPro&&(this.currPro+=.5*t,this.bar.fillRange=this.currPro,this.mark.x=this.bar.node.width*this.bar.fillRange,this.txt.string=(100*this.bar.fillRange).toFixed(2)+"%")},e.prototype.load=function(){cc.director.preloadScene(this.nextScene,this.onProgress.bind(this),this.complete.bind(this))},e.prototype.onProgress=function(t,e){t/e>this.maxPro&&(this.maxPro=t/e)},e.prototype.complete=function(){cc.loader.loadResDir("prefabs/uiPanels",this.onProgress.bind(this),this.completePres.bind(this))},e.prototype.completePres=function(){cc.loader.loadResDir("imgs",this.onProgress.bind(this),this.completeImgs.bind(this))},e.prototype.completeImgs=function(){this.isComplete=!0},__decorate([s({type:cc.Sprite,tooltip:"\u8fdb\u5ea6\u6761"})],e.prototype,"bar",void 0),__decorate([s({type:cc.Node,tooltip:"\u8fdb\u5ea6\u6807\u8bb0"})],e.prototype,"mark",void 0),__decorate([s({type:cc.Label,tooltip:"\u8fdb\u5ea6\u663e\u793a"})],e.prototype,"txt",void 0),__decorate([s({tooltip:"\u52a0\u8f7d\u7684\u4e0b\u4e00\u4e2a\u573a\u666f"})],e.prototype,"nextScene",void 0),__decorate([i],e)}(cc.Component);o.loading=c,cc._RF.pop()},{}],mainExterior:[function(t,e,o){"use strict";cc._RF.push(e,"2d9aap2+UtIM4UJ/NUbt7kc","mainExterior"),Object.defineProperty(o,"__esModule",{value:!0}),o.mainExterior=void 0;var n=t("../../systems/UISystem"),i=t("./bgModule/LayerRun"),s=t("./player/playerCtrl"),c=t("../../GameLoop"),a=t("../../uiSystem/accountsPanel"),r=t("../../comms/AudioManager"),l=t("../../comms/EventManager"),p=t("../../other/goldAction"),u=t("../../other/scoreTip"),h=function(){function t(){this.mainState=null,this.uiMgr=null,this.pyCtrl=null,this.heartNum=3,this.score=0,this.isGameOver=!1,this.isGamePause=!1,this.heart=null,this.scoreLa=null,this.heartLess=null,this.zoomTimes=0,this.runLayer=null,this.obsType=new Array,this.scoreTipPool=null,this.preScoreTip=null,this.goldPool=null,this.preGold=null,this.init()}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.endInstance=function(){this._instance=null},t.prototype.init=function(){this.initComponent()},t.prototype.initComponent=function(){var t=this;this.uiMgr=new n.UISystem,this.uiMgr.sysInit(),this.createRole(),this.heart=cc.find("Canvas/UILayer/uiElement/heart"),this.scoreLa=cc.find("Canvas/UILayer/uiElement/score").getComponent(cc.Label),this.heartLess=cc.find("Canvas/run_layer/player_layer/heart_less"),this.runLayer=cc.find("Canvas/run_layer"),this.scoreTipPool=new cc.NodePool,cc.loader.loadRes("prefabs/glods/scoreTip",cc.Prefab,function(e,o){t.preScoreTip=o,t.scoreTipPool.put(cc.instantiate(o)),t.scoreTipPool.put(cc.instantiate(o))}),this.goldPool=new cc.NodePool,cc.loader.loadRes("prefabs/glods/goldPre",cc.Prefab,function(e,o){t.preGold=o,t.goldPool.put(cc.instantiate(o)),t.goldPool.put(cc.instantiate(o))}),l.EventManager.getInstance().addEventListener(l.EventType.zoomTrigger,this.onZoomTrigger.bind(this),"mainExterior"),l.EventManager.getInstance().addEventListener(l.EventType.onHide,this.onHide.bind(this),"mainExterior"),l.EventManager.getInstance().addEventListener(l.EventType.onShow,this.onShow.bind(this),"mainExterior"),r.AudioManager.getInstance().playBGM(r.AudioType.BGM_1)},t.prototype.createRole=function(){var t=this,e=null;c.GameLoop.getInstance().isMan?cc.loader.loadRes("prefabs/manRole",cc.Prefab,function(o,n){e=cc.instantiate(n),cc.find("Canvas/run_layer/player_layer").insertChild(e,0),t.pyCtrl=e.getComponent(s.playerCtrl)}):cc.loader.loadRes("prefabs/womanRole",cc.Prefab,function(o,n){e=cc.instantiate(n),cc.find("Canvas/run_layer/player_layer").insertChild(e,0),t.pyCtrl=e.getComponent(s.playerCtrl)})},t.prototype.setLevel_1State=function(t){this.mainState=t},t.prototype.gotoStartState=function(){this.mainState.setStartState()},t.prototype.setMainState=function(){this.mainState.setMainState()},t.prototype.setLevel_2State=function(){this.mainState.setLevel_2State()},t.prototype.setLevel_3State=function(){this.mainState.setLevel_3State()},t.prototype.update=function(){this.uiMgr.sysUpdate()},t.prototype.end=function(){this.goldPool.clear(),this.scoreTipPool.clear(),this.uiMgr.sysRelease(),l.EventManager.getInstance().removeEventListenerByTag(l.EventType.zoomTrigger,"mainExterior"),t.endInstance()},t.prototype.offEventSys=function(){l.EventManager.getInstance().removeEventListenerByTag(l.EventType.onHide,"mainExterior"),l.EventManager.getInstance().removeEventListenerByTag(l.EventType.onShow,"mainExterior")},t.prototype.onZoomTrigger=function(){this.zoomTimes++,this.zoomTimes>2&&this.zoomIn()},t.prototype.onHide=function(){this.isGamePause=!0,this.stop()},t.prototype.onShow=function(){this.isGamePause=!1,this.continue()},t.prototype.addScore=function(t,e,o){this.score+=t,this.updateScore(),this.showAddScore(t,e),this.getGlodAction(o,e)},t.prototype.updateScore=function(){this.scoreLa.string="Score : "+this.score},t.prototype.showAddScore=function(t,e){var o=this,n=null;null==(n=this.scoreTipPool.size()>0?this.scoreTipPool.get():cc.instantiate(this.preScoreTip)).parent&&cc.director.getScene().addChild(n),n.getComponent(u.scoreTip).setSp(t),n.setPosition(e),n.runAction(cc.sequence(cc.moveBy(.5,cc.v2(0,100)),cc.callFunc(function(){o.scoreTipPool.put(n)})))},t.prototype.getGlodAction=function(t,e){var o=this;if(!(t>2)){var n=null;null==(n=this.goldPool.size()>0?this.goldPool.get():cc.instantiate(this.preGold)).parent&&cc.director.getScene().addChild(n),n.getComponent(p.goldAction).setGoldId(t),n.setPosition(e),n.runAction(cc.sequence(cc.moveTo(.5,this.scoreLa.node.convertToWorldSpaceAR(cc.v2(0,0))).easing(cc.easeIn(1)),cc.callFunc(function(){o.goldPool.put(n)})))}},t.prototype.minusHeart=function(e){this.heartNum--,this.floatHeartLess(e),this.heartNum>=0&&(this.heart.children[this.heartNum].color=cc.Color.GRAY),0==this.heartNum&&(r.AudioManager.getInstance().playSound(r.AudioType.LOST),this.uiMgr.openPanel(a.accountsPanel,"accountsPanel",[t.getInstance(),this.score,0!=this.heartNum]),this.isGameOver=!0,this.stop(),this.pyCtrl.stop(),this.uploadScore(),this.offEventSys(),l.EventManager.getInstance().dispatchEvent(l.EventType.gameOver))},t.prototype.floatHeartLess=function(t){this.heartLess.setPosition(t),this.heartLess.opacity=0,this.heartLess.runAction(cc.sequence(cc.spawn(cc.moveBy(.5,cc.v2(0,100)),cc.fadeIn(.5)),cc.fadeOut(.5)))},t.prototype.triggerObs=function(t,e){this.obsType.indexOf(e)>=0||(this.obsType.push(e),e>11?this.showObsTip(t,1):this.showObsTip(t,0))},t.prototype.showObsTip=function(t,e){cc.loader.loadRes("prefabs/other/"+(0==e?"dd":"jj"),cc.Prefab,function(e,o){var n=cc.instantiate(o);t.addChild(n),n.setPosition(cc.v2(0,.5*t.height)),n.scale=0,n.runAction(cc.sequence(cc.delayTime(.5),cc.scaleTo(.3,1).easing(cc.easeBackInOut()),cc.delayTime(2),cc.scaleTo(.3,0).easing(cc.easeBackInOut()),cc.callFunc(function(){n.destroy()})))}),cc.loader.loadRes("prefabs/other/"+(0==e?"guide_line_1":"guide_line_2"),cc.Prefab,function(e,o){var n=cc.instantiate(o);t.addChild(n),n.setPosition(cc.v2(0,0)),n.runAction(cc.sequence(cc.blink(.5,3),cc.delayTime(2),cc.fadeOut(.5),cc.callFunc(function(){n.destroy()})))})},t.prototype.win=function(){r.AudioManager.getInstance().playSound(r.AudioType.WIN),this.uiMgr.openPanel(a.accountsPanel,"accountsPanel",[t.getInstance(),this.score,0!=this.heartNum]),this.uploadScore(),this.offEventSys()},t.prototype.zoomIn=function(){cc.find("Canvas/run_layer").runAction(cc.scaleBy(3,.4,.4))},t.prototype.zoomOut=function(){var t=this;cc.find("Canvas/run_layer").runAction(cc.sequence(cc.callFunc(function(){t.setMultiple(.4)}),cc.spawn(cc.scaleTo(3,2.3,2.3),cc.callFunc(function(){t.runLayer.runAction(cc.moveBy(3,cc.v2(0,-300)))})),cc.callFunc(function(){t.setMultiple(2.5)})))},t.prototype.stop=function(){cc.find("Canvas/run_layer").children.forEach(function(t){var e=t.getComponent(i.LayerRun);null!=e&&(e.stop=!0)})},t.prototype.continue=function(){cc.find("Canvas/run_layer").children.forEach(function(t){var e=t.getComponent(i.LayerRun);null!=e&&(e.stop=!1)})},t.prototype.decelerate=function(){var t=cc.find("Canvas/run_layer");t.children[3].getComponent(i.LayerRun).setSpeed(),t.children[5].getComponent(i.LayerRun).setSpeed(),t.children[6].getComponent(i.LayerRun).setSpeed()},t.prototype.setMultiple=function(t){this.pyCtrl.spCtrl._setTimeScale(.4==t?.4:1),cc.find("Canvas/run_layer").children.forEach(function(e){var o=e.getComponent(i.LayerRun);null!=o&&o.setMultiple(t)})},t.prototype.uploadScore=function(t,e){void 0===t&&(t="rank_1"),void 0===e&&(e=""+this.score),null!=c.GameLoop.getInstance().platform&&c.GameLoop.getInstance().platform.setUserCloudStorage([{key:t,value:e}])},t._instance=null,t}();o.mainExterior=h,cc._RF.pop()},{"../../GameLoop":"GameLoop","../../comms/AudioManager":"AudioManager","../../comms/EventManager":"EventManager","../../other/goldAction":"goldAction","../../other/scoreTip":"scoreTip","../../systems/UISystem":"UISystem","../../uiSystem/accountsPanel":"accountsPanel","./bgModule/LayerRun":"LayerRun","./player/playerCtrl":"playerCtrl"}],obsLayerThree:[function(t,e,o){"use strict";cc._RF.push(e,"76268gMQXxEu6QaHmxieRYa","obsLayerThree"),Object.defineProperty(o,"__esModule",{value:!0}),o.obsLayerThree=void 0;var n,i=cc._decorator,s=i.ccclass,c=i.property;(function(t){t[t.two=0]="two",t[t.three=1]="three"})(n||(n={}));var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pres=[],e.lvType=n.two,e.times=null,e.currIndex=1,e.viewWidth=0,e.interval=1,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;cc.loader.loadRes("jsons/bgm_2",cc.JsonAsset,function(e,o){t.times=t.lvType==n.two?o.json.bgm2:o.json.bgm3})},e.prototype.start=function(){this.viewWidth=cc.view.getVisibleSize().width},e.prototype.update=function(){if(null!=this.times&&!(this.currIndex>this.times.length-1||(this.interval-=.0172,this.interval>0))){this.interval=1;var t=400*this.times[this.currIndex].t+600;t- -this.node.x<1.7*this.viewWidth&&(this.createObs(cc.v2(t,this.times[this.currIndex].y)),this.currIndex++)}},e.prototype.createObs=function(t){var e=Math.floor(Math.random()*this.pres.length),o=cc.instantiate(this.pres[e]);this.node.addChild(o),this.lvType==n.two?0==t.y?t.y=60:1==t.y?t.y=188:2==t.y&&(t.y=170):0==t.y?t.y=150:1==t.y?t.y=480:t.y=300,t.y+=.5*o.height,o.setPosition(t)},__decorate([c([cc.Prefab])],e.prototype,"pres",void 0),__decorate([c({type:cc.Enum(n)})],e.prototype,"lvType",void 0),__decorate([s],e)}(cc.Component);o.obsLayerThree=a,cc._RF.pop()},{}],obsLayerTwo:[function(t,e,o){"use strict";cc._RF.push(e,"de534Iij75C2oW5ZtC2Rz7f","obsLayerTwo"),Object.defineProperty(o,"__esModule",{value:!0}),o.obsLayerTwo=void 0;var n=t("../comms/EventManager"),i=t("../comms/NodePool"),s=t("./IGoldAction"),c=cc._decorator,a=c.ccclass,r=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pres=[],e.goldPres=[],e.times=null,e.obsPool=null,e.goldPool=null,e.currIndex=1,e.viewWidth=0,e.interval=1,e.isGameOver=!1,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;cc.loader.loadRes("jsons/bgm_2",cc.JsonAsset,function(e,o){t.times=o.json.bgm2}),n.EventManager.getInstance().addEventListener(n.EventType.addObsPool,this.onObsPool.bind(this),"obsLayerTwo"),n.EventManager.getInstance().addEventListener(n.EventType.addGoldPool,this.onGoldPool.bind(this),"obsLayerTwo"),n.EventManager.getInstance().addEventListener(n.EventType.gameOver,this.gameOver.bind(this),"obsLayerTwo")},e.prototype.onObsPool=function(t){this.isGameOver||this.obsPool.put(t)},e.prototype.onGoldPool=function(t){this.isGameOver||this.goldPool.put(t)},e.prototype.gameOver=function(){this.isGameOver=!0},e.prototype.start=function(){this.viewWidth=cc.view.getVisibleSize().width,this.initPool()},e.prototype.initPool=function(){var t=this;this.obsPool=new i.NodePool,this.goldPool=new i.NodePool,this.pres.forEach(function(e){t.obsPool.put(cc.instantiate(e))}),this.goldPres.forEach(function(e){t.goldPool.put(cc.instantiate(e))})},e.prototype.update=function(){if(null!=this.times&&!(this.currIndex>this.times.length-1||(this.interval-=.0172,this.interval>0))){this.interval=1;var t=400*this.times[this.currIndex].t+600;t- -this.node.x<1.7*this.viewWidth&&(0==this.times[this.currIndex].type?this.createObs(cc.v2(t,this.times[this.currIndex].y)):this.createGold(cc.v2(t,this.times[this.currIndex].y)),this.currIndex++)}},e.prototype.createObs=function(t){var e=null;if(this.obsPool.size()<=0){var o=Math.floor(Math.random()*this.pres.length);e=cc.instantiate(this.pres[o])}else(e=this.obsPool.getRand()).children.forEach(function(t){var e=t.getComponent(s.IGoldAction);e&&e.show()});this.node.addChild(e),0==t.y?t.y=60:1==t.y?t.y=188:2==t.y&&(t.y=170),t.y+=.5*e.height,e.setPosition(t)},e.prototype.createGold=function(t){var e=null;if(this.goldPool.size()<=0){var o=Math.floor(Math.random()*this.goldPres.length);e=cc.instantiate(this.goldPres[o])}else(e=this.goldPool.getRand()).children.forEach(function(t){var e=t.getComponent(s.IGoldAction);e&&e.show()});switch(this.node.addChild(e),t.y){case 0:t.y=60;break;case 1:t.y=100;break;case 2:t.y=140}e.setPosition(t)},e.prototype.onDestroy=function(){this.obsPool.clear(),this.goldPool.clear(),n.EventManager.getInstance().removeEventListenerByTag(n.EventType.addObsPool,"obsLayerTwo"),n.EventManager.getInstance().removeEventListenerByTag(n.EventType.addGoldPool,"obsLayerTwo"),n.EventManager.getInstance().removeEventListenerByTag(n.EventType.gameOver,"obsLayerTwo")},__decorate([r([cc.Prefab])],e.prototype,"pres",void 0),__decorate([r([cc.Prefab])],e.prototype,"goldPres",void 0),__decorate([a],e)}(cc.Component);o.obsLayerTwo=l,cc._RF.pop()},{"../comms/EventManager":"EventManager","../comms/NodePool":"NodePool","./IGoldAction":"IGoldAction"}],obsLayer:[function(t,e,o){"use strict";cc._RF.push(e,"fd94d8pDP1Msoms94drhXbi","obsLayer"),Object.defineProperty(o,"__esModule",{value:!0}),o.obsLayer=void 0;var n=t("../comms/EventManager"),i=t("../comms/NodePool"),s=t("./IGoldAction"),c=cc._decorator,a=c.ccclass,r=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pres=[],e.goldPres=[],e.LastPres=[],e.obsPool=null,e.goldPool=null,e.times=null,e.currIndex=1,e.viewWidth=0,e.interval=1,e.wait=!0,e.isClear=!1,e.isGameOver=!1,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;cc.loader.loadRes("jsons/bgm_1",cc.JsonAsset,function(e,o){t.times=o.json.bgm1}),n.EventManager.getInstance().addEventListener(n.EventType.zoomIn,this.onZoomIn.bind(this),"obsLayer"),n.EventManager.getInstance().addEventListener(n.EventType.addObsPool,this.onObsPool.bind(this),"obsLayer"),n.EventManager.getInstance().addEventListener(n.EventType.addGoldPool,this.onGoldPool.bind(this),"obsLayer"),n.EventManager.getInstance().addEventListener(n.EventType.gameOver,this.gameOver.bind(this),"obsLayer")},e.prototype.onZoomIn=function(){var t=this;this.scheduleOnce(function(){t.wait=!1},1.5)},e.prototype.onObsPool=function(t){this.isClear?t.destroy():this.isGameOver||this.obsPool.put(t)},e.prototype.onGoldPool=function(t){this.isGameOver||this.goldPool.put(t)},e.prototype.gameOver=function(){this.isGameOver=!0},e.prototype.start=function(){this.viewWidth=cc.view.getVisibleSize().width,this.initPool()},e.prototype.initPool=function(){var t=this;this.obsPool=new i.NodePool,this.goldPool=new i.NodePool,this.pres.forEach(function(e){t.obsPool.put(cc.instantiate(e))}),this.goldPres.forEach(function(e){t.goldPool.put(cc.instantiate(e))})},e.prototype.update=function(){if(null!=this.times&&!(this.currIndex>this.times.length-1||(this.interval-=.0172,this.interval>0))){this.interval=1;var t=0;if(this.times[this.currIndex].t<54)t=400*this.times[this.currIndex].t+350;else{if(this.wait)return;t=21950+200*(this.times[this.currIndex].t-54)}t- -this.node.x<1.7*this.viewWidth&&(0==this.times[this.currIndex].type?this.createObs(cc.v2(t,this.times[this.currIndex].y)):this.createGold(cc.v2(t,this.times[this.currIndex].y)),this.currIndex++)}},e.prototype.createObs=function(t){var e=null;if(this.times[this.currIndex].t<54)if(this.obsPool.size()<=0){var o=Math.floor(Math.random()*this.pres.length);e=cc.instantiate(this.pres[o])}else e=this.obsPool.getRand();else this.isClear||(this.obsPool.clear(),this.isClear=!0),this.obsPool.size()<=0?(o=Math.floor(Math.random()*this.LastPres.length),e=cc.instantiate(this.LastPres[o])):e=this.obsPool.getRand();this.node.addChild(e),0==t.y?t.y=60:1==t.y?t.y=188:2==t.y&&(t.y=170),this.times[this.currIndex].t>54?(e.scale=.7,t.y+=.5*e.height*e.scale):t.y+=.5*e.height,e.setPosition(t)},e.prototype.createGold=function(t){var e=null;if(this.goldPool.size()<=0){var o=Math.floor(Math.random()*this.goldPres.length);e=cc.instantiate(this.goldPres[o])}else(e=this.goldPool.getRand()).children.forEach(function(t){var e=t.getComponent(s.IGoldAction);e&&e.show()});switch(this.node.addChild(e),t.y){case 0:t.y=60;break;case 1:t.y=210;break;case 2:t.y=300}e.setPosition(t)},e.prototype.onDestroy=function(){this.obsPool.clear(),this.goldPool.clear(),n.EventManager.getInstance().removeEventListenerByTag(n.EventType.zoomIn,"obsLayer"),n.EventManager.getInstance().removeEventListenerByTag(n.EventType.addObsPool,"obsLayer"),n.EventManager.getInstance().removeEventListenerByTag(n.EventType.addGoldPool,"obsLayer"),n.EventManager.getInstance().removeEventListenerByTag(n.EventType.gameOver,"obsLayer")},__decorate([r([cc.Prefab])],e.prototype,"pres",void 0),__decorate([r([cc.Prefab])],e.prototype,"goldPres",void 0),__decorate([r([cc.Prefab])],e.prototype,"LastPres",void 0),__decorate([a],e)}(cc.Component);o.obsLayer=l,cc._RF.pop()},{"../comms/EventManager":"EventManager","../comms/NodePool":"NodePool","./IGoldAction":"IGoldAction"}],onCultureEvent:[function(t,e,o){"use strict";cc._RF.push(e,"fd260SPit1GjanjBRgq9nZR","onCultureEvent"),Object.defineProperty(o,"__esModule",{value:!0}),o.onCultureEvent=void 0;var n=t("../../../comms/EventManager"),i=cc._decorator,s=i.ccclass,c=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.walls=null,e.obs=null,e}return __extends(e,t),e.prototype.onLoad=function(){n.EventManager.getInstance().addEventListener(n.EventType.zoomIn,this.onZoomIn.bind(this),"onCultureEvent")},e.prototype.onZoomIn=function(){var t=this;this.node.runAction(cc.sequence(cc.delayTime(1.5),cc.callFunc(function(){t.walls.opacity=t.obs.opacity=255})))},e.prototype.onDestroy=function(){n.EventManager.getInstance().removeEventListenerByTag(n.EventType.zoomIn,"onCultureEvent")},__decorate([c({type:cc.Node})],e.prototype,"walls",void 0),__decorate([c({type:cc.Node})],e.prototype,"obs",void 0),__decorate([s],e)}(cc.Component);o.onCultureEvent=a,cc._RF.pop()},{"../../../comms/EventManager":"EventManager"}],packAction:[function(t,e,o){"use strict";cc._RF.push(e,"159dfQ4lhJI+r4wfeWMWHnP","packAction"),Object.defineProperty(o,"__esModule",{value:!0}),o.packAction=void 0;var n=t("./IGoldAction"),i=cc._decorator,s=i.ccclass,c=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),__decorate([s],e)}(n.IGoldAction));o.packAction=c,cc._RF.pop()},{"./IGoldAction":"IGoldAction"}],playerCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"5627cMO/s5HMZwZEr8cSiA1","playerCtrl"),Object.defineProperty(o,"__esModule",{value:!0}),o.playerCtrl=void 0;var n,i=t("../mainExterior"),s=t("./ISpineCtrl"),c=t("../../../comms/CameraShake"),a=t("../../../GameLoop"),r=t("../../../comms/AudioManager"),l=t("../../02level/levelTwoExterior"),p=t("../../../other/smoke"),u=t("../../../other/explosion"),h=t("../../../comms/EventManager"),d=t("../../../other/goldAction"),y=t("../../../other/packAction"),f=cc._decorator,m=f.ccclass,g=f.property;(function(t){t[t.idle=0]="idle",t[t.jump=1]="jump",t[t.down=2]="down",t[t.squat=3]="squat"})(n||(n={}));var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mGravity=0,e.jumpSpeed=0,e.state=0,e.posX=0,e.downSpeed=0,e.maxdownSpeed=0,e.currJumpSpeed=0,e.mPlayerState=n.down,e.collider=null,e.collCount=0,e.obstacleCount=0,e.rightStepNode=null,e.spCtrl=null,e.smokeCtrl=null,e.explosionCtrl=null,e.isUpCol=!1,e.isLeftCol=!1,e.isSquating=!1,e.squatBtn=null,e.jumpBtn=null,e.cameraShake=null,e.isSquat=!1,e.isOver=!1,e.isComplete=!1,e.isGamePause=!1,e.isNeedCheck=!1,e.scorePos=null,e}return __extends(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.spCtrl=this.getComponentInChildren(s.ISpineCtrl),this.squatBtn=cc.find("Canvas/UILayer/uiElement/squat_btn"),this.jumpBtn=cc.find("Canvas/UILayer/uiElement/jump_btn"),this.cameraShake=cc.find("Canvas/Main Camera").getComponent(c.CameraShake),this.smokeCtrl=cc.find("Canvas/run_layer/ground_layer/smoke").getComponent(p.smoke),this.explosionCtrl=cc.find("Canvas/run_layer/ground_layer/explosion").getComponent(u.explosion),this.scorePos=cc.find("Canvas/UILayer/uiElement/score").convertToWorldSpaceAR(cc.v2(0,0))},e.prototype.start=function(){this.posX=this.node.x,this.currJumpSpeed=this.jumpSpeed,this.collider=this.node.getComponent(cc.BoxCollider),this.squatBtn.on("touchstart",this.getSquatKeyDown,this),this.squatBtn.on("touchend",this.getSquatKeyUp,this),this.squatBtn.on("touchcancel",this.getSquatKeyUp,this),this.jumpBtn.on("touchstart",this.getJumpKeyDown,this),h.EventManager.getInstance().addEventListener(h.EventType.onHide,this.onHide.bind(this),"playerCtrl"),h.EventManager.getInstance().addEventListener(h.EventType.onShow,this.onShow.bind(this),"playerCtrl"),0==this.state?this.spCtrl.jump():1==this.state&&(this.spCtrl.motuo_run(),this.changeColSizeMotuo(1))},e.prototype.changeState=function(t){this.mPlayerState==n.squat&&this.isSquating||(t==n.idle?this.idleStart():t==n.jump?this.jumpStart():t==n.down?this.downStart():this.squatStart(),t!=n.squat&&this.isSquat&&(this.isSquat=!1,0==this.state?this.changeColSize(1):1==this.state&&this.changeColSizeMotuo(1)))},e.prototype.update=function(t){t=.0172,this.mPlayerState==n.idle?this.idleUpdate():this.mPlayerState==n.jump?this.jumpUpdate(t):this.mPlayerState==n.down?this.downUpdate(t):this.squatUpdate(),this.isComplete?this.node.x+=t*a.GameLoop.getInstance().currIndex==0?3:6:this.isNeedCheck&&this.checkMoveBack(t)},e.prototype.checkMoveBack=function(t){this.node.convertToWorldSpaceAR(cc.v2(0,0)).x>350&&(this.node.x-=50*t)},e.prototype.idleStart=function(){this.mPlayerState=n.idle,this.downSpeed=0,0==this.state?this.spCtrl.run():1==this.state&&this.spCtrl.motuo_run()},e.prototype.jumpStart=function(){this.mPlayerState=n.jump,this.downSpeed=0,this.currJumpSpeed=this.jumpSpeed,0==this.state?this.spCtrl.jump():1==this.state&&this.spCtrl.motuo_jump(),this.smokeCtrl.play(this.node.position)},e.prototype.downStart=function(){this.mPlayerState=n.down},e.prototype.squatStart=function(){this.mPlayerState=n.squat,0==this.state?this.changeColSize(0):1==this.state&&this.changeColSizeMotuo(0),this.isSquat=!0,0==this.state?this.spCtrl.squat():1==this.state&&this.spCtrl.motuo_squat()},e.prototype.idleUpdate=function(){this.collCount<=0&&null!=this.rightStepNode&&this.rightStepNode.isValid&&(this.node.y-=this.ComputeUpSpeed(this.rightStepNode))},e.prototype.jumpUpdate=function(t){this.node.y+=this.currJumpSpeed*t,this.currJumpSpeed-=this.mGravity*t,this.currJumpSpeed<0&&this.changeState(n.down)},e.prototype.downUpdate=function(t){this.node.y+=-this.downSpeed*t,this.downSpeed+=this.mGravity*t},e.prototype.squatUpdate=function(){this.collCount<=0&&null!=this.rightStepNode&&this.rightStepNode.isValid&&(this.node.y-=this.ComputeUpSpeed(this.rightStepNode))},e.prototype.onCollisionEnter=function(t,e){switch(this.collCount++,t.tag){case 0:this.mPlayerState!=n.idle&&this.mPlayerState!=n.squat&&(this.changeState(n.idle),this.node.y=t.node.y+t.node.height*t.node.scaleY*.5-.1);break;case 2:this.rightStepNode=t.node,this.mPlayerState!=n.squat&&this.changeState(n.idle);break;case 11:case 12:case 13:case 14:this.obstacleCount++,this.isCollisionLeft(t,e)?(this.isUpCol=!1,this.isLeftCol=!0,0==a.GameLoop.getInstance().currIndex?i.mainExterior.getInstance().minusHeart(this.node.position):1==a.GameLoop.getInstance().currIndex&&l.levelTwoExterior.getInstance().minusHeart(this.node.position),h.EventManager.getInstance().dispatchEvent(h.EventType.addObsPool,t.node),this.cameraShake.shake(),this.explosionCtrl.play(t.node.position),r.AudioManager.getInstance().playSound(a.GameLoop.getInstance().isMan?r.AudioType.OBSMAN:r.AudioType.OBSWOMAN)):this.isCollisionUp(t,e)?(this.isUpCol=!0,this.isLeftCol=!1,this.node.y=t.node.y+t.node.height*t.node.scaleY*.5-.1,this.changeState(n.idle)):this.isCollisionBottom(t,e)&&this.changeState(n.down);break;case 5:break;case 6:var o=t.node.getComponent(d.goldAction);o.hide(),0==a.GameLoop.getInstance().currIndex?i.mainExterior.getInstance().addScore(o.score,t.node.convertToWorldSpaceAR(cc.v2(0,0)),o.goldId):1==a.GameLoop.getInstance().currIndex&&l.levelTwoExterior.getInstance().addScore(o.score,t.node.convertToWorldSpaceAR(cc.v2(0,0)),o.goldId),r.AudioManager.getInstance().playSound(r.AudioType.GLOD);break;case 7:a.GameLoop.getInstance().win();break;case 8:this.collCount--;break;case 9:t.node.getComponent(y.packAction).hide(),0==a.GameLoop.getInstance().currIndex?i.mainExterior.getInstance().addScore(100,t.node.convertToWorldSpaceAR(cc.v2(0,0)),3):1==a.GameLoop.getInstance().currIndex&&l.levelTwoExterior.getInstance().addScore(100,t.node.convertToWorldSpaceAR(cc.v2(0,0)),3),r.AudioManager.getInstance().playSound(r.AudioType.GLOD);break;case 30:cc.loader.loadRes("prefabs/other/jinbichufa",cc.Prefab,function(e,o){t.node.getComponent(sp.Skeleton).enabled=!1;var n=cc.instantiate(o);t.node.addChild(n),n.setPosition(cc.v2(0,0))}),0==a.GameLoop.getInstance().currIndex?i.mainExterior.getInstance().addScore(200,t.node.convertToWorldSpaceAR(cc.v2(0,0)),3):1==a.GameLoop.getInstance().currIndex&&l.levelTwoExterior.getInstance().addScore(200,t.node.convertToWorldSpaceAR(cc.v2(0,0)),3),r.AudioManager.getInstance().playSound(r.AudioType.GLOD);break;default:this.mPlayerState!=n.squat&&this.changeState(n.idle)}},e.prototype.onCollisionStay=function(t){1==t.tag&&(this.node.y+=this.ComputeUpSpeed(t.node)),4==t.tag&&(this.isSquating=!0)},e.prototype.onCollisionExit=function(t,e){8!=t.tag&&this.collCount--,11!=t.tag&&12!=t.tag&&13!=t.tag&&14!=t.tag||(this.obstacleCount--,0==this.collCount&&(this.isUpCol&&this.mPlayerState!=n.jump&&t.world.aabb.xMax<e.world.aabb.xMin&&this.changeState(n.down),this.isUpCol=!1,this.isLeftCol=!1)),4==t.tag&&(this.isSquating=!1,this.changeState(n.idle))},e.prototype.isCollisionLeft=function(t,e){var o=t.world.aabb,n=t.world.preAabb.clone(),i=e.world.aabb,s=e.world.preAabb.clone();return s.x=i.x,n.x=o.x,!!cc.Intersection.rectRect(s,o)},e.prototype.isCollisionUp=function(t,e){var o=t.world.aabb,n=t.world.preAabb.clone(),i=e.world.aabb,s=e.world.preAabb.clone();return s.y=i.y,n.y=o.y,!!(cc.Intersection.rectRect(s,o)&&s.yMax>n.yMax)},e.prototype.isCollisionBottom=function(t,e){var o=t.world.aabb,n=t.world.preAabb.clone(),i=e.world.aabb,s=e.world.preAabb.clone();return s.y=i.y,n.y=o.y,!!(cc.Intersection.rectRect(s,o)&&s.yMin<n.yMin)},e.prototype.ComputeUpSpeed=function(t){var e=t.width/6.4;return t.height/e},e.prototype.onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.w:this.offSquat(),this.onJump();break;case cc.macro.KEY.s:this.onSquat()}},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.w:break;case cc.macro.KEY.s:this.offSquat()}},e.prototype.getSquatKeyDown=function(){this.onSquat()},e.prototype.getSquatKeyUp=function(){this.offSquat()},e.prototype.getJumpKeyDown=function(){this.offSquat(),this.onJump()},e.prototype.onJump=function(){this.isOver||this.isGamePause||this.mPlayerState!=n.idle&&this.mPlayerState!=n.squat||this.changeState(n.jump)},e.prototype.onSquat=function(){this.isOver||this.isGamePause||this.mPlayerState==n.idle&&this.changeState(n.squat)},e.prototype.offSquat=function(){this.isOver||this.isGamePause||this.mPlayerState==n.squat&&this.changeState(n.idle)},e.prototype.complete=function(){this.isComplete=!0},e.prototype.changeColSize=function(t){0===t?(this.collider.offset.y=42.4,this.collider.size.height=.7*this.node.height):(this.collider.offset.y=61.9,this.collider.size.height=this.node.height)},e.prototype.changeColSizeMotuo=function(t){0===t?(this.collider.offset=cc.v2(-2.8,48.3),this.collider.size=cc.size(116.2,96.6)):(this.collider.offset=cc.v2(-2.8,61.9),this.collider.size=cc.size(116.2,123.8))},e.prototype.stop=function(){this.isOver=!0,this.spCtrl.stop()},e.prototype.pasue=function(){this.isOver||(this.isGamePause=!0,this.spCtrl.stop())},e.prototype.continue=function(){this.isOver||(this.isGamePause=!1,this.spCtrl.continue())},e.prototype.zoomOut=function(){this.node.runAction(cc.scaleTo(.3,.8,.8)),this.jumpSpeed*=.55,this.mGravity*=.55,this.isNeedCheck=!0},e.prototype.onHide=function(){this.pasue()},e.prototype.onShow=function(){this.continue()},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.squatBtn.off("touchstart",this.getSquatKeyDown,this),this.squatBtn.off("touchend",this.getSquatKeyUp,this),this.squatBtn.off("touchcancel",this.getSquatKeyUp,this),this.jumpBtn.off("touchstart",this.getJumpKeyDown,this),h.EventManager.getInstance().removeEventListenerByTag(h.EventType.onHide,"playerCtrl"),h.EventManager.getInstance().removeEventListenerByTag(h.EventType.onShow,"playerCtrl")},__decorate([g({type:cc.Float,tooltip:"\u91cd\u529b\u52a0\u901f\u5ea6"})],e.prototype,"mGravity",void 0),__decorate([g({type:cc.Float,tooltip:"\u5411\u4e0a\u8df3\u8dc3\u7684\u521d\u59cb\u901f\u5ea6"})],e.prototype,"jumpSpeed",void 0),__decorate([m],e)}(cc.Component);o.playerCtrl=v,cc._RF.pop()},{"../../../GameLoop":"GameLoop","../../../comms/AudioManager":"AudioManager","../../../comms/CameraShake":"CameraShake","../../../comms/EventManager":"EventManager","../../../other/explosion":"explosion","../../../other/goldAction":"goldAction","../../../other/packAction":"packAction","../../../other/smoke":"smoke","../../02level/levelTwoExterior":"levelTwoExterior","../mainExterior":"mainExterior","./ISpineCtrl":"ISpineCtrl"}],randomRoom:[function(t,e,o){"use strict";cc._RF.push(e,"b7e6a40KOdBLZGcORjtx2YB","randomRoom"),Object.defineProperty(o,"__esModule",{value:!0}),o.randomRoom=void 0;var n=cc._decorator,i=n.ccclass,s=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rooms=[],e.nodes=[],e.lastIndex=0,e}return __extends(e,t),e.prototype.start=function(){var t=this;this.nodes.forEach(function(e){e.children.forEach(function(e){var o=Math.floor(Math.random()*t.rooms.length);o==t.lastIndex&&(o+=Math.floor(Math.random()*(t.rooms.length-1)+1),o%=t.rooms.length),e.getComponent(cc.Sprite).spriteFrame=t.rooms[o],t.lastIndex=o})})},__decorate([s({type:[cc.SpriteFrame],tooltip:"\u968f\u673a\u623f\u95f4\u6570\u7ec4"})],e.prototype,"rooms",void 0),__decorate([s({type:[cc.Node],tooltip:"\u9700\u8981\u4fee\u6539\u7684\u8282\u70b9"})],e.prototype,"nodes",void 0),__decorate([i],e)}(cc.Component);o.randomRoom=c,cc._RF.pop()},{}],rankPanel:[function(t,e,o){"use strict";cc._RF.push(e,"72779J/N1dOMKf3iARlIH+P","rankPanel"),Object.defineProperty(o,"__esModule",{value:!0}),o.rankPanel=void 0;var n=t("./IUIBase"),i=t("./openAction/IOpenStrategy"),s=t("../sceneState/startScene/startExterior"),c=t("../comms/AudioManager"),a=t("../GameLoop"),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lv1=null,e.lv2=null,e.lv3=null,e.currSelect=null,e.closeBtn=null,e.wxSubContextView=null,e}return __extends(e,t),e.prototype.initStrategy=function(){this.mOpenStrategy=new i.strateA(this.skin)},e.prototype.init=function(e){t.prototype.init.call(this,e),this.skinPath="rankPanel",this.layer=n.PanelLayer.funcPanel},e.prototype.onShowed=function(){this.initComponent()},e.prototype.initComponent=function(){this.lv1=cc.find("context/lv1",this.skin),this.lv2=cc.find("context/lv2",this.skin),this.lv3=cc.find("context/lv3",this.skin),this.closeBtn=cc.find("close_btn",this.skin),this.wxSubContextView=cc.find("context",this.skin).getComponent(cc.WXSubContextView),this.closeBtn.on("touchend",this.onCloseBtn,this),this.lv1.on("touchend",this.onLv1,this),this.lv2.on("touchend",this.onLv2,this),this.lv3.on("touchend",this.onLv3,this),this.currSelect=this.lv1,null!=a.GameLoop.getInstance().platform&&(this.wxSubContextView.enabled=!0,a.GameLoop.getInstance().platform.postMessageToOpenDataContext({k:"update"}))},e.prototype.onCloseBtn=function(){s.startExterior.getInstance().uiSys.closePanel(this.getSkinName()),c.AudioManager.getInstance().playSound(c.AudioType.CLICK)},e.prototype.onLv1=function(){this.lv1!=this.currSelect&&(this.onSelect(this.lv1),a.GameLoop.getInstance().platform.postMessageToOpenDataContext({k:"s_1"}))},e.prototype.onLv2=function(){this.lv2!=this.currSelect&&(this.onSelect(this.lv2),a.GameLoop.getInstance().platform.postMessageToOpenDataContext({k:"s_2"}))},e.prototype.onLv3=function(){this.lv3!=this.currSelect&&(this.onSelect(this.lv3),a.GameLoop.getInstance().platform.postMessageToOpenDataContext({k:"s_3"}))},e.prototype.onSelect=function(t){var e=this.currSelect.getComponent(cc.Sprite),o=t.getComponent(cc.Sprite),n=e.spriteFrame;e.spriteFrame=o.spriteFrame,o.spriteFrame=n,t.children[0].color=cc.Color.WHITE,this.currSelect.children[0].color=new cc.Color(83,110,95),this.currSelect=t},e.prototype.onDestroy=function(){this.closeBtn.off("touchend",this.onCloseBtn,this)},e}(n.IUIBase);o.rankPanel=r,cc._RF.pop()},{"../GameLoop":"GameLoop","../comms/AudioManager":"AudioManager","../sceneState/startScene/startExterior":"startExterior","./IUIBase":"IUIBase","./openAction/IOpenStrategy":"IOpenStrategy"}],recover:[function(t,e,o){"use strict";cc._RF.push(e,"aa09d93RRlD/pwom/9WanIt","recover"),Object.defineProperty(o,"__esModule",{value:!0}),o.recover=void 0;var n=t("../comms/EventManager"),i=cc._decorator,s=i.ccclass,c=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onCollisionExit=function(t){switch(t.tag){case 11:case 12:case 13:case 14:n.EventManager.getInstance().dispatchEvent(n.EventType.addObsPool,t.node);break;case 20:n.EventManager.getInstance().dispatchEvent(n.EventType.addGoldPool,t.node);break;default:t.node.destroy()}},__decorate([s],e)}(cc.Component));o.recover=c,cc._RF.pop()},{"../comms/EventManager":"EventManager"}],scoreTip:[function(t,e,o){"use strict";cc._RF.push(e,"d6b52YOYgxF5JVpfpsGmi0F","scoreTip"),Object.defineProperty(o,"__esModule",{value:!0}),o.scoreTip=void 0;var n=cc._decorator,i=n.ccclass,s=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spList=[],e.sp=null,e}return __extends(e,t),e.prototype.setSp=function(t){switch(t){case 10:this.sp.spriteFrame=this.spList[0];break;case 20:this.sp.spriteFrame=this.spList[1];break;case 50:this.sp.spriteFrame=this.spList[2];break;case 100:this.sp.spriteFrame=this.spList[3];break;case 200:this.sp.spriteFrame=this.spList[4]}},__decorate([s([cc.SpriteFrame])],e.prototype,"spList",void 0),__decorate([s(cc.Sprite)],e.prototype,"sp",void 0),__decorate([i],e)}(cc.Component);o.scoreTip=c,cc._RF.pop()},{}],selectLevelPanel:[function(t,e,o){"use strict";cc._RF.push(e,"bae3fzD4EpFhY3Kj9A+s6P1","selectLevelPanel"),Object.defineProperty(o,"__esModule",{value:!0}),o.selectLevelPanel=void 0;var n=t("./IUIBase"),i=t("./openAction/IOpenStrategy"),s=t("../sceneState/startScene/startExterior"),c=t("../comms/AudioManager"),a=t("./selectPanel"),r=cc._decorator,l=r.ccclass,p=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewSpaceX=0,e.currIndex=0,e.backBtn=null,e.enterBtn=null,e.contextView=null,e.contextViewLayOut=null,e.itemList=null,e.timer=null,e}return __extends(e,t),e.prototype.initStrategy=function(){this.mOpenStrategy=new i.strateC(this.skin)},e.prototype.init=function(e){t.prototype.init.call(this,e),this.skinPath="selectLevelPanel",this.layer=n.PanelLayer.funcPanel},e.prototype.onShowed=function(){this.initComponent()},e.prototype.initComponent=function(){this.backBtn=cc.find("btn_back",this.skin),this.enterBtn=cc.find("btn_enter",this.skin),this.contextView=cc.find("contextView",this.skin),this.contextViewLayOut=this.contextView.getComponent(cc.Layout),this.itemList=this.contextView.children,this.openAction(),this.onBtnEvent()},e.prototype.openAction=function(){var t=this;this.timer=function(){t.contextViewLayOut.spacingX<=50&&(t.contextViewLayOut.spacingX=50,t.unschedule(t.timer),t.timer=null),t.contextViewLayOut.spacingX-=10},this.schedule(this.timer,.016),this.contextView.runAction(this.action(.3,cc.v2(0,-20))),this.backBtn.runAction(this.action(.3,cc.v2(-560,300))),this.enterBtn.runAction(this.action(.3,cc.v2(0,-240)))},e.prototype.action=function(t,e){return cc.spawn(cc.moveTo(t,e).easing(cc.easeBackOut()),cc.fadeIn(t))},e.prototype.onBtnEvent=function(){var t=this;this.backBtn.on("touchend",this.onBackBtn,this),this.enterBtn.on("touchend",this.onEnterBtn,this);for(var e=function(e){if(3==e)return"break";o.itemList[e].on("touchend",function(){t.currIndex!=e&&(t.onSelectLevel(e),t.currIndex=e)},o)},o=this,n=0;n<this.itemList.length&&"break"!==e(n);n++);},e.prototype.onBackBtn=function(){s.startExterior.getInstance().uiSys.closePanel(this.getSkinName()),c.AudioManager.getInstance().playSound(c.AudioType.CLICK)},e.prototype.onEnterBtn=function(){s.startExterior.getInstance().currIndex=this.currIndex,c.AudioManager.getInstance().playSound(c.AudioType.CLICK),s.startExterior.getInstance().uiSys.openPanel(a.selectPanel,"selectPanel"),this.onBackBtn()},e.prototype.onSelectLevel=function(t){c.AudioManager.getInstance().playSound(c.AudioType.CLICK),this.itemList[this.currIndex].getChildByName("mask").runAction(cc.fadeIn(.3)),this.itemList[t].getChildByName("mask").runAction(cc.fadeOut(.3))},e.prototype.onDestroy=function(){this.backBtn.off("touchend",this.onBackBtn,this),this.enterBtn.off("touchend",this.onEnterBtn,this)},__decorate([l],e)}(n.IUIBase));o.selectLevelPanel=p,cc._RF.pop()},{"../comms/AudioManager":"AudioManager","../sceneState/startScene/startExterior":"startExterior","./IUIBase":"IUIBase","./openAction/IOpenStrategy":"IOpenStrategy","./selectPanel":"selectPanel"}],selectPanel:[function(t,e,o){"use strict";cc._RF.push(e,"c516c/wmS5HhZZIw6pbYhIP","selectPanel"),Object.defineProperty(o,"__esModule",{value:!0}),o.selectPanel=void 0;var n=t("./IUIBase"),i=t("../sceneState/startScene/startExterior"),s=t("./openAction/IOpenStrategy"),c=t("./loadPanel"),a=t("../GameLoop"),r=t("../comms/AudioManager"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.manRole=null,e.womanRole=null,e.select=null,e.yes=null,e.closeBtn=null,e.currSelect=null,e.isMan=!1,e}return __extends(e,t),e.prototype.initStrategy=function(){this.mOpenStrategy=new s.strateA(this.skin)},e.prototype.init=function(e){t.prototype.init.call(this,e),this.skinPath="selectPanel",this.layer=n.PanelLayer.funcPanel},e.prototype.onShowed=function(){this.initComponent()},e.prototype.initComponent=function(){var t=this;this.manRole=cc.find("man_role",this.skin),this.womanRole=cc.find("woman_role",this.skin),this.select=cc.find("select_role",this.skin),this.yes=cc.find("yes",this.skin),this.closeBtn=cc.find("close_btn",this.skin),this.closeBtn.on("touchend",this.onCloseBtn,this),this.yes.on("touchend",this.onYesBtn,this),this.manRole.on("touchend",function(){t.onSelectRole(t.manRole)},this),this.womanRole.on("touchend",function(){t.onSelectRole(t.womanRole)},this),this.ItemAction()},e.prototype.ItemAction=function(){var t=this;this.manRole.runAction(cc.sequence(cc.spawn(cc.moveTo(.1,cc.v2(-125,-35)),cc.fadeTo(.1,255)),cc.callFunc(function(){t.onSelectRole(t.manRole)}))),this.womanRole.runAction(cc.spawn(cc.moveTo(.1,cc.v2(125,-35)),cc.fadeTo(.1,255))),this.yes.runAction(cc.spawn(cc.moveTo(.1,cc.v2(0,-260)),cc.fadeTo(.1,255)))},e.prototype.onCloseBtn=function(){i.startExterior.getInstance().uiSys.closePanel(this.getSkinName()),r.AudioManager.getInstance().playSound(r.AudioType.CLICK)},e.prototype.onSelectRole=function(t){t!=this.currSelect&&(null!=this.currSelect&&this.currSelect.runAction(cc.scaleTo(.1,1)),this.currSelect=t,this.currSelect.runAction(cc.scaleTo(.1,1.1)),this.isMan=!this.isMan,a.GameLoop.getInstance().isMan=this.isMan)},e.prototype.onYesBtn=function(){r.AudioManager.getInstance().playSound(r.AudioType.CLICK),a.GameLoop.getInstance().currIndex=i.startExterior.getInstance().currIndex,0==a.GameLoop.getInstance().currIndex?i.startExterior.getInstance().uiSys.openPanel(c.loadPanel,"loadPanel",["01level",i.startExterior.getInstance()]):1==a.GameLoop.getInstance().currIndex?i.startExterior.getInstance().uiSys.openPanel(c.loadPanel,"loadPanel",["02level",i.startExterior.getInstance()]):2==a.GameLoop.getInstance().currIndex&&i.startExterior.getInstance().uiSys.openPanel(c.loadPanel,"loadPanel",["03level",i.startExterior.getInstance()])},e.prototype.onDestroy=function(){var t=this;this.closeBtn.off("touchend",this.onCloseBtn,this),this.yes.off("touchend",this.onYesBtn,this),this.manRole.off("touchend",function(){t.onSelectRole(t.manRole)},this),this.womanRole.off("touchend",function(){t.onSelectRole(t.womanRole)},this)},e}(n.IUIBase);o.selectPanel=l,cc._RF.pop()},{"../GameLoop":"GameLoop","../comms/AudioManager":"AudioManager","../sceneState/startScene/startExterior":"startExterior","./IUIBase":"IUIBase","./loadPanel":"loadPanel","./openAction/IOpenStrategy":"IOpenStrategy"}],settingBtnSp:[function(t,e,o){"use strict";cc._RF.push(e,"10f6fPSy0dPObzhfWhYUumK","settingBtnSp"),Object.defineProperty(o,"__esModule",{value:!0}),o.settingBtnSp=void 0;var n=cc._decorator,i=n.ccclass,s=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgs=[],e}return __extends(e,t),__decorate([s(cc.SpriteFrame)],e.prototype,"bgs",void 0),__decorate([i],e)}(cc.Component);o.settingBtnSp=c,cc._RF.pop()},{}],smoke:[function(t,e,o){"use strict";cc._RF.push(e,"539efnVqBlJto/oTDDgge8q","smoke"),Object.defineProperty(o,"__esModule",{value:!0}),o.smoke=void 0;var n,i=cc._decorator,s=i.ccclass,c=i.property;(function(t){t[t.Normal=0]="Normal",t[t.motuo=1]="motuo"})(n||(n={}));var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.smokeTy=n.Normal,e.sp=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.sp=this.getComponent(sp.Skeleton)},e.prototype.play=function(t){t.x-=this.node.parent.x,this.node.setPosition(t),this.smokeTy==n.Normal?this.sp.setAnimation(0,"renyanwu",!1):this.sp.setAnimation(0,"motuocheyanwu",!1)},__decorate([c({type:cc.Enum(n),tooltip:"\u70df\u96fe\u7c7b\u578b"})],e.prototype,"smokeTy",void 0),__decorate([s],e)}(cc.Component);o.smoke=a,cc._RF.pop()},{}],sperture:[function(t,e,o){"use strict";cc._RF.push(e,"8d270ZxtYtED4oKTnAxUwI4","sperture"),Object.defineProperty(o,"__esModule",{value:!0}),o.sperture=void 0;var n=cc._decorator,i=n.ccclass,s=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pre=null,e.uiElement=null,e.pool=null,e}return __extends(e,t),e.prototype.start=function(){this.pool=new cc.NodePool;for(var t=0;t<2;t++){var e=cc.instantiate(this.pre);this.pool.put(e)}this.node.on("touchstart",this.play,this)},e.prototype.play=function(){var t=this,e=null;e=this.pool.size()>0?this.pool.get():cc.instantiate(this.pre),this.uiElement.addChild(e),e.setPosition(this.node.position),e.opacity=255,e.runAction(cc.sequence(cc.spawn(cc.scaleTo(.5,1.3),cc.fadeOut(.5)),cc.callFunc(function(){e.scale=1,t.pool.put(e)})))},__decorate([s({type:cc.Prefab})],e.prototype,"pre",void 0),__decorate([s({type:cc.Node})],e.prototype,"uiElement",void 0),__decorate([i],e)}(cc.Component);o.sperture=c,cc._RF.pop()},{}],startExterior:[function(t,e,o){"use strict";cc._RF.push(e,"c3c7eCEytlMja9jUjmtD8sS","startExterior"),Object.defineProperty(o,"__esModule",{value:!0}),o.startExterior=void 0;var n=t("../../systems/UISystem"),i=t("../../uiSystem/rankPanel"),s=t("../../GameLoop"),c=t("./settingBtnSp"),a=t("../../comms/AudioManager"),r=t("../../uiSystem/desPanel"),l=t("../../uiSystem/selectLevelPanel"),p=t("../../uiSystem/changeRankPanel"),u=function(){function t(){this.mStartState=null,this.uiSys=null,this.startBtn=null,this.upArea=null,this.friendsBtn=null,this.musicBtn=null,this.desBtn=null,this.changeBtn=null,this.bg=null,this.bgNew=null,this.up=cc.v2(0,0),this.center=cc.v2(0,0),this.liuhai=0,this.currIndex=0,this.setBtnSp=null,this.logo=null,this.uiElement=null,this.bgAction=null,this.init()}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.endInstance=function(){this._instance=null},t.prototype.init=function(){this.initComponents()},t.prototype.playBgAction=function(){var t=this;if(s.GameLoop.getInstance().isPlayBgAction)return this.bgAction.destroy(),this.logo.runAction(cc.spawn(cc.moveTo(.2,cc.v2(0,255)),cc.fadeIn(.2))),this.bg.spriteFrame=this.setBtnSp.bgs[this.currIndex],this.uiElement.active=!0,this.hideUI(!1),this.uiElement.opacity=255,void this.showUI();this.logo.runAction(cc.moveTo(3,cc.v2(0,255))),this.bgAction.runAction(cc.sequence(cc.spawn(cc.moveTo(2,cc.v2(0,0)),cc.fadeIn(2)),cc.callFunc(function(){t.bgAction.children[1].runAction(cc.sequence(cc.spawn(cc.fadeIn(1),cc.moveTo(1,cc.v2(0,0))),cc.callFunc(function(){t.bgAction.children[0].runAction(cc.sequence(cc.spawn(cc.fadeIn(1),cc.moveBy(1,cc.v2(0,100))),cc.callFunc(function(){t.onBgAction()})))})))})))},t.prototype.onBgAction=function(){var t=this;this.uiElement.active=!0,this.hideUI(!1,function(){t.uiElement.opacity=255,t.showUI(),s.GameLoop.getInstance().isPlayBgAction=!0})},t.prototype.initComponents=function(){s.GameLoop.getInstance().currIndex=-1,this.uiSys=new n.UISystem,this.uiSys.sysInit(),this.uiElement=cc.find("Canvas/UILayer/uiElement"),this.startBtn=cc.find("combat_btn",this.uiElement),this.upArea=cc.find("up",this.uiElement),this.friendsBtn=cc.find("friends",this.upArea),this.musicBtn=cc.find("musicBtn",this.upArea),this.desBtn=cc.find("description",this.upArea),this.changeBtn=cc.find("changeBtn",this.upArea),this.bg=cc.find("Canvas/bg").getComponent(cc.Sprite),this.bgNew=cc.find("Canvas/bgNew").getComponent(cc.Sprite),this.setBtnSp=cc.find("Canvas").getComponent(c.settingBtnSp),this.logo=cc.find("Canvas/UILayer/logo"),this.bgAction=cc.find("Canvas/bg/bgAction"),this.initUIPos(),this.uiElement.active=!1,this.playBgAction(),this.onBtnEvent();var t=s.GameLoop.getInstance().isMuteAudio,e=cc.find("Canvas").getComponent(c.settingBtnSp);this.musicBtn.getComponent(cc.Sprite).spriteFrame=t?e.bgs[4]:e.bgs[3],a.AudioManager.getInstance().playBGM(a.AudioType.BGM_1)},t.prototype.initUIPos=function(){this.up=this.upArea.position,this.center=this.startBtn.position},t.prototype.setSceneState=function(t){this.mStartState=t},t.prototype.setMainState=function(){this.mStartState.setMainState()},t.prototype.setLevel_2State=function(){this.mStartState.setLevel_2State()},t.prototype.setLevel_3State=function(){this.mStartState.setLevel_3State()},t.prototype.update=function(){},t.prototype.end=function(){this.startBtn.off("touchend",this.onstartBtn,this),this.friendsBtn.off("touchend",this.onfriendsBtn,this),this.musicBtn.off("touchend",this.onMusicBtn,this),this.desBtn.off("touchend",this.ondesBtn,this),this.changeBtn.off("touchend",this.onChangebtn,this),t.endInstance()},t.prototype.onBtnEvent=function(){this.startBtn.on("touchend",this.onstartBtn,this),this.friendsBtn.on("touchend",this.onfriendsBtn,this),this.musicBtn.on("touchend",this.onMusicBtn,this),this.desBtn.on("touchend",this.ondesBtn,this),this.changeBtn.on("touchend",this.onChangebtn,this)},t.prototype.onstartBtn=function(){this.uiSys.openPanel(l.selectLevelPanel,"selectLevelPanel"),a.AudioManager.getInstance().playSound(a.AudioType.CLICK)},t.prototype.onfriendsBtn=function(){this.uiSys.openPanel(i.rankPanel,"rankPanel"),a.AudioManager.getInstance().playSound(a.AudioType.CLICK)},t.prototype.onMusicBtn=function(){var t=s.GameLoop.getInstance().onMusicBtn(),e=cc.find("Canvas").getComponent(c.settingBtnSp);this.musicBtn.getComponent(cc.Sprite).spriteFrame=t?e.bgs[4]:e.bgs[3],a.AudioManager.getInstance().playSound(a.AudioType.CLICK)},t.prototype.ondesBtn=function(){this.uiSys.openPanel(r.desPanel,"desPanel"),a.AudioManager.getInstance().playSound(a.AudioType.CLICK)},t.prototype.onChangebtn=function(){this.uiSys.openPanel(p.changeRankPanel,"changeRankPanel"),a.AudioManager.getInstance().playSound(a.AudioType.CLICK)},t.prototype.hideUI=function(t,e){void 0===t&&(t=!0);var o=t?.2:.001;this.upArea.runAction(this.actionBack(0,100,o)),this.startBtn.runAction(this.actionBack(0,-100,o,e))},t.prototype.showUI=function(){this.upArea.runAction(this.actionTo(this.up)),this.startBtn.runAction(this.actionTo(this.center))},t.prototype.actionBack=function(t,e,o,n){return void 0===o&&(o=.3),cc.sequence(cc.spawn(cc.moveBy(o,cc.v2(t,e)),cc.fadeOut(o)),cc.callFunc(function(){n&&n()}))},t.prototype.actionTo=function(t){return cc.sequence(cc.delayTime(.02),cc.spawn(cc.moveTo(.3,t).easing(cc.easeBackOut()),cc.fadeIn(.3)))},t._instance=null,t}();o.startExterior=u,cc._RF.pop()},{"../../GameLoop":"GameLoop","../../comms/AudioManager":"AudioManager","../../systems/UISystem":"UISystem","../../uiSystem/changeRankPanel":"changeRankPanel","../../uiSystem/desPanel":"desPanel","../../uiSystem/rankPanel":"rankPanel","../../uiSystem/selectLevelPanel":"selectLevelPanel","./settingBtnSp":"settingBtnSp"}],textureRenderUtils:[function(t,e){"use strict";cc._RF.push(e,"f8078vuMahBQK4h2vSMmtNG","textureRenderUtils"),cc.Class({extends:cc.Component,properties:{_canvas:null},saveFile:function(){if(cc.sys.platform!==cc.sys.WECHAT_GAME)return console.log("it not wechat"),!1;var t=this,e=[{img:null,src:"https://www.19960909.com/minigame-fendi/imgs/scene_1"}],o=0,n=function(){++o==e.length&&t.drawImg(e)},i=function(){t.failSave()};try{for(var s=0;s<e.length;s++)e[s].img=wx.createImage(),e[s].img.src=e[s].src,e[s].img.onload=n,e[s].img.onerror=i}catch(c){console.log("\u62a5\u9519:",c)}},drawImg:function(t){try{var e=null;this._canvas?(this.clearCanvas(),e=this._canvas):this._canvas=e=wx.createCanvas();var o=e.getContext("2d");e.width=t[0].img.width,e.height=t[0].img.height,o.font="30px \u5b8b\u4f53",o.fillStyle="#FFF",o.drawImage(t[1].img,155,560,140,140),o.fillText("\u80dc\u5229\u8005",140,740,200),this.canvasToImg(e)}catch(n){console.log("drawImg error:",n)}},canvasToImg:function(t){var e=this;try{t.toTempFilePath({x:0,y:0,width:t.width,height:t.height,destWidth:t.width,destHeight:t.height,fileType:"jpg",quality:1,success:function(t){console.log("\u4fdd\u5b58\u8def\u5f84\u6210\u529f:",t.tempFilePath),e.getPhotosAlbum(t.tempFilePath)},fail:function(t){console.log("\u4fdd\u5b58\u8def\u5f84\u5931\u8d25:",t)}})}catch(o){console.log("canvas\u8f6c\u56fe\u7247\u5931\u8d25:",o)}},getPhotosAlbum:function(t){var e=this;wx.authorize({scope:"scope.writePhotosAlbum",success:function(){console.log("\u83b7\u53d6\u6388\u6743\u6210\u529f"),e.savePicture(t)},fail:function(){console.log("\u83b7\u53d6\u6388\u6743\u5931\u8d25")}})},savePicture:function(t){wx.saveImageToPhotosAlbum({filePath:t,success:function(){console.log("\u4fdd\u5b58\u6210\u529f")},fail:function(t){console.log("\u4fdd\u5b58\u5931\u8d25:",t)}})},clearCanvas:function(){this._canvas.getContext("2d").clearRect(0,0,this._canvas.width,this._canvas.height)},failSave:function(){console.log("\u4fdd\u5b58\u5931\u8d25")}}),cc._RF.pop()},{}],trigger:[function(t,e,o){"use strict";cc._RF.push(e,"6b0b3DT8G9MKIwdmgTvPuT+","trigger"),Object.defineProperty(o,"__esModule",{value:!0}),o.trigger=void 0;var n=t("../mainExterior"),i=t("../../03level/levelThreeExterior"),s=t("../../../GameLoop"),c=t("../../02level/levelTwoExterior"),a=t("../../../comms/EventManager"),r=cc._decorator,l=r.ccclass,p=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mask=null,e.b1=null,e.b2=null,e}return __extends(e,t),e.prototype.onCollisionEnter=function(t){switch(t.tag){case 7:0==s.GameLoop.getInstance().currIndex?(n.mainExterior.getInstance().stop(),n.mainExterior.getInstance().pyCtrl.complete()):1==s.GameLoop.getInstance().currIndex?(c.levelTwoExterior.getInstance().stop(),c.levelTwoExterior.getInstance().pyCtrl.complete()):2==s.GameLoop.getInstance().currIndex&&(i.levelThreeExterior.getInstance().stop(),i.levelThreeExterior.getInstance().pyCtrl.complete());break;case 10:this.clearMask();break;case 11:case 12:case 13:case 14:0==s.GameLoop.getInstance().currIndex?n.mainExterior.getInstance().triggerObs(t.node,t.tag):1==s.GameLoop.getInstance().currIndex?c.levelTwoExterior.getInstance().triggerObs(t.node,t.tag):s.GameLoop.getInstance().currIndex}},e.prototype.clearMask=function(){var t=this;null!=this.mask&&(a.EventManager.getInstance().dispatchEvent(a.EventType.zoomIn),this.mask.runAction(cc.sequence(cc.delayTime(1),cc.fadeOut(.2),cc.callFunc(function(){null!=t.b1&&(t.b1.runAction(cc.fadeIn(.2)),t.b2.runAction(cc.fadeIn(.2)))}))),n.mainExterior.getInstance().pyCtrl.zoomOut(),n.mainExterior.getInstance().zoomOut(),n.mainExterior.getInstance().decelerate())},__decorate([p(cc.Node)],e.prototype,"mask",void 0),__decorate([p(cc.Node)],e.prototype,"b1",void 0),__decorate([p(cc.Node)],e.prototype,"b2",void 0),__decorate([l],e)}(cc.Component);o.trigger=u,cc._RF.pop()},{"../../../GameLoop":"GameLoop","../../../comms/EventManager":"EventManager","../../02level/levelTwoExterior":"levelTwoExterior","../../03level/levelThreeExterior":"levelThreeExterior","../mainExterior":"mainExterior"}],"use_v2.1-2.2.1_cc.Toggle_event":[function(t,e){"use strict";cc._RF.push(e,"021ddyy4M9Kz63lLcXEEZU7","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}],"use_v2.1.x_cc.Action":[function(t,e){"use strict";cc._RF.push(e,"cada1UH7clAVrRC7opUXM10","use_v2.1.x_cc.Action"),cc.macro.ROTATE_ACTION_CCW=!0,cc._RF.pop()},{}],zoomTrigger:[function(t,e,o){"use strict";cc._RF.push(e,"03839U/XX1P2LNtGJYhSLD2","zoomTrigger"),Object.defineProperty(o,"__esModule",{value:!0}),o.zoomTrigger=void 0;var n=t("../comms/EventManager"),i=cc._decorator,s=i.ccclass,c=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onCollisionEnter=function(t){10==t.tag&&n.EventManager.getInstance().dispatchEvent(n.EventType.zoomTrigger)},__decorate([s],e)}(cc.Component));o.zoomTrigger=c,cc._RF.pop()},{"../comms/EventManager":"EventManager"}]},{},["use_v2.1-2.2.1_cc.Toggle_event","use_v2.1.x_cc.Action","IPlatform","textureRenderUtils","GameLoop","AudioManager","CameraShake","EventManager","GlobalVar","LoaderManager","NodePool","Shake","loading","IGoldAction","destroyCheck","explosion","glod","goldAction","obsLayer","obsLayerThree","obsLayerTwo","packAction","randomRoom","recover","scoreTip","smoke","sperture","zoomTrigger","LayerCtrl","LayerRun","onCultureEvent","trigger","mainExterior","ISpineCtrl","ManSpineCtrl","WomanSpineCtrl","playerCtrl","levelTwoExterior","FlyCtrl","levelThreeExterior","ISceneState","SceneController","settingBtnSp","startExterior","ISystem","UISystem","IUIBase","accountsPanel","changeRankPanel","desPanel","loadPanel","IOpenStrategy","rankPanel","selectLevelPanel","selectPanel"]);